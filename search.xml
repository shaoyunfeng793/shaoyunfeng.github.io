<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux:Nginxé…ç½®nodejsæœåŠ¡å™¨</title>
      <link href="/2023/12/29/nginx-nodeServer/"/>
      <url>/2023/12/29/nginx-nodeServer/</url>
      
        <content type="html"><![CDATA[<h3 id="Nginxé…ç½®nodejsæœåŠ¡å™¨"><a href="#Nginxé…ç½®nodejsæœåŠ¡å™¨" class="headerlink" title="Nginxé…ç½®nodejsæœåŠ¡å™¨"></a>Nginxé…ç½®nodejsæœåŠ¡å™¨</h3><h4 id="1-å®‰è£…nodejs"><a href="#1-å®‰è£…nodejs" class="headerlink" title="1. å®‰è£…nodejs"></a>1. å®‰è£…nodejs</h4><p><em>é€šè¿‡wgetå®‰è£…nodejsï¼Œå®‰è£…è·¯å¾„ä¸º<code>/user/local/src</code>ä¸‹æ–°å»ºçš„<code>node</code>ç›®å½•</em></p><pre><code class="bash">cd  /usr/local/src mkdir nodewget https://npm.taobao.org/mirrors/node/v12.18.2/node-v12.18.2-linux-x64.tar.xztar -xvf node-v12.18.2-linux-x64.tar.xz #è§£å‹nodeå®‰è£…åŒ…mv node-v12.18.2-linux-x64 nodejs #æŠŠè§£å‹åæ–‡ä»¶åæ”¹æˆnodejsï¼Œä¸ç„¶åå­—å¤ªé•¿äº†cd nodejs/bin# æ¥ä¸‹æ¥å°±æ˜¯é…ç½®ç¯å¢ƒpathln -s /usr/local/src/node/nodejs/bin/node /usr/local/bin/nodeln -s /usr/local/src/node/nodejs/bin/npm /usr/local/bin/npm# æ‰§è¡Œä¸Šé¢2ä¸ªæŒ‡ä»¤ï¼Œå¯ä»¥å…¨å±€ä½¿ç”¨nodeã€npmnode -v #è¾“å‡ºç‰ˆæœ¬å·npm -v #è¾“å‡ºç‰ˆæœ¬å·#å®‰è£…pm2ï¼šnodeè¿›ç¨‹ç®¡ç†å·¥å…·npm i -g pm2# æ¥ä¸‹æ¥è¿˜æ˜¯æ˜¯é…ç½®ç¯å¢ƒpathln -s /usr/local/src/node/nodejs/bin/pm2  /usr/local/bin/pm2# æ‰§è¡Œä¸Šé¢æŒ‡ä»¤ï¼Œå¯ä»¥å…¨å±€ä½¿ç”¨pm2pm2 -v #è¾“å‡ºç‰ˆæœ¬å·pm2 start app.js #è¿è¡Œapp.jsç¨‹åºï¼šå³æœåŠ¡å™¨ç¨‹åº</code></pre><h6 id="NodeæœåŠ¡å™¨Code"><a href="#NodeæœåŠ¡å™¨Code" class="headerlink" title="NodeæœåŠ¡å™¨Code"></a>NodeæœåŠ¡å™¨Code</h6><p><em>è¿™é‡Œå°±ç®€å•ä½¿ç”¨<code>express</code>æ­å»ºnodeæœåŠ¡å™¨</em></p><pre><code class="js">// app.jsconst express = require(&quot;express&quot;);const router = express.Router();const https = require(&quot;https&quot;);const url = require(&quot;url&quot;);const app = express();app.use(express.json());app.use(express.urlencoded(&#123; extended: false &#125;));app.all(&quot;*&quot;, function (req, res, next) &#123;  //è®¾ç½®å…è®¸è·¨åŸŸçš„åŸŸåï¼Œ*ä»£è¡¨å…è®¸ä»»æ„åŸŸåè·¨åŸŸ  res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  //å…è®¸çš„headerç±»å‹  res.header(    &quot;Access-Control-Allow-Headers&quot;,    &quot;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&quot;  );  //è·¨åŸŸå…è®¸çš„è¯·æ±‚æ–¹å¼  res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;DELETE,PUT,POST,GET,OPTIONS&quot;);  if (req.method.toLowerCase() == &quot;options&quot;)    res.send(200); //è®©optionså°è¯•è¯·æ±‚å¿«é€Ÿç»“æŸ  else next();&#125;);app.use(router);router.get(&quot;/&quot;, (req, res) =&gt; &#123;  res.send(&quot;Wellcome Express&quot;);&#125;);router.post(&quot;/api/returnData&quot;, (req, res) =&gt; &#123;  console.log(req.body);  const endpoint = &quot;https://xxx.com&quot;;  // åˆ«äººæœåŠ¡å™¨APIåœ°å€  const parsedEndpoint = url.parse(endpoint);   const postData = JSON.stringify(req.body);  const options = &#123;    hostname: parsedEndpoint.hostname,    port: parsedEndpoint.port,    path: parsedEndpoint.path,    method: &quot;POST&quot;,    headers: &#123;      &quot;Content-Type&quot;: &quot;application/json&quot;,      &quot;Content-Length&quot;: postData.length,    &#125;,  &#125;;  const request = https.request(options, (res1) =&gt; &#123;    //æ£€éªŒçŠ¶æ€ç ï¼Œå¦‚æœæˆåŠŸæ¥æ”¶æ•°æ®    if (res1.statusCode === 200) &#123;      res1.setEncoding(&quot;utf8&quot;);      res1.on(&quot;data&quot;, (chunk) =&gt; &#123;        res.send(JSON.parse(chunk));      &#125;);    &#125;  &#125;);  request.on(&quot;error&quot;, (e) =&gt; &#123;    res.send(&#123;      code: -1,      data: e.message,      message: &quot;è¯·æ±‚é”™è¯¯&quot;,    &#125;);    console.error(`problem with request: $&#123;e.message&#125;`);  &#125;);  request.write(postData);  request.end();&#125;);app.listen(8080, () =&gt; &#123;  console.log(&quot;Server Running...&quot;);&#125;);</code></pre><h4 id="2-é…ç½®Nginx"><a href="#2-é…ç½®Nginx" class="headerlink" title="2. é…ç½®Nginx"></a>2. é…ç½®Nginx</h4><p><em>è¿›å…¥åˆ°ä½ çš„nginx&#x2F;conf&#x2F;ï¼Œ<code>vim nginx.conf</code>ï¼Œåªå±•ç¤ºå¯¹åº”é…ç½®ï¼ˆå…¶ä½™ä¸å˜ï¼‰</em></p><pre><code>server &#123;    listen 80;    server_name æœåŠ¡å™¨åŸŸå;    # è¿™ä¸ªæ˜¯é…ç½®å‰ç«¯é¡¹ç›®    location / &#123;        root html/ä½ çš„é¡¹ç›®;        index index.html;    &#125;    # è¿™ä¸ªæ˜¯æ¥å£ä»£ç†ï¼ŒæŠŠä½ å‰ç«¯é¡¹ç›®çš„/apiè¯·æ±‚éƒ½åå‘ä»£ç†åˆ°8080ç«¯å£çš„nodeæœåŠ¡å™¨    location /api/ &#123;        proxy_pass http://127.0.0.1:8080/;     &#125;&#125;</code></pre><p><em>é…ç½®åè¿˜éœ€è¦å»nginx&#x2F;sbin&#x2F;ä¸‹ï¼Œæ‰§è¡Œ<code>./nginx -s reload</code>é‡å¯ä¸‹nginx</em></p>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JSè·å–ç”¨æˆ·IPåŠæ‰€åœ¨çœå¸‚åŒº</title>
      <link href="/2023/06/06/js-getIPaddr/"/>
      <url>/2023/06/06/js-getIPaddr/</url>
      
        <content type="html"><![CDATA[<h3 id="è·å–ç”¨æˆ·IPåŠæ‰€åœ¨çœå¸‚åŒº"><a href="#è·å–ç”¨æˆ·IPåŠæ‰€åœ¨çœå¸‚åŒº" class="headerlink" title="è·å–ç”¨æˆ·IPåŠæ‰€åœ¨çœå¸‚åŒº"></a>è·å–ç”¨æˆ·IPåŠæ‰€åœ¨çœå¸‚åŒº</h3><p><strong>ps:</strong> <em>1.é€šè¿‡<code>https://api.ipify.org?format=json</code>æ¥è·å–å½“å‰ç”¨æˆ·<code>ip</code>ï¼ˆformatå¯ä»¥ä¸ºå…¶ä»–æ–¹å¼ï¼Œå¦‚js&#x2F;jsonpæ‹¼æ¥ä¸ªcallbackï¼‰ï¼›2.é€šè¿‡ç™¾åº¦æŸ¥è¯¢ipåœ°å€çš„apiæŸ¥è¯¢çœå¸‚åŒº</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    ; (function () &#123;        const ajax = function (url, cb = function () &#123; &#125;) &#123;            let xhr;            if (window.XMLHttpRequest) &#123;                xhr = new XMLHttpRequest();            &#125; else if (window.ActiveObject) &#123;//å…¼å®¹IE6ä»¥ä¸‹ç‰ˆæœ¬                xhr = new ActiveXobject(&#39;Microsoft.XMLHTTP&#39;);            &#125;            xhr.open(&quot;GET&quot;, url, true);            xhr.send(null);            xhr.onreadystatechange = function () &#123;                if (xhr.readyState == 4) &#123;                    typeof cb === &#39;function&#39; &amp;&amp; cb(JSON.parse(xhr.responseText))                &#125;            &#125;        &#125;        ajax(&#39;https://api.ipify.org?format=json&#39;, function (d1) &#123;            let ip = d1.ip;            ajax(&#39;https://qifu-api.baidubce.com/ip/geo/v1/district?ip=&#39; + ip, function (d2) &#123;                d2.data.ip = ip;                window.syf_ip_addr = d2.data;            &#125;)        &#125;)    &#125;)();</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å·¥ç¨‹åŒ–ï¼šä½ æ‰€éœ€è¦çŸ¥é“çš„æœ€æ–°çš„babelå…¼å®¹æ€§å®ç°æ–¹æ¡ˆ</title>
      <link href="/2023/02/28/babel-%E5%85%BC%E5%AE%B9%E6%80%A7%E6%96%B9%E6%A1%88/"/>
      <url>/2023/02/28/babel-%E5%85%BC%E5%AE%B9%E6%80%A7%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h3 id="1-core-js"><a href="#1-core-js" class="headerlink" title="1.core-js"></a>1.core-js</h3><p><code>core-js</code>æ˜¯JavaScriptçš„æ¨¡å—åŒ–æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬äº†ECMAScriptåˆ°2021å¹´çš„æ–°apiçš„å‘åå…¼å®¹å®ç°ã€‚å®ƒå’Œ<code>babel</code>é«˜åº¦é›†æˆï¼Œæ˜¯babelè§£å†³æ–°ç‰¹æ€§åœ¨æµè§ˆå™¨ä¸­å…¼å®¹é—®é¢˜çš„æ ¸å¿ƒä¾èµ–ã€‚</p><p>ç›®å‰<code>core-js</code>çš„ç‰ˆæœ¬æ˜¯<code>3.x</code>ï¼Œä¸<code>core-js@2</code>ç›¸æ¯”ä¸ä»…åœ¨æœ¬èº«çš„æ¶æ„ä¸Šæœ‰é‡å¤§è°ƒæ•´ï¼Œè¿˜å¯¹babelä¸­çš„ä¸€äº›æ’ä»¶æœ‰é‡å¤§å½±å“ã€‚</p><h4 id="1-1-core-js-2"><a href="#1-1-core-js-2" class="headerlink" title="1.1 core-js@2"></a>1.1 core-js@2</h4><p><code>core-js@2</code>è¢«<code>@babel/polyfill</code>ã€<code>@babel/preset-env</code>å’Œ<code>@babel/runtime-corejs2</code>å¼•å…¥æ¥è¿›è¡Œæ–°apiçš„å…¼å®¹å¤„ç†ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„æ¨¡å—ï¼š</p><p><code>library</code>ï¼šä¸æ±¡æŸ“å…¨å±€çš„runtimeæ¨¡å—ï¼Œä¾›<code>@babel/runtime-corejs2</code>å¼•å…¥ï¼›<br><code>modules</code>ï¼šæ±¡æŸ“å…¨å±€çš„polyfillæ¨¡å—ï¼Œä¾›<code>@babel/polyfillå’Œ@babel/preset-env</code>å¼•å…¥ã€‚</p><p><strong>ä¸æ±¡æŸ“å…¨å±€çš„runtimeæ¨¡å—ä¸»è¦æ˜¯é‡‡ç”¨æ¨¡æ‹Ÿæ›¿æ¢apiçš„æ–¹å¼è§£å†³å…¼å®¹æ€§é—®é¢˜ï¼›æ±¡æŸ“å…¨å±€çš„polyfillæ¨¡å—ä¸»è¦æ˜¯é‡‡ç”¨åœ¨å…¨å±€å’Œå®ä¾‹ä¸Šæ·»åŠ apiçš„æ–¹å¼è§£å†³å…¼å®¹æ€§é—®é¢˜ã€‚</strong></p><h4 id="1-2-core-js-3"><a href="#1-2-core-js-3" class="headerlink" title="1.2 core-js@3"></a>1.2 core-js@3</h4><p><code>core-js@3</code>æ”¾å¼ƒäº†å¯¹<code>@babel/polyfill</code>çš„æ”¯æŒï¼Œè¢«<code>@babel/preset-env</code>å’Œ<code>@babel/runtime-corejs3</code>å¼•å…¥æ¥è¿›è¡Œæ–°apiçš„å…¼å®¹å¤„ç†ã€‚</p><p>ç”±äº<code>core-js@2</code>åŒ…çš„ä½“ç§¯å¤ªå¤§ï¼ˆçº¦2Mï¼‰ï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šé‡å¤çš„æ–‡ä»¶è¢«å¼•ç”¨ã€‚æ‰€ä»¥ï¼Œ<code>core-js@3</code>å¯¹åŒ…è¿›è¡Œæ‹†åˆ†ï¼Œå…¶ä¸­ä¸¤ä¸ªæ ¸å¿ƒçš„åŒ…åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>core-js</code>ï¼šæ±¡æŸ“å…¨å±€çš„polyfillåŒ…ï¼Œä¾›<code>@babel/preset-env</code>å¼•å…¥ï¼Œç­‰ä»·äº<code>core-js@2/modules</code>ï¼ˆçº¦500k, 40k minified and gzippedï¼‰ï¼›</li><li><code>core-js-pure</code>ï¼šä¸æ±¡æŸ“å…¨å±€çš„runtimeåŒ…ï¼Œä¾›<code>@babel/runtime-corejs3</code>å¼•å…¥ï¼Œç­‰ä»·äº<code>core-js@2/library</code>ï¼ˆçº¦440kï¼‰ã€‚</li></ul><p><code>core-js@2</code>åˆ†æ”¯å·²ç»å†»ç»“ï¼Œä¸ä¼šå†æ·»åŠ æ–°ç‰¹æ€§ï¼Œæ–°ç‰¹æ€§éƒ½ä¼šæ·»åŠ åˆ°<code>core-js@3</code>ã€‚ä¾‹å¦‚ä½ ä½¿ç”¨äº† Array.prototype.flat()ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯<code>core-js@2</code>ï¼Œé‚£ä¹ˆå…¶ä¸åŒ…å«æ­¤æ–°ç‰¹æ€§ã€‚ä½†æ˜¯ä½ ä»ç„¶å¯ä»¥åœ¨<code>core-js@3</code>çš„åŸºç¡€ä¸Šä½¿ç”¨<code>core-js@2</code>çš„åŠŸèƒ½ã€‚ä¸ºäº†å¯ä»¥ä½¿ç”¨æ›´å¤šçš„æ–°ç‰¹æ€§ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨<code>core-js@3</code>ã€‚</p><p><em>å…³äºcore-jsçš„å†…å®¹å¤§å®¶å…ˆäº†è§£è¿™ä¹ˆå¤šï¼Œå…ˆæœ‰ä¸ªå°è±¡ï¼Œå¤§å®¶åªéœ€è¦è®°ä½ä¸€ç‚¹: <code>corejs</code>æ‰æ˜¯apiå…¼å®¹å®ç°çš„æä¾›è€…â—â—</em></p><h3 id="2-babel-x2F-preset-env"><a href="#2-babel-x2F-preset-env" class="headerlink" title="2.@babel&#x2F;preset-env"></a>2.@babel&#x2F;preset-env</h3><p>babelè‡ª6.0èµ·ï¼Œå°±ä¸å†å¯¹ä»£ç è¿›è¡Œtransformï¼Œç°åœ¨åªè´Ÿè´£parseå’Œgenerateè¿‡ç¨‹ï¼Œä»£ç çš„transformè¿‡ç¨‹å…¨éƒ½äº¤ç»™ä¸€ä¸ªä¸ªpluginå»åšã€‚æ‰€ä»¥åœ¨æ²¡æœ‰é…ç½®ä»»ä½•pluginçš„æƒ…å†µä¸‹ï¼Œç»è¿‡babelè¾“å‡ºçš„ä»£ç æ˜¯æ²¡æœ‰æ”¹å˜çš„ã€‚</p><p>æœ‰çš„ç¯å¢ƒä¸‹å¯èƒ½éœ€è¦è½¬æ¢å‡ åç§ä¸åŒè¯­æ³•çš„ä»£ç ï¼Œåˆ™éœ€è¦é…ç½®å‡ åä¸ªpluginï¼Œè¿™æ˜¾ç„¶ä¼šéå¸¸ç¹çã€‚æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œbabelæä¾›äº†é¢„è®¾æ’ä»¶æœºåˆ¶presetï¼Œpresetä¸­å¯ä»¥é¢„è®¾ç½®ä¸€ç»„æ’ä»¶æ¥ä¾¿æ·çš„ä½¿ç”¨è¿™äº›æ’ä»¶æ‰€æä¾›çš„åŠŸèƒ½ã€‚ç›®å‰ï¼Œbabelå®˜æ–¹æ¨èä½¿ç”¨<code>@babel/preset-env</code>é¢„è®¾æ’ä»¶ã€‚</p><p><code>@babel/preset-env</code>ä¸»è¦çš„ä½œç”¨æ˜¯ç”¨æ¥è½¬æ¢é‚£äº›å·²ç»è¢«æ­£å¼çº³å…¥TC39ä¸­çš„è¯­æ³•ã€‚æ‰€ä»¥å®ƒæ— æ³•å¯¹é‚£äº›è¿˜åœ¨ææ¡ˆä¸­çš„è¯­æ³•è¿›è¡Œå¤„ç†ï¼Œå¯¹äºå¤„åœ¨stageä¸­çš„è¯­æ³•ï¼Œéœ€è¦å®‰è£…å¯¹åº”çš„pluginè¿›è¡Œå¤„ç†ã€‚</p><pre><code>&#123;  &quot;presets&quot;: [    [&quot;@babel/preset-env&quot;]  ]&#125;</code></pre><p>é™¤äº†è¯­æ³•è½¬æ¢ï¼Œ<code>@babel/preset-env</code>å¦ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½æ˜¯å¯¹apiçš„å¤„ç†ï¼Œä¹Ÿå°±æ˜¯åœ¨ä»£ç ä¸­å¼•å…¥polyfillã€‚ä½†æ˜¯ï¼Œ<code>@babel/preset-env</code>é»˜è®¤æ˜¯ä¸å¼€å¯å¤„ç†apiçš„åŠŸèƒ½ï¼Œåªæœ‰è®¾ç½®äº†<code>useBuiltIns</code>é€‰é¡¹ï¼ˆä¸ä¸ºfalseï¼‰æ‰ä¼šå¼€å¯ã€‚</p><p><code>@babel/preset-env</code>ä¸»è¦è¿˜æ˜¯ä¾èµ–<code>core-js</code>æ¥å¤„ç†apiçš„å…¼å®¹æ€§ï¼Œåœ¨å‡çº§åˆ°<code>7.4.0</code>ä»¥ä¸Šçš„ç‰ˆæœ¬ä»¥åï¼Œæ—¢æ”¯æŒ<code>core-js@2</code>ï¼Œä¹Ÿæ”¯æŒ<code>core-js@3</code>ï¼Œæ‰€ä»¥å¢åŠ äº†corejsçš„é…ç½®æ¥æ§åˆ¶æ‰€éœ€çš„ç‰ˆæœ¬ã€‚å¦‚æœè®¾ç½®äº†<code>useBuiltIns</code>é€‰é¡¹ï¼ˆä¸ä¸ºfalseï¼‰å°±å¾—è®¾ç½®corejsç‰ˆæœ¬ï¼Œå¦åˆ™babelå°†ä¼šå‘å‡ºè­¦å‘Šã€‚</p><pre><code>&#123;  &quot;presets&quot;: [    [      &quot;@babel/preset-env&quot;,      &#123;        &quot;useBuiltIns&quot;: &quot;usage&quot;, // ä¹Ÿå¯é…ç½®æˆ entryï¼Œé…ç½®ä¸º false åˆ™ä¸éœ€è¦é…ç½® corejs        &quot;corejs&quot;: 3// ä¹Ÿå¯é…ç½®æˆ 2      &#125;    ]  ]&#125;</code></pre><p><code>useBuiltIns</code>æ˜¯babel7çš„æ–°åŠŸèƒ½ï¼Œè¿™ä¸ªé…ç½®æä¾›äº†ä¸‰ä¸ªé€‰é¡¹å‘Šè¯‰babelè¯¥å¦‚ä½•å¼•å…¥polyfillåŒ…ï¼š</p><h4 id="2-1-usage"><a href="#2-1-usage" class="headerlink" title="2.1 usage"></a>2.1 usage</h4><p>ä»£ç ä¸­ä¸ç”¨ä¸»åŠ¨importï¼Œbabelä¼šè‡ªåŠ¨å°†ä»£ç é‡Œå·²ä½¿ç”¨åˆ°çš„ä¸”browserslistç¯å¢ƒä¸æ”¯æŒçš„polyfillå¯¼å…¥ã€‚<br><em>å½“ç„¶å¦‚æœæ‚¨éœ€è¦è‡ªå·±è¯•ä¸€è¯•ç¼–è¯‘ç»“æœçš„è¯ï¼Œå¯ä»¥åˆ°babelå®˜ç½‘ä¸Šçš„åœ¨çº¿å·¥å…·è¯•ä¸€è¯• <a href="https://www.babeljs.cn/repl">https://www.babeljs.cn/repl</a></em></p><p><strong>ç¼–è¯‘å‰ï¼š</strong></p><pre><code class="js">const result = [1, 2, 3, 4, 5].copyWithin(0, 3)const instance = newPromise((resolve, reject) =&gt; &#123;  resolve(123)&#125;)</code></pre><p><strong>ç¼–è¯‘åï¼š</strong></p><pre><code class="js">&quot;use strict&quot;;require(&quot;core-js/modules/es.array.copy-within.js&quot;);require(&quot;core-js/modules/es.object.to-string.js&quot;);require(&quot;core-js/modules/es.promise.js&quot;);var result = [1, 2, 3, 4, 5].copyWithin(0, 3);var instance = newPromise(function (resolve, reject) &#123;  resolve(123);&#125;);</code></pre><h4 id="2-2-entry"><a href="#2-2-entry" class="headerlink" title="2.2 entry"></a>2.2 entry</h4><p>éœ€è¦åœ¨ä»£ç è¿è¡Œä¹‹å‰å¯¼å…¥ï¼Œä¼šå°†browserslistç¯å¢ƒä¸æ”¯æŒçš„æ‰€æœ‰polyfilléƒ½å¯¼å…¥ã€‚</p><p><strong>ç¼–è¯‘å‰ï¼š</strong></p><pre><code class="js">import&quot;core-js/stable&quot;;import&quot;regenerator-runtime/runtime&quot;;const result = [1, 2, 3, 4, 5].copyWithin(0, 3)const instance = newPromise((resolve, reject) =&gt; &#123;  resolve(123)&#125;)</code></pre><p><strong>ç¼–è¯‘åï¼š</strong></p><pre><code class="js">&quot;use strict&quot;;require(&quot;core-js/modules/es.symbol.js&quot;);// ... æ­¤å¤„çœç•¥400+è¡Œä»£ç require(&quot;regenerator-runtime/runtime&quot;);var result = [1, 2, 3, 4, 5].copyWithin(0, 3);var instance = newPromise(function (resolve, reject) &#123;  resolve(123);&#125;);</code></pre><h4 id="2-3-false"><a href="#2-3-false" class="headerlink" title="2.3 false"></a>2.3 false</h4><p>åªåšäº†è¯­æ³•è½¬æ¢ï¼Œä¸ä¼šå¯¼å…¥ä»»ä½•polyfillè¿›æ¥ï¼Œå¹¶ä¸”corejsé…ç½®å°†æ— æ•ˆã€‚</p><p><strong>ç¼–è¯‘å‰ï¼š</strong></p><pre><code class="js">const result = [1, 2, 3, 4, 5].copyWithin(0, 3)const instance = newPromise((resolve, reject) =&gt; &#123;    resolve(123)&#125;)const shen = result?.a</code></pre><p><strong>ç¼–è¯‘åï¼š</strong></p><pre><code class="js">&quot;use strict&quot;;var result = [1, 2, 3, 4, 5].copyWithin(0, 3);var instance = newPromise(function (resolve, reject) &#123;  resolve(123);&#125;);var shen = result === null || result === void0 ? void0 : result.a;</code></pre><h3 id="3-babel-x2F-polyfill"><a href="#3-babel-x2F-polyfill" class="headerlink" title="3.@babel&#x2F;polyfill"></a>3.@babel&#x2F;polyfill</h3><p><code>@babel/polyfill</code>æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶åŒ…ï¼Œä¸»è¦æ˜¯é€šè¿‡æ ¸å¿ƒä¾èµ–<code>core-js@2</code>æ¥å®Œæˆå¯¹åº”æµè§ˆå™¨ä¸æ”¯æŒçš„æ–°çš„å…¨å±€å’Œå®ä¾‹apiçš„æ·»åŠ ã€‚åœ¨å‡çº§åˆ°<code>core-js@3</code>åï¼Œå¦‚æœè¿˜è¦ä¿ç•™<code>@babel/polyfill</code>çš„ä½¿ç”¨ï¼Œå°±è¦åœ¨<code>@babel/polyfill</code>ä¸­æ·»åŠ <code>core-js@2</code>å’Œ<code>core-js@3</code>åˆ‡æ¢çš„é€‰é¡¹ï¼Œè¿™æ ·<code>@babel/polyfill</code>ä¸­å°†åŒ…å«<code>core-js@2</code>å’Œ<code>core-js@3</code>ä¸¤ä¸ªåŒ…ï¼Œå‡ºäºè¿™ä¸ªåŸå› å®˜æ–¹å†³å®šå¼ƒç”¨<code>@babel/polyfill</code>ã€‚</p><p>å…³äº<code>@babel/polyfill</code>æœ‰ä¸‰ç‚¹è¦è¯´æ˜ï¼š<br>å¦‚æœé‡‡ç”¨<code>@babel/preset-env</code>çš„polyfillæ–¹æ¡ˆæ˜¯ä¸éœ€è¦<code>@babel/polyfill</code>çš„å®‰è£…ä¸ºå‰æï¼Œåªéœ€è¦å®‰è£…<code>core-js</code>ï¼ˆregenerator-runtimeä¼šåœ¨å®‰è£…<code>@babel/preset-env</code>çš„æ—¶å€™è‡ªåŠ¨å®‰è£…ï¼‰ï¼Œç„¶åé€šè¿‡è®¾ç½®<code>useBuiltIns</code>é€‰é¡¹æ¥å¼€å¯å¯¹apiçš„å…¼å®¹æ€§å¤„ç†ã€‚</p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä¾èµ–<code>@babel/preset-env</code>æä¾›çš„å¤„ç†apiå…¼å®¹æ€§çš„èƒ½åŠ›ï¼Œç›´æ¥ä½¿ç”¨<code>@babel/polyfill</code>æ¥å¤„ç†ã€‚å¦‚æœä½¿ç”¨äº†<code>core-js@3</code>ï¼Œåˆ™éœ€è¦åšå¦‚ä¸‹çš„æ›¿æ¢å·¥ä½œï¼š</p><pre><code class="js">// beforeimport&quot;@babel/polyfill&quot;;// afterimport&quot;core-js/stable&quot;;import&quot;regenerator-runtime/runtime&quot;;</code></pre><p><em>æ³¨ï¼šæ­¤ç¯‡æ–‡ç« æ‘˜è‡ªæ‚¬ç¬”eç»ä¸€æ–‡ï¼š<a href="https://baijiahao.baidu.com/s?id=1709714903451987794&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1709714903451987794&amp;wfr=spider&amp;for=pc</a> æ›´å¤šå†…å®¹å¯ä»è¯¥æ–‡æŸ¥çœ‹</em></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹åŒ– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆæˆ‘çš„APPå–œé˜…å°è¯´</title>
      <link href="/2023/02/23/xiyue-profile/"/>
      <url>/2023/02/23/xiyue-profile/</url>
      
        <content type="html"><![CDATA[<h4 id="è°ˆè°ˆæ¡†æ¶"><a href="#è°ˆè°ˆæ¡†æ¶" class="headerlink" title="è°ˆè°ˆæ¡†æ¶"></a>è°ˆè°ˆæ¡†æ¶</h4><p><em>appé‡‡ç”¨çº¯å‰ç«¯æ¶æ„ï¼Œæ— åç«¯æŠ€æœ¯æ”¯æŒï¼ˆå…¨é æŠ“æ•°æ®ï¼‰ï¼Œä½¿ç”¨vueæ­å»ºç§»åŠ¨ç«¯é¡¹ç›®ï¼Œé€šè¿‡hbuildxæ„å»ºæˆ5+appï¼Œå¹¶æ‰“åŒ…æˆapp</em><br><em>æ•°æ®æ¥æºéƒ½æ˜¯é€šè¿‡å‰ç«¯<code>xhr</code>æ¥çš„ï¼Œ å†åˆ©ç”¨<code>jquery</code>æ‹¿åˆ°æƒ³è¦çš„æ•°æ®ã€‚è€Œä¸”å¤§å®¶ä¼šç–‘æƒ‘xhrä¸ä¼šè·¨åŸŸå—â“ ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè™½ç„¶å¤§å®¶éƒ½çŸ¥é“è·¨åŸŸé—®é¢˜åªåœ¨æµè§ˆå™¨ä¸Šå­˜åœ¨ï¼Œä½†æ˜¯æ‰“åŒ…æˆapp æ¯•ç«Ÿæ˜¯åµŒå¥—åœ¨webviewä¸‹çš„appï¼Œå¦‚æœä¸ç”¨åŸç”Ÿçš„xhrï¼š<code>plus.net.XMLHttpRequest</code>ä¹Ÿæ˜¯æ²¡åŠæ³•è·¨åŸŸè¯·æ±‚å“¦</em></p><p><em>å½“ç„¶è§£å†³è·¨åŸŸè¯·æ±‚é—®é¢˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥äº¤ç»™æœåŠ¡å™¨ç«¯å¤„ç†ï¼Œä½†æ˜¯å› ä¸ºè¿˜æ¶‰åŠåˆ°åç«¯ï¼Œè¿˜è¦ä¹°æœåŠ¡å™¨å•¥çš„ï¼Œç›´æ¥å°±passæ‰è¿™ç§æ–¹æ¡ˆï¼Œå«Œéº»çƒ¦~</em></p><p><em>å¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œä¸‹è½½å®‰è£…ä½¿ç”¨çœ‹çœ‹ğŸ‘‡ğŸ‘‡</em></p><p><a href="https://postimg.cc/VJy2cDXK"><img src="https://i.postimg.cc/bwdPk5rf/app.png" alt="app.png"></a></p><h4 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h4><p><strong>åºŸè¯ä¸å¤šè¯´ç›´æ¥ä¸Šä»£ç , å› ä¸ºæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯ä¸ºäº†è·¨åŸŸè¯·æ±‚æ‰€ä»¥åªé™åœ¨appæ‰èƒ½ä½¿ç”¨</strong></p><pre><code class="js">// request.jsfunction plusReady(callback) &#123;    if (window.plus) &#123;        callback();    &#125; else &#123;        document.addEventListener(&#39;plusready&#39;, callback);    &#125;&#125;function request(options) &#123;    options = options || &#123;&#125;;  //è°ƒç”¨å‡½æ•°æ—¶å¦‚æœoptionsæ²¡æœ‰æŒ‡å®šï¼Œå°±ç»™å®ƒèµ‹å€¼&#123;&#125;,ä¸€ä¸ªç©ºçš„Object    options.type = (options.type || &quot;GET&quot;).toUpperCase();/// è¯·æ±‚æ ¼å¼GETã€POSTï¼Œé»˜è®¤ä¸ºGET    options.contentType = options.contentType || &quot;application/json&quot;;    //å“åº”æ•°æ®æ ¼å¼ï¼Œé»˜è®¤json    options.headers = options.headers || [];    let params = formatParams(options.data);//options.dataè¯·æ±‚çš„æ•°æ®    return new Promise((resolve, reject) =&gt; &#123;        plusReady(function () &#123;            try &#123;                let xhr = new plus.net.XMLHttpRequest();                //å¯åŠ¨å¹¶å‘é€ä¸€ä¸ªè¯·æ±‚                if (options.type == &quot;GET&quot;) &#123;                    xhr.open(&quot;GET&quot;, options.url + &quot;?&quot; + params, true);                    for (let i = 0; i &lt; options.headers.length; i++) &#123;                        xhr.setRequestHeader(options.headers[i][0], options.headers[i][1]);                    &#125;                    xhr.send();                &#125; else if (options.type == &quot;POST&quot;) &#123;                    xhr.open(&quot;post&quot;, options.url, true);                    xhr.setRequestHeader(&quot;Content-type&quot;, options.contentType);                    for (let i = 0; i &lt; options.headers.length; i++) &#123;                        xhr.setRequestHeader(options.headers[i][0], options.headers[i][1]);                    &#125;                    xhr.send(JSON.stringify(options.data));                &#125;                // æ¥æ”¶è¿”å›å‚æ•°                xhr.onreadystatechange = function () &#123;                    if (xhr.readyState == 4) &#123;                        let status = xhr.status;                        if (status &gt;= 200 &amp;&amp; status &lt; 300 || status == 304) &#123;                            let response;                            try &#123;                                response = JSON.parse(xhr.responseText)                            &#125; catch (e) &#123;                                response = xhr.responseText                            &#125;                            resolve(response)                        &#125; else &#123;                            reject(options.url + `Error: $&#123;xhr.statusText&#125; ($&#123;xhr.status&#125;)`)                        &#125;                    &#125;                &#125;                // è®¾ç½®è¶…æ—¶æ—¶é—´                setTimeout(function () &#123;                    if (xhr.readySate != 4) &#123;                        xhr.abort();                        reject(&#39;Request Timeout&#39;);                    &#125;                &#125;, options.timeout || 10000);            &#125; catch (e) &#123;                reject(e)                throw new Error(&#39;åªèƒ½åœ¨APPç¯å¢ƒä¸‹è¯·æ±‚&#39;)            &#125;        &#125;)    &#125;)&#125;function formatParams(data) &#123;    let arr = [];    for (let name in data) &#123;        arr.push(encodeURIComponent(name) + &quot;=&quot; + encodeURIComponent(data[name]));    &#125;    // arr.push((&quot;v=&quot; + Math.random()).replace(&quot;.&quot;, &quot;&quot;));    return arr.join(&quot;&amp;&quot;);&#125;export default request</code></pre><p>ğŸ‘‡è¿™è¾¹çš„ä»£ç æ˜¯ç”¨æ¥ç”Ÿæˆæ–°çš„<code>document</code>çš„ï¼Œä¸ºäº†æ–¹ä¾¿jQueryå·¥ä½œğŸ‘‡</p><pre><code class="js">// docMaker.jsexport default function docMaker(htmlDomStr) &#123;    const doc = document.implementation.createHTMLDocument();    doc.body.innerHTML = htmlDomStr;    return doc;&#125;</code></pre><p>ğŸ‘‡è¿™è¾¹çš„ä»£ç æ˜¯ç±»ä¼¼å°è£…äº†APIæ¥å£ï¼Œè¯·æ±‚æ•°æ®ï¼‹å¤„ç†æ•°æ®&#x3D;æƒ³è¦çš„æ•°æ®ğŸ‘‡</p><pre><code class="js">// ReaderDriver.jsimport $ from &#39;jquery&#39;;import request from &#39;./request&#39;;import docMaker from &#39;./docMaker&#39;;import &#123; Toast &#125; from &#39;vant&#39;;const DOMAIN = &#39;https://www.biquzw.la/&#39;;function URLAfterDeal(url) &#123;    if (/^https?:\/\//.test(url)) &#123;        return url    &#125; else &#123;        return DOMAIN + url    &#125;&#125;class ReaderDriver &#123;    async search(keyword) &#123;        const result = [];        try &#123;            const res = await request(&#123;                url: DOMAIN + &#39;/modules/article/search.php&#39;,                data: &#123;                    searchkey: keyword                &#125;            &#125;);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            $$.find(&#39;.grid tbody &gt; tr&#39;).each(function (i, elem) &#123;                const name = $(elem).find(&#39;td:eq(0)&#39;).text();                const article = $(elem).find(&#39;td:eq(1)&#39;).text();                const author = $(elem).find(&#39;.odd:eq(1)&#39;).text();                const path = $(elem).find(&#39;td:eq(0)&#39;).find(&#39;a&#39;).attr(&#39;href&#39;);                const status = $(elem).find(&#39;td:eq(-1)&#39;).text();                if (name &amp;&amp; author) &#123;                    result.push(                        &#123;                            type: &#39;.biquge&#39;,                            name,                            article,                            author,                            status,                            path                        &#125;                    );                &#125;            &#125;);            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;    // è·å–ä¹¦ç±ä¿¡æ¯ä»¥åŠç« èŠ‚åˆ—è¡¨    async getInfoAndChapter(pathStr) &#123;        const result = &#123;            type: &#39;.biquge&#39;,            name: &#39;&#39;,            kind: &#39;&#39;,            author: &#39;&#39;,            icon: &#39;&#39;,            desc: &#39;&#39;,            chapterList: []        &#125;;        try &#123;            const res = await request(&#123;                url: URLAfterDeal(pathStr)            &#125;);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            // æ•°æ®é‡‡é›†            result.name = $$.find(&#39;#info h1&#39;).text();            result.author = $$.find(&#39;#info p:eq(0)&#39;).text().split(&#39;:&#39;)[1] || &#39;ä½šå&#39;;            result.kind = $$.find(&#39;#info p:eq(1)&#39;).text().split(&#39;:&#39;)[1] || &#39;æœªçŸ¥&#39;;            result.icon = $$.find(&#39;#fmimg img&#39;).attr(&#39;src&#39;);            result.desc = $$.find(&#39;#intro p:eq(0)&#39;).text();            $$.find(&#39;#list dd&#39;).each(function (i, elem) &#123;                const name = $(elem).find(&#39;a&#39;).text();                const path = $(elem).find(&#39;a&#39;).attr(&#39;href&#39;);                result.chapterList.push(                    &#123;                        name,                        path: pathStr + path,                    &#125;                );            &#125;);            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;    // è·å–ä¹¦ç±ç« èŠ‚åˆ—è¡¨    async getChapter(pathStr) &#123;        const result = [];        try &#123;            const res = await request(&#123;                url: URLAfterDeal(pathStr)            &#125;);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            // æ•°æ®é‡‡é›†            $$.find(&#39;#list dd&#39;).each(function (i, elem) &#123;                const name = $(elem).find(&#39;a&#39;).text();                const path = $(elem).find(&#39;a&#39;).attr(&#39;href&#39;);                result.push(                    &#123;                        name,                        path: pathStr + path,                    &#125;                );            &#125;);            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;    // è·å–ç« èŠ‚å†…å®¹    async getContent(pathStr, rootPathStr, countLimit = 100) &#123;        const result = &#123;            title: &#39;&#39;,            content: &#39;&#39;,            totalCount: 0,            pageNo: 0,            totalPage: 0,            list: [],            prev: null,            next: null        &#125;;        try &#123;            const res = await request(&#123;                url: URLAfterDeal(pathStr)            &#125;);            const chapterList = await this.getChapter(rootPathStr);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            let title = $$.find(&#39;.bookname h1&#39;).text();            let findIndex = chapterList.findIndex(d =&gt; d.name == title);            result.title = title;            result.list = chapterList;            result.totalCount = chapterList.length;            result.pageNo = Math.floor(findIndex / countLimit);            result.totalPage = Math.ceil(chapterList.length / countLimit) - 1;            result.content = $$.find(&#39;#content&#39;).html() || &#39;&#39;;            result.prev = chapterList[findIndex - 1] || null;            result.next = chapterList[findIndex + 1] || null;            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;    // è·å–ä¹¦ç±ä¿¡æ¯    async getInfo(pathStr) &#123;        const result = &#123;&#125;;        try &#123;            const res = await request(&#123;                url: URLAfterDeal(pathStr)            &#125;);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            result.icon = $$.find(&#39;#fmimg img&#39;).attr(&#39;src&#39;);            result.desc = $$.find(&#39;#intro p:eq(0)&#39;).text();            // result.name = $$.find(&#39;#info h1&#39;).text();            // result.author = $$.find(&#39;#info p:eq(0)&#39;).text().split(&#39;:&#39;)[1] || &#39;ä½šå&#39;;            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;    // è·å–æ¨èé˜…è¯»    async getRecommend() &#123;        const result = [];        try &#123;            const res = await request(&#123;                url: DOMAIN            &#125;);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            $$.find(&#39;#hotcontent .l .item&#39;).each((i, el) =&gt; &#123;                let imgTag = $(el).find(&#39;.image img&#39;);                let aTag = $(el).find(&#39;.image a&#39;);                let spanTag = $(el).find(&#39;dl dt span&#39;);                let ddTag = $(el).find(&#39;dl dd&#39;);                let icon = imgTag.attr(&#39;src&#39;)                let name = imgTag.attr(&#39;alt&#39;)                let desc = ddTag.text()                let path = aTag.attr(&#39;href&#39;)                let author = spanTag.text() || &#39;ä½šå&#39;                result.push(                    &#123;                        type: &#39;.biquge&#39;,                        icon,                        name,                        path,                        desc,                        author                    &#125;                );            &#125;)            $$.find(&#39;.novelslist .content .top&#39;).each((i, el) =&gt; &#123;                let imgTag = $(el).find(&#39;.image img&#39;);                let aTag = $(el).find(&#39;.image a&#39;);                let dtTag = $(el).find(&#39;dl dt&#39;);                let ddTag = $(el).find(&#39;dl dd&#39;);                let icon = imgTag.attr(&#39;src&#39;)                let name = imgTag.attr(&#39;alt&#39;)                let desc = ddTag.text()                let path = aTag.attr(&#39;href&#39;)                let author = dtTag.text().split(&#39;ï¼š&#39;)[1] || &#39;ä½šå&#39;                result.push(                    &#123;                        type: &#39;.biquge&#39;,                        icon,                        name,                        path,                        desc,                        author                    &#125;                );            &#125;)            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;    // è·å–ä¸æ’è¡Œæ¦œ    async getRank(type, limit = 10, pageNo = 1) &#123;        const result = [];        let pathStr = &#39;&#39;;        switch (type) &#123;            case &#39;week&#39;:                pathStr = &#39;/paihangbang_weekvisit/&#39; + pageNo + &#39;.html&#39;                break;            case &#39;all&#39;:                pathStr = &#39;/paihangbang_allvisit/&#39; + pageNo + &#39;.html&#39;                break;            case &#39;hot&#39;:                pathStr = &#39;/paihangbang_allvote/&#39; + pageNo + &#39;.html&#39;                break;            default:                return result;        &#125;        try &#123;            const res = await request(&#123;                url: DOMAIN + pathStr            &#125;);            let doc = docMaker();            doc.body.innerHTML = res;            let $$ = $(doc);            doc = null;            $$.find(&#39;#main li&#39;).each((i, el) =&gt; &#123;                let s2Atag = $(el).find(&#39;.s2 a&#39;);                let s4tag = $(el).find(&#39;.s4&#39;);                let name = s2Atag.text()                let author = s4tag.text() || &#39;ä½šå&#39;                let path = s2Atag.attr(&#39;href&#39;)                result.push(                    &#123;                        type: &#39;.biquge&#39;,                        path,                        name,                        author,                        icon: &#39;&#39;,                        desc: &#39;&#39;                    &#125;                );            &#125;)            result.splice(limit);            $$ = null;        &#125; catch (error) &#123;            Toast(&#39;æ•°æ®å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&#39;)            console.warn(error);        &#125;        return result;    &#125;&#125;export default new ReaderDriver();</code></pre><h4 id="ä¸€äº›ä¼˜åŒ–"><a href="#ä¸€äº›ä¼˜åŒ–" class="headerlink" title="ä¸€äº›ä¼˜åŒ–"></a>ä¸€äº›ä¼˜åŒ–</h4><p><strong>å› ä¸ºåœ¨è¯¥ç½‘ç«™ä¸Šçš„æ’è¡Œæ¦œæ•°æ®ï¼Œå…¨æ˜¯åªæœ‰æ–‡å­—ï¼Œæ²¡æœ‰å›¾ç‰‡ï¼Œåªèƒ½é€šè¿‡æ‹¿åˆ°å°è¯´è¯¦æƒ…é¡µé“¾æ¥ï¼Œå†è®¿é—®åœ¨æŠ“ä¸€æ¬¡ï¼Œæ‰èƒ½æ‹¿åˆ°å›¾ç‰‡ã€æè¿°çš„ä¿¡æ¯ï¼Œè¿™æ ·å°±æ˜¯ç›¸å½“äºæŠ“åˆ°ä¸€ä¸ªæ•°ç»„çš„æ’è¡Œæ¦œå¯¹è±¡ï¼Œåˆè¦åœ¨æ¬¡éå†è¿™ä¸ªå¯¹è±¡å»æ‹¿åˆ°æ›´å¤šçš„ä¿¡æ¯ï¼Œå¦‚æœè¿™æ ·åšå°±å¾ˆå®¹æ˜“å¯¼è‡´è¯·æ±‚ä¸ç¨³å®šï¼Œå®¹æ˜“å‡ºç°è¶…æ—¶è¯·æ±‚ï¼Œäºæ˜¯æˆ‘æ˜¯è¿™ä¹ˆè§£å†³ä¼˜åŒ–çš„ï¼š</strong><br><em>1.å…ˆæ‹¿åˆ°çº¯æ–‡å­—çš„æ•°æ®ï¼Œæœ‰å•¥å°±å…ˆå±•ç¤ºå•¥ï¼Œå›¾ç‰‡æ²¡æœ‰å°±å…ˆå ä½ç€</em><br><em>2.ç­‰åˆ°åˆ—è¡¨æ•°æ®éƒ½å®Œæ•´äº† å†å»å¼€å§‹æŠ“è¯¦æƒ…é¡µçš„æ•°æ®ï¼Œåœ¨æ¥åˆ†æ‰¹æ›´æ–°å›¾ç‰‡ï¼Œæœ‰ç‚¹æ‡’åŠ è½½çš„å‘³é“</em></p><p>ğŸ‘‡æ¥ä¸‹æ¥ä¸Šä¸‹ä»£ç ğŸ‘‡</p><pre><code class="js">// ReaderDriverå½“ç„¶æ˜¯newå‡ºæ¥çš„export default &#123;  data() &#123;    return &#123;      initLoading: true,      hotList: [], // çƒ­é—¨      allRankList: [], // æ€»æ¦œ      weekRankList: [], // å‘¨æ¦œ      recommendList: [], // æ¨èé˜…è¯»    &#125;  &#125;,  created() &#123;    // è¿™é‡Œè¿˜éœ€è¦å¤„ç†allå…¶ä¸­å¦‚æœæœ‰å¤±è´¥çš„é—®é¢˜    // é€šè¿‡å¤„ç†ä¸‹promiseæ•°ç»„æ¥è§£å†³ï¼Œcatchï¼šrej =&gt; []çš„åŸå› æ˜¯åˆ—è¡¨éƒ½æ˜¯æ•°ç»„æ ¼å¼çš„æ•°æ®    /**     *  let transferedPromise = (reqList) =&gt; &#123;            return reqList.map(item =&gt; &#123;                return item.then(res =&gt; res).catch(rej =&gt; [])            &#125;)        &#125;     *      */       Promise.all([      ReaderDriver.getRecommend(),      ReaderDriver.getRank(&#39;hot&#39;),      ReaderDriver.getRank(&#39;week&#39;),      ReaderDriver.getRank(&#39;all&#39;),    ]).then(([      res1,      res2,      res3,      res4,    ]) =&gt; &#123;      this.recommendList = Object.freeze(res1);      this.hotList = res2;      this.weekRankList = res3;      this.allRankList = res4;      this.initLoading = false;      // åˆ†ç»„æ¸²æŸ“        this.fetchImg([this.hotList, this.weekRankList, this.allRankList])    &#125;)  &#125;,  methods: &#123;    fetchImg(array = []) &#123;      if (array.length == 0) &#123;        return      &#125;      const doFn = (item) =&gt; &#123;        item.forEach(d =&gt; &#123;          ReaderDriver.getInfo(d.path).then(res =&gt; &#123;            d.icon = res.icon; // å›¾ç‰‡èµ„æº            d.desc = res.desc; // æè¿°æ–‡å­—          &#125;)        &#125;);        this.fetchImg(array);      &#125;      requestAnimationFrame(() =&gt; doFn(array.shift()));    &#125;  &#125;,&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººé¡¹ç›® </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>axiosä¸­æ–­è¯·æ±‚</title>
      <link href="/2023/02/13/axios-axiosAbort/"/>
      <url>/2023/02/13/axios-axiosAbort/</url>
      
        <content type="html"><![CDATA[<h3 id="axiosä¸­æ–­è¯·æ±‚"><a href="#axiosä¸­æ–­è¯·æ±‚" class="headerlink" title="axiosä¸­æ–­è¯·æ±‚"></a>axiosä¸­æ–­è¯·æ±‚</h3><h4 id="AbortController"><a href="#AbortController" class="headerlink" title="AbortController"></a>AbortController</h4><p>ä»<code>v0.22.0</code>å¼€å§‹ï¼ŒAxiosæ”¯æŒAbortControllerä»¥Fetchæ¥å£çš„æ–¹å¼å–æ¶ˆè¯·æ±‚ï¼š</p><pre><code class="js">    const controller = new AbortController();     axios.get(&#39;/foo/bar&#39;, &#123;        signal: controller.signal// signal æš—ç¤ºï¼›ä¿¡å·    &#125;).then(res =&gt; &#123;        // todo...    &#125;);    // å–æ¶ˆè¯·æ±‚    controller.abort()</code></pre><h4 id="CancelToken"><a href="#CancelToken" class="headerlink" title="CancelToken"></a>CancelToken</h4><p><em>æ­¤APIè‡ªv0.22.0èµ·å·²å¼ƒç”¨ï¼Œä¸åº”åœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨</em></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;button class=&quot;btn btn-primary&quot;&gt;GET&lt;/button&gt;    &lt;button class=&quot;btn btn-danger&quot;&gt;å–æ¶ˆè¯·æ±‚&lt;/button&gt;    &lt;script&gt;        btn = document.querySelectorAll(&quot;button&quot;)        const CancelToken = axios.CancelToken;        const source = CancelToken.source();                btn[0].onclick = function () &#123;            axios.get(&#39;http://localhost:3000/posts/&#39;, &#123;                cancelToken: source.token            &#125;).then(                res =&gt; console.log(res)            ).catch(                function (thrown) &#123;                    if (axios.isCancel(thrown)) &#123;                        console.log(&#39;Request canceled&#39;, thrown.message);                    &#125; else &#123;                        console.log(&quot;###&quot;, thrown)                    &#125;                &#125;)        &#125;                     btn[1].onclick = () =&gt; &#123;            source.cancel(&#39;æ“ä½œå·²è¢«ç”¨æˆ·å–æ¶ˆã€‚&#39;);        // ä¸€æ¬¡æ€§ï¼Œ å–æ¶ˆè¯·æ±‚(Messageå‚æ•°æ˜¯å¯é€‰çš„)        &#125;     &lt;/script&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Axios </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vueå®ç°æ¶ˆæ¯è½»æç¤º</title>
      <link href="/2023/02/13/vue-toastCpn/"/>
      <url>/2023/02/13/vue-toastCpn/</url>
      
        <content type="html"><![CDATA[<h3 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h3><p><strong>ps:</strong> <em>é€šè¿‡æ’ä»¶å¼å®‰è£…ï¼Œå®ç°toastç»„ä»¶ï¼Œç›´æ¥æŒ‚åœ¨å…¨å±€Vueä¸Šï¼Œæ–¹ä¾¿ä½¿ç”¨</em></p><h4 id="Toast-vue"><a href="#Toast-vue" class="headerlink" title="Toast.vue"></a>Toast.vue</h4><pre><code class="vue">&lt;template&gt;  &lt;div class = &quot;toast&quot; v-show=&quot;isShow&quot;&gt;    &lt;div&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  name: &quot;Toast&quot;,  props:&#123;    message:&#123;      type:String,      default:&#39;&#39;    &#125;,    isShow:&#123;      type:Boolean,      default: false    &#125;  &#125;,  methods:&#123;    show(message,time = 1000)&#123;      this.isShow = true;      this.message = message;      console.log(&quot;ä½¿ç”¨çš„æ˜¯é€šè¿‡æ’ä»¶å½¢å¼çš„Toast&quot;);      setTimeout(()=&gt;&#123;         this.isShow = false;         this.message = &#39;&#39;;      &#125;,time)    &#125;  &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;  .toast&#123;    background: rgba(0,0,0,0.5);    font-size: 20px;    border-radius: 10px;    padding: 8px 10px;    color: white;    position: fixed;    transform: translate(-50%,-50%);    top: 50%;    left: 50%;    transition: all 3s;  &#125;&lt;/style&gt;</code></pre><h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><pre><code class="js">import Toast from &quot;./Toast&quot;;export default &#123;    install(Vue)&#123;        //1.åˆ›å»ºç»„ä»¶æ„é€ å™¨        const Construct = Vue.extend(Toast);        //2.ç”¨new çš„æ–¹å¼ç”¨ç»„ä»¶æ„é€ å™¨åˆ›å»ºå‡ºæ¥ç»„ä»¶å¯¹è±¡        const toast = new Construct();        //3.å°†ç»„ä»¶å¯¹è±¡æ‰‹åŠ¨æŒ‚è½½åˆ°æŸä¸€ä¸ªå…ƒç´ ä¸Š        toast.$mount(document.createElement(&#39;div&#39;))        //4.toast.$elå¯¹åº”çš„å°±æ˜¯div        document.body.appendChild(toast.$el)        //5.åœ¨åŸå‹ä¸­åŠ å…¥Toast        Vue.prototype.$toast = toast;    &#125;&#125;</code></pre><h4 id="Useage"><a href="#Useage" class="headerlink" title="Useage"></a>Useage</h4><pre><code class="js">// main.jsimport toast from &quot;./components/toast.vue&quot;  Vue.use(toast);// this.$toast.show(&quot;toastæ¶ˆæ¯&quot;);</code></pre><h3 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h3><h4 id="Message-vue"><a href="#Message-vue" class="headerlink" title="Message.vue"></a>Message.vue</h4><pre><code class="vue">&lt;template&gt;  &lt;div :class=&quot;`yf-message yf-message--$&#123;type&#125;`&quot; v-if=&quot;isShow&quot;&gt;&#123;&#123;content&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;    // import &#123; defineProps &#125; from &#39;vue&#39;     defineProps([&quot;content&quot;, &quot;isShow&quot;, &quot;type&quot;]);&lt;/script&gt;</code></pre><h4 id="index-js-1"><a href="#index-js-1" class="headerlink" title="index.js"></a>index.js</h4><pre><code class="js">import Message from &#39;./message.vue&#39;import &#123; createVNode, render &#125; from &#39;vue&#39;let _timer = null;let _mountNode = null;const Msg = function (&#123; content = &#39;&#39;, type = &#39;info&#39;, duration = 1500 &#125;) &#123;    if (_timer) &#123;        clearTimeout(_timer);        Msg.romove();    &#125;    const message = createVNode(Message, &#123;        content: content,        type: type,        isShow: true    &#125;);    _mountNode = document.createElement(&#39;div&#39;);    render(message, _mountNode);    document.body.appendChild(_mountNode);    // è¯¥å»äº†    _timer = setTimeout(Msg.romove, duration)&#125;Msg.romove = function () &#123;    document.body.removeChild(_mountNode);    _timer = null;&#125;Msg.success = function (content, duration) &#123;    Msg(&#123;        content,        duration,        type: &#39;success&#39;    &#125;)&#125;Msg.error = function (content, duration) &#123;    Msg(&#123;        content,        duration,        type: &#39;error&#39;    &#125;)&#125;export default Msg</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>H5+ç§»åŠ¨ç«¯å¼€å‘å°æ‚</title>
      <link href="/2023/02/10/skill-mobileH5/"/>
      <url>/2023/02/10/skill-mobileH5/</url>
      
        <content type="html"><![CDATA[<p><strong>è®°å½•ä¸€ä¸‹å·¥ä½œä¸­å¼€å‘ç§»åŠ¨ç«¯h5æ—¶ï¼Œç”¨åˆ°çš„ä¸€äº›little skill</strong></p><h4 id="å¾®ä¿¡å®ç°è·³è½¬åˆ°å…¬ä¼—å·å…³æ³¨é¡µ"><a href="#å¾®ä¿¡å®ç°è·³è½¬åˆ°å…¬ä¼—å·å…³æ³¨é¡µ" class="headerlink" title="å¾®ä¿¡å®ç°è·³è½¬åˆ°å…¬ä¼—å·å…³æ³¨é¡µ"></a>å¾®ä¿¡å®ç°è·³è½¬åˆ°å…¬ä¼—å·å…³æ³¨é¡µ</h4><p><em>å¯é€šè¿‡bizå€¼æ¥å®ç°é“¾æ¥è·³è½¬</em><br>è·å–<code>biz</code>å€¼å¯ä»¥é€šè¿‡å…¬ä¼—å·åå°å‘å¸ƒçš„å†å²æ–‡ç« æ‰¾ä¸€ç¯‡å¤åˆ¶å…¶é“¾æ¥ï¼ˆé“¾æ¥ä¸Šå°±æœ‰<code>biz</code>å€¼ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å‘è¿‡æ–‡ç« é‚£å°±å‘ä¸€ç¯‡ï¼ŒåŒæ ·å‰é¢çš„æ“ä½œï¼Œç„¶åé€šè¿‡æ‹¼æ¥é“¾æ¥å®ç°ï¼š</p><pre><code class="js">location.href = `https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=$&#123;ä½ çš„biz&#125;#wechat_redirect`</code></pre><h4 id="å¾®ä¿¡-amp-æ”¯ä»˜å®"><a href="#å¾®ä¿¡-amp-æ”¯ä»˜å®" class="headerlink" title="å¾®ä¿¡&amp;æ”¯ä»˜å®"></a>å¾®ä¿¡&amp;æ”¯ä»˜å®</h4><pre><code class="js">// æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰« location.href = &#39;weixin://scanqrcode&#39;// å¾®ä¿¡å¯æ‹‰èµ·app stroe (âŒå“’å’©äº†ï¼Œè¢«å¾®ä¿¡å…‹åˆ¶äº†)location.href = &#39;https://itunes.apple.com/app/idxxxxxxxx&#39;// æ‰“å¼€æ”¯ä»˜å®æ‰«ä¸€æ‰«location.href = &#39;alipays://platformapi/startapp?saId=10000007&amp;qrcode=https://qr.alipay.com/bax02911brluc2xieoph6001&#39;// æ”¯ä»˜å®æ‰“å¼€æŒ‡å®šé¡µé¢location.href = &#39;alipays://platformapi/startapp?appId=20000067&amp;url=https%3A%2F%2Fwww.baidu.com&#39;// æ›´å¤šå¿«æ·æŒ‡ä»¤åˆé›†ï¼ˆçŸ¥ä¹ï¼‰ï¼š https://zhuanlan.zhihu.com/p/582472115</code></pre><h4 id="è§£å†³Safariæµè§ˆå™¨ä¸èƒ½è‡ªåŠ¨æ’­æ”¾è§†é¢‘"><a href="#è§£å†³Safariæµè§ˆå™¨ä¸èƒ½è‡ªåŠ¨æ’­æ”¾è§†é¢‘" class="headerlink" title="è§£å†³Safariæµè§ˆå™¨ä¸èƒ½è‡ªåŠ¨æ’­æ”¾è§†é¢‘"></a>è§£å†³Safariæµè§ˆå™¨ä¸èƒ½è‡ªåŠ¨æ’­æ”¾è§†é¢‘</h4><p><strong>å¢åŠ mutedã€ playsinlineå±æ€§è§£å†³iosæµè§ˆå™¨ä¸è‡ªåŠ¨æ’­æ”¾è§†é¢‘çš„é—®é¢˜ï¼Œè¿˜éœ€è¦ğŸ”•è§†é¢‘</strong></p><pre><code class="html">    &lt;video id=&quot;video&quot; muted=&quot;muted&quot; playsinline style=&quot;width: 100vw;height: 100vh;background: #000;&quot;    src=&quot;https://mdhw.oss-cn-hangzhou.aliyuncs.com/promotion/openbox.mp4&quot;&gt;&lt;/video&gt;</code></pre><h4 id="åˆ©ç”¨æ–°æµªæ¥å£è·å–ç”¨æˆ·ip"><a href="#åˆ©ç”¨æ–°æµªæ¥å£è·å–ç”¨æˆ·ip" class="headerlink" title="åˆ©ç”¨æ–°æµªæ¥å£è·å–ç”¨æˆ·ip"></a>åˆ©ç”¨æ–°æµªæ¥å£è·å–ç”¨æˆ·ip</h4><pre><code class="html">    &lt;!-- å¼•å…¥æ–°æµªçš„js --&gt;   &lt;script src=&quot;http://pv.sohu.com/cityjson?ie=utf-8&quot;&gt;&lt;/script&gt;   &lt;script&gt;        // ç›´æ¥è·å–IPå’ŒåŸå¸‚å        console.log(returnCitySN[&#39;cip&#39;] + returnCitySN[&#39;cname&#39;]);   &lt;/script&gt;</code></pre><h4 id="vueWEBé¡¹ç›®æ‰“åŒ…æˆapp"><a href="#vueWEBé¡¹ç›®æ‰“åŒ…æˆapp" class="headerlink" title="vueWEBé¡¹ç›®æ‰“åŒ…æˆapp"></a>vueWEBé¡¹ç›®æ‰“åŒ…æˆapp</h4><p><strong>ä½¿ç”¨Hbuildxå·¥å…·æ‰“åŒ…æˆ5+appå³å¯</strong></p><p>1.åœ¨hbuildxé‡Œå…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼ˆ5+appï¼‰<br>2.åœ¨vueé¡¹ç›®ä¸­å…ˆ<code>build</code>ä¸€ä¸‹ï¼Œç”Ÿæˆåˆ°<code>distç›®å½•</code><br>3.å°†<code>distç›®å½•</code>ä¸‹çš„ä»£ç å…¨éƒ½æ‹·è´åˆ°æ–°å»ºçš„5+appç›®å½•ä¸‹ï¼Œç›´æ¥è¦†ç›–å³å¯<br>4.å¯ä»¥ç‚¹å‡»è¿è¡Œåˆ°æµè§ˆå™¨è¿›è¡Œé¢„è§ˆ<br>5.äº‘ç«¯æ‰“åŒ…æˆappéœ€è¦çš„å®‰å“è¯ä¹¦ã€iosè¯ä¹¦è·å–æ–¹å¼è§æ–‡æ¡£</p><h5 id="å®‰å“ç«¯ä¾§è¾¹æ»‘åŠ¨è¿”å›ç›‘å¬"><a href="#å®‰å“ç«¯ä¾§è¾¹æ»‘åŠ¨è¿”å›ç›‘å¬" class="headerlink" title="å®‰å“ç«¯ä¾§è¾¹æ»‘åŠ¨è¿”å›ç›‘å¬"></a>å®‰å“ç«¯ä¾§è¾¹æ»‘åŠ¨è¿”å›ç›‘å¬</h5><p>æŠŠä¸‹é¢ä»£ç ç›´æ¥æ”¾åœ¨<code>public</code>ä¸‹é¢çš„<code>index.html</code>çš„<code>body</code>ä¸‹é¢å³å¯</p><pre><code class="html">    &lt;script&gt;        const webview = plus.webview.currentWebview();        document.addEventListener(&#39;plusready&#39;, () =&gt; &#123;            //ç­‰å¾…plus readyåå†è°ƒç”¨5+ APIï¼š            let first = null;            plus.key.addEventListener(&#39;backbutton&#39;, () =&gt; &#123;                webview.canBack((e) =&gt; &#123;                    if (e.canBack) &#123;                        webview.back();                    &#125; else &#123;                        //é¦–æ¬¡æŒ‰é”®ï¼Œæç¤ºâ€˜å†æ¬¡æ“ä½œé€€å‡ºåº”ç”¨â€™                        if (!first) &#123;                            //è·å–ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ—¶é—´æˆ³                            first = new Date().getTime();                            //é€šè¿‡H5+ API è°ƒç”¨Android ä¸Šçš„toast æç¤ºæ¡†                            plus.nativeUI.toast(&quot;å†æ¬¡æ“ä½œé€€å‡ºåº”ç”¨&quot;, &#123;                                duration: &#39;short&#39;                            &#125;);                            setTimeout(() =&gt; &#123;                                first = null;                            &#125;, 1000);                        &#125; else &#123;                            if (new Date().getTime() - first &lt; 1000) &#123;                                //è·å–ç¬¬äºŒæ¬¡ç‚¹å‡»çš„æ—¶é—´æˆ³, ä¸¤æ¬¡ä¹‹å·® å°äº 1000ms è¯´æ˜1sç‚¹å‡»äº†ä¸¤æ¬¡,                                plus.runtime.quit(); //é€€å‡ºåº”ç”¨                            &#125;                        &#125;                    &#125;                &#125;)            &#125;);        &#125;);    &lt;/script&gt;</code></pre><p><strong>ç”±äºvueé¡¹ç›®æ‰“åŒ…æˆappå…¶å®æœ¬èº«å°±æ˜¯å¥—åœ¨webviewé‡Œé¢è¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸€äº›è·³è½¬é¡µé¢é™¤äº†<code>$router.push</code>è¿˜æœ‰å°±æ˜¯<code>location.href</code>ï¼Œå¦‚æœä¸å…¼å®¹ä¸€ä¸‹APPé‡Œçš„ä¼šå¯¼è‡´é¡µé¢è¿”å›ä¸äº†ï¼Œä¸¾ä¸ªä¾‹å­ï¼šappé‡Œæœ‰ä¸ªå¹¿å‘Šbanner,ç‚¹å‡»è·³è½¬httpé“¾æ¥ï¼Œç»“æœç”¨æˆ·ä¾§æ»‘ä¼šç›´æ¥å¯¼è‡´é€€å‡ºåº”ç”¨ï¼Œå³å…³é—­æ‰äº†webviewï¼Œå› ä¸ºappé¡µé¢æ‰¿è½½æœ¬èº«å°±æ˜¯ä¸€ä¸ªwebviewObject,è·³è½¬åçš„httpé“¾æ¥æ˜¯ç›´æ¥åœ¨è¿™ä¸ªwebviewObjectä¸Šæ˜¾ç¤ºçš„ï¼Œé€šè¿‡ä¸‹é¢ä»£ç å¸®æˆ‘ä»¬å…¼å®¹è·³è½¬http(å¯ä»¥æ§åˆ¶appå†…éƒ¨æ‰“å¼€&#x2F;å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€)</strong></p><pre><code class="js">function toWebLink(url, openType = &#39;outside&#39;) &#123;  try &#123;    if (openType === &#39;inner&#39;) &#123;      let wv = plus.webview.getWebviewById(&#39;webview&#39;);      // plus api åˆ›å»ºå¹¶æ‰“å¼€æ–°çš„webview è¯¦è§ï¼šhttps://www.html5plus.org/doc/zh_cn/webview.html#plus.webview.open      plus.webview.open(        url,        &#39;webview&#39;,        &#123;          titleNView: &#123;            titleSize: &#39;14px&#39;,            buttons: [              &#123;                type: &#39;back&#39;,                float: &#39;left&#39;,                onclick: function () &#123;                  wv.canBack((e) =&gt; &#123;                    if (e.canBack) &#123;                      wv.back();                    &#125; else &#123;                      wv.close();                    &#125;                  &#125;);                &#125;,              &#125;,            ],          &#125;,        &#125;,        &#39;slide-in-right&#39;,        300,        function () &#123;          // console.log(&#39;æ‰“å¼€äº†&#39;, JSON.stringify(plus.webview.all()));        &#125;,      );    &#125; else &#123;      plus.runtime.openURL(url);    &#125;  &#125; catch (e) &#123;    console.log(e);    window.location.href = url;  &#125;&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> æ‚æŠ€ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SVGAåŠ¨ç”»çš„ä½¿ç”¨</title>
      <link href="/2023/01/04/svga-svga/"/>
      <url>/2023/01/04/svga-svga/</url>
      
        <content type="html"><![CDATA[<h3 id="SVGAçš„ç®€å•ä½¿ç”¨"><a href="#SVGAçš„ç®€å•ä½¿ç”¨" class="headerlink" title="SVGAçš„ç®€å•ä½¿ç”¨"></a>SVGAçš„ç®€å•ä½¿ç”¨</h3><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot;        content=&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;    &lt;title&gt;SvgaåŠ¨ç”»&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;first_screen&quot;&gt;        &lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script type=&quot;text/javascript&quot;&gt;    // GitHubï¼š https://github.com/svga/SVGAPlayer-Web    var first_screen = document.querySelector(&#39;.first_screen&#39;);    var canvas = document.getElementById(&#39;canvas&#39;)    canvas.width = window.innerWidth;    canvas.height = window.innerHeight;    var parser = new SVGA.Parser(&#39;#canvas&#39;);    var player = new SVGA.Player(&#39;#canvas&#39;);    player.loops = 1;    player.setContentMode(&#39;AspectFill&#39;)    parser.load(&#39;https://mdhw.oss-cn-hangzhou.aliyuncs.com/promotion/chou.svga&#39;, svga =&gt; &#123;        player.setVideoItem(svga)        player.startAnimation()        player.onFinished(function () &#123;            first_screen.remove()            player.clear()        &#125;)    &#125;)&lt;/script&gt;&lt;/html&gt;</code></pre><h3 id="SVGAçš„åˆ†æ®µæ’­æ”¾"><a href="#SVGAçš„åˆ†æ®µæ’­æ”¾" class="headerlink" title="SVGAçš„åˆ†æ®µæ’­æ”¾"></a>SVGAçš„åˆ†æ®µæ’­æ”¾</h3><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot;        content=&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;&gt;    &lt;title&gt;Demo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;first_screen&quot;&gt;        &lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;        &lt;div id=&quot;svga_btn&quot; style=&quot;width: 120px;height:120px;position: absolute;top: 44%;left: 0;right:0;margin: auto;&quot;&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;/static/js/svga.min.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt;    var first_screen = document.querySelector(&#39;.first_screen&#39;);    var canvas = document.getElementById(&#39;canvas&#39;)    var svga_btn = document.getElementById(&#39;svga_btn&#39;)    var step = 0;    canvas.width = window.innerWidth;    canvas.height = window.innerHeight;    if (sessionStorage.getItem(&#39;cxm_paying&#39;) == &#39;true&#39;) &#123;        first_screen.remove()    &#125; else &#123;        var parser = new SVGA.Parser(&#39;#canvas&#39;);        var player = new SVGA.Player(&#39;#canvas&#39;);        player.setContentMode(&#39;AspectFill&#39;)        parser.load(&#39;https://mdhw.oss-cn-hangzhou.aliyuncs.com/promotion/chou.svga&#39;, svga =&gt; &#123;            player.setVideoItem(svga)            palyFrame(step);            svga_btn.addEventListener(&#39;click&#39;, function () &#123;                step++;                palyFrame(step);                svga_btn.style.display = &#39;none&#39;;            &#125;)            player.onFinished(function () &#123;                svga_btn.style.display = &#39;block&#39;;                player.clear();                if (step === 2) &#123;                    first_screen.remove()                &#125; else &#123;                    palyFrame(0)                &#125;            &#125;)        &#125;)    &#125;    function palyFrame(step) &#123;        switch (step) &#123;            case 0:                player.loops = 0;                player.startAnimationWithRange(&#123; location: 0, length: 120 &#125;);                break;            case 1:                // ç¬¬ä¸€æ¬¡æ’­æ”¾åŠ¨ç”»                player.loops = 1;                player.startAnimationWithRange(&#123; location: 120, length: 100 &#125;);                break;            case 2:                // ç¬¬äºŒæ¬¡æ’­æ”¾åŠ¨ç”»                player.loops = 1;                player.startAnimationWithRange(&#123; location: 340, length: 150 &#125;);                break;            default:                return;        &#125;    &#125;&lt;/script&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Svga </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vueæºç ä¹‹æ•°æ®å“åº”åŸç†</title>
      <link href="/2022/10/26/vue-dataReactive/"/>
      <url>/2022/10/26/vue-dataReactive/</url>
      
        <content type="html"><![CDATA[<h3 id="Vueæºç ä¹‹æ•°æ®å“åº”åŸç†"><a href="#Vueæºç ä¹‹æ•°æ®å“åº”åŸç†" class="headerlink" title="Vueæºç ä¹‹æ•°æ®å“åº”åŸç†"></a>Vueæºç ä¹‹æ•°æ®å“åº”åŸç†</h3><p><strong>ps:</strong> <em>ç®€å•äº†è§£ä¸€ä¸‹vueæ•°æ®å“åº”çš„åŸç†ï¼Œvue2é€šè¿‡es5çš„<code>defineProperty</code>æ¥åŠ«æŒæ•°æ®ï¼Œæ‰€ä»¥ä¸å…¼å®¹ie8åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œvue3é€šè¿‡<code>Proxy</code>æ¥è¿›è¡Œæ•°æ®åŠ«æŒâ€¦</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">// ç›‘å¬æ•°æ®function observe(value) &#123;    if (typeof value != &#39;object&#39;) &#123;        return    &#125;    let ob;    if (value.__ob__ !== undefined) &#123;        ob = value.__ob__;    &#125; else &#123;        ob = new Observer(value);    &#125;    return ob;&#125;// æ•°æ®åŠ«æŒfunction defineReactive(data, key, val) &#123;    if (arguments.length == 2) &#123;        val = data[key];    &#125;    // é€’å½’ç›‘å¬å­æ•°æ®    observe(val)    //  ä¹Ÿå¯ä½¿ç”¨proxy reflectæ–¹å¼æ¥åŠ«æŒ ä¼šæ›´ä¸ºä¾¿æ·    Object.defineProperty(data, key, &#123;        get() &#123;            return val;        &#125;,        set(newVal) &#123;            console.log(&#39;è§¦å‘è§†å›¾æ›´æ–°--ä¿®æ”¹äº†å±æ€§:&#39; + key + &#39;;&#39;)            val = newVal;            observe(newVal);        &#125;    &#125;)&#125;// æ•°æ®è§‚å¯Ÿå™¨class Observer &#123;    constructor(val) &#123;        Object.defineProperty(val, &#39;__ob__&#39;, &#123;            value: this,            enumerable: false        &#125;);        // éå†        this.walk(val)    &#125;    walk(val)&#123;        if (Array.isArray(val)) &#123;            val.__proto__ = ArrayMethod.prototype;            this.observeArray(val)        &#125; else &#123;            this.observeObj(val);        &#125;    &#125;    observeObj(val) &#123;        for (let k in val) &#123;            defineReactive(val, k)        &#125;    &#125;    observeArray(val) &#123;        for (let key in val) &#123;            observe(val[key])        &#125;    &#125;&#125;// æ”¹å†™æ•°ç»„æ–¹æ³•ï¼Œ è¿™è¾¹åªæ”¹å†™äº†ä¸€ä¸ªpushfunction ArrayMethod() &#123; &#125;ArrayMethod.prototype.push = function (...args) &#123;    console.log(&#39;è§¦å‘è§†å›¾æ›´æ–°--æ”¹å˜äº†æ•°ç»„&#39;)    const res = Array.prototype.push.apply(this, args)    // æ–°å¢çš„æ•°æ®è¿™äº›ä¹Ÿéœ€è¦å»è§‚å¯Ÿ    this.__ob__.observeArray(args);    return res&#125;// æ¨¡æ‹Ÿvue $setfunction $set(data, key, val)&#123;   // å…ˆå»å¸®ä»–è®¾å€¼   data[key] = val   // é‡æ–°éå†ä¸€ä¸‹   data.__ob__.walk()   // è§¦å‘è§†å›¾æ›´æ–°   console.log(&#39;è§¦å‘è§†å›¾æ›´æ–°&#39;, data)&#125;// æµ‹è¯•var obj = &#123;    a: 1,    b: &#123;        c: [1, 2, 3]    &#125;&#125;observe(obj)obj.b.c.push(4, &#123; a: 1 &#125;) // print =&gt; &quot;è§¦å‘è§†å›¾æ›´æ–°--æ”¹å˜äº†æ•°ç»„&quot;obj.b.c[0] = 0 // ä¸ä¼šè§¦å‘æ›´æ–°è§†å›¾obj.b.c[4].a = 2 // print =&gt; &quot;è§¦å‘è§†å›¾æ›´æ–°--ä¿®æ”¹äº†å±æ€§:a;&quot;obj.c = 33 // ä¸ä¼šè§¦å‘æ›´æ–°è§†å›¾$set(obj, &#39;c&#39;, 33) // ä¼šè§¦å‘æ›´æ–°è§†å›¾,ç»è¿‡è¿™éƒ¨åï¼Œåé¢éƒ½å¯ä»¥é€šè¿‡xxx.å±æ€§ = èµ‹å€¼obj.c = 44 // print =&gt; &quot;è§¦å‘è§†å›¾æ›´æ–°--ä¿®æ”¹äº†å±æ€§:c;&quot;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javascripté˜²æ‰’</title>
      <link href="/2022/10/25/js-fangba/"/>
      <url>/2022/10/25/js-fangba/</url>
      
        <content type="html"><![CDATA[<h3 id="Javascripté˜²æ‰’"><a href="#Javascripté˜²æ‰’" class="headerlink" title="Javascripté˜²æ‰’"></a>Javascripté˜²æ‰’</h3><p><strong>ps:</strong> <em>ä¸ºäº†é˜²æ­¢ä»–äººä¹±æ‰’ä½ çš„ä»£ç ï¼Œæˆ–è€…åˆ†æä½ çš„æ¥å£ï¼Œæ‰€ä»¥åˆ©ç”¨æ‰“å¼€å¼€å‘å·¥å…·å°±ä¼šè§¦å‘<code>debugger</code>çš„ç‰¹æ€§ï¼Œæ¥é˜²æ‰’</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">((function() &#123;    var callbacks = [],        timeLimit = 50,        open = false;    setInterval(loop, 1);    return &#123;        addListener: function(fn) &#123;            callbacks.push(fn);        &#125;,        cancleListenr: function(fn) &#123;            callbacks = callbacks.filter(function(v) &#123;                return v !== fn;            &#125;);        &#125;    &#125;    function loop() &#123;        var startTime = new Date();        debugger;        if (new Date() - startTime &gt; timeLimit) &#123;            if (!open) &#123;                callbacks.forEach(function(fn) &#123;                    fn.call(null);                &#125;);            &#125;            open = true;            window.stop();            alert(&#39;ä¸è¦æ‰’æˆ‘äº†&#39;);            window.location.reload();        &#125; else &#123;            open = false;        &#125;    &#125;&#125;)()).addListener(function() &#123;    window.location.reload();&#125;);</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BOMï¼šhistoryçš„é‚£äº›äº‹</title>
      <link href="/2022/10/20/bom-router/"/>
      <url>/2022/10/20/bom-router/</url>
      
        <content type="html"><![CDATA[<h3 id="BOMï¼šhistoryçš„é‚£äº›äº‹"><a href="#BOMï¼šhistoryçš„é‚£äº›äº‹" class="headerlink" title="BOMï¼šhistoryçš„é‚£äº›äº‹"></a>BOMï¼šhistoryçš„é‚£äº›äº‹</h3><h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>ç°åœ¨å‰ç«¯æ¡†æ¶éƒ½æœ‰è·¯ç”±ç»„ä»¶ï¼Œè·¯ç”±åŒ…æ‹¬2ç§æ¨¡å¼ï¼š<code>hash</code>ã€<code>history</code></p><p>è€Œå‰ç«¯è·¯ç”±å®ç°çš„åŸç†å¥½åƒå’ŒBomå¯¹è±¡é‡Œçš„<strong>history</strong>æœ‰ç‚¹è”ç³»â€¦</p><p>Emmâ€¦çæä¸€ä¸‹â€¦</p><h4 id="ä¸€ã€Hashæ¨¡å¼"><a href="#ä¸€ã€Hashæ¨¡å¼" class="headerlink" title="ä¸€ã€Hashæ¨¡å¼"></a>ä¸€ã€Hashæ¨¡å¼</h4><p>hashæ¨¡å¼ä¸‹ï¼Œé€šè¿‡<code>location</code>æ¥è·³è½¬ï¼Œæ‰ä¼šè§¦å‘<code>hashchange</code>ç›‘å¬äº‹ä»¶ï¼Œ å†é€šè¿‡<code>lcoation.hash</code>ä¸åŒçš„<em>hashå€¼</em>æ¥å†³å®šæ¸²æŸ“çš„ç»„ä»¶, è·¯ç”±çš„<em>hashæ¨¡å¼</em>å…¶å·¥ä½œæ–¹å¼ç±»ä¼¼</p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;hashæ¨¡å¼&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;button onclick=&quot;turn(&#39;/#/abc&#39;)&quot;&gt;è·³è½¬åˆ°ï¼š/#/abc&lt;/button&gt;    &lt;div id=&quot;view&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;script&gt;    function turn(url) &#123;                let state = &#123;            a: 1,            b: 2        &#125;        // hashæ¨¡å¼ä¸‹ï¼Œé€šè¿‡locaitonæ¥è·³è½¬        location.href = url;        // history.pushState(state, &#39;/abc&#39;, url) // è¯¥æ–¹å¼ä¸ä¼šè§¦å‘hashchange    &#125;    // ç›‘å¬urlçš„hashå˜åŒ–    window.addEventListener(&#39;hashchange&#39;, function (e) &#123;        console.log(&#39;æ—§é“¾æ¥ï¼š&#39; + e.oldURL)        console.log(&#39;æ–°é“¾æ¥ï¼š&#39; + e.newURL)        console.log(location.hash); // =&gt; #/abc        document.getElementById(&#39;view&#39;).innerHtml = `&lt;div&gt;$&#123;location.hash&#125;ç»„ä»¶&lt;/div&gt;`    &#125;)    // pushState replaceStateéƒ½ä¸ä¼šè§¦å‘,ç”¨æˆ·å‰è¿›åé€€æˆ–è€…locationæ–¹å¼æ‰è§¦å‘    window.addEventListener(&#39;popstate&#39;, function (e)&#123;        console.log(e)    &#125;)&lt;/script&gt;&lt;/html&gt;</code></pre><h4 id="äºŒã€Historyæ¨¡å¼"><a href="#äºŒã€Historyæ¨¡å¼" class="headerlink" title="äºŒã€Historyæ¨¡å¼"></a>äºŒã€Historyæ¨¡å¼</h4><p><code>pushState</code>åªä¼šæ”¹å˜url,ä¸æ˜¯çœŸæ­£çš„å»è·³è½¬, ä»¥ä¸‹ä»£ç ä¸­è·³è½¬åˆ° &#x2F;abc ,å¦‚æœä½¿ç”¨<code>location</code>ä¼š404,å› ä¸ºæ²¡æœ‰å¯¹åº”çš„èµ„æº</p><p>ä½†æ˜¯<code>pushState</code>æ²¡æœ‰ç›¸åº”çš„<code>onhistorychange</code>äº‹ä»¶å¯ä»¥ç›‘å¬,é‚£å°±åªèƒ½è‡ªå·±å†™ä¸€ä¸ª<code>push</code>,è¿˜æœ‰<code>historychangeäº‹ä»¶</code></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;historyæ¨¡å¼&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;button onclick=&quot;turn(&#39;/abc&#39;)&quot;&gt;è·³è½¬åˆ°ï¼š/abc&lt;/button&gt;    &lt;div id=&quot;view&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;script&gt;    // å½“ç„¶è·¯ç”±ä¹Ÿä¸æ˜¯è¿™ä¹ˆæ ·å­çš„, å› ä¸ºæ‡’    var router = new Router([        &#123;            name: &#39;abc&#39;,            path: &#39;/abc&#39;,            component: &#39;abcç»„ä»¶(å‡è£…æ˜¯ä¸ªç»„ä»¶)&#39;,        &#125;    ]);    function turn(url) &#123;        router.push(url)    &#125;    function Router(routes) &#123;        this.routes = routes || [];        window.addEventListener(&#39;historychange&#39;, function (e) &#123;            let route = e.detail;            console.log(&#39;æ”¹å˜äº†, æ‹¿åˆ°çš„è·¯ç”±å¯¹è±¡æ˜¯:&#39;, route)            // æ¸²æŸ“è·¯ç”±ç»„ä»¶            document.getElementById(&#39;view&#39;).innerHTML = route.component;        &#125;)    &#125;    Router.prototype.push = function (url) &#123;        // è¿™ä¹ˆä¸ä¸¥è°¨çš„ä»£ç ,åªæ˜¯å› ä¸ºå¤ªæ‡’        const findRoute = this.routes.find(d =&gt; d.path === url);        if (findRoute) &#123;            const ev = new CustomEvent(&#39;historychange&#39;, &#123; detail: findRoute &#125;);            // historyæ¨¡å¼ä¸‹ï¼Œé€šè¿‡pushStateæ¥è·³è½¬            history.pushState(&#123;&#125;, null, url);            // location.href = url; // è¯¥æ–¹å¼ä¸è¡Œï¼Œä¼š404            window.dispatchEvent(ev);        &#125; else &#123;            throw(&#39;è¯¥è·¯ç”±ä¸å­˜åœ¨&#39;)        &#125;    &#125;&lt;/script&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> BOM </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Nodeï¼šçˆ¬å–æŸç½‘å›¾ç‰‡</title>
      <link href="/2022/10/20/node-spider/"/>
      <url>/2022/10/20/node-spider/</url>
      
        <content type="html"><![CDATA[<h3 id="Nodeï¼šçˆ¬å–æŸç½‘å›¾ç‰‡"><a href="#Nodeï¼šçˆ¬å–æŸç½‘å›¾ç‰‡" class="headerlink" title="Nodeï¼šçˆ¬å–æŸç½‘å›¾ç‰‡"></a>Nodeï¼šçˆ¬å–æŸç½‘å›¾ç‰‡</h3><h4 id="ä¸€äº›ä¾èµ–"><a href="#ä¸€äº›ä¾èµ–" class="headerlink" title="ä¸€äº›ä¾èµ–"></a>ä¸€äº›ä¾èµ–</h4><pre><code class="bash"> npm install cheerio download async superagent superagent-charset mkdirp</code></pre><p><code>superagent</code> ajaxè¯·æ±‚åº“</p><p><code>cheerio</code> nodeç‰ˆçš„jqueryï¼Œè·å–domèŠ‚ç‚¹</p><p><code>download</code> ä¸‹è½½æ–‡ä»¶åº“</p><p><code>superagent-charset</code> è®¾ç½®å­—ç¬¦é›†ï¼Œä¸ç„¶è·å–åˆ°çš„htmlDocä¼šæœ‰ä¸­æ–‡ä¹±ç </p><p><code>async</code> mapLimitæ§åˆ¶è¯·æ±‚å¹¶å‘æ•°ï¼Œç¬¬ä¸€ä¸ªå›è°ƒæ˜¯linkArræ¯ä¸ªitemé¡¹éƒ½æ‰§è¡Œçš„å‡½æ•°ï¼Œå¤„ç†å®Œæƒ³è¦çš„æ•°æ®åå¹¶returnï¼Œç¬¬äºŒä¸ªå›è°ƒæ˜¯linkArræ¯é¡¹éƒ½æ‰§è¡Œå®Œåæ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªerrï¼Œå’Œresultsï¼Œresultså°±æ˜¯åŒ…è£¹ç€ç¬¬ä¸€ä¸ªå‡½æ•°returnå€¼çš„æ•°ç»„ï¼ˆæœ‰ç‚¹åƒpromise.allï¼‰</p><p>ç äº‘åœ°å€ï¼š<a href="https://gitee.com/shaoyunfeng793/nodespider">https://gitee.com/shaoyunfeng793/nodespider</a></p><h4 id="çˆ¬å–ç»“æœ"><a href="#çˆ¬å–ç»“æœ" class="headerlink" title="çˆ¬å–ç»“æœ"></a>çˆ¬å–ç»“æœ</h4><p><a href="https://postimg.cc/2V2YCVLy"><img src="https://i.postimg.cc/13Z3cF9G/spider-mulu.png" alt="spider-mulu.png"></a><br><a href="https://postimg.cc/GHsPCs5J"><img src="https://i.postimg.cc/pXssKfQ7/spider-imgs.png" alt="spider-imgs.png"></a></p><h4 id="Nodejs-Code"><a href="#Nodejs-Code" class="headerlink" title="Nodejs Code"></a>Nodejs Code</h4><pre><code class="js">const request = require(&#39;superagent&#39;)require(&#39;superagent-charset&#39;)(request)const cheerio = require(&#39;cheerio&#39;)const download = require(&#39;download&#39;)const mkdirp = require(&#39;mkdirp&#39;)const async = require(&#39;async&#39;)const URL = require(&quot;url&quot;)// ä¿å­˜åœ°å€var savePath = &#39;./img/&#39;;// åŒ¹é…URLvar UrlReg = new RegExp(/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&amp;?[a-zA-Z0-9_-](\?)?)*)*$/i);// linkæ”¶é›†å™¨var globalLinkQueue = [];// çˆ¬å–æ¬¡æ•°var spiderCount = 0;// çˆ¬å–æ¬¡æ•°é™åˆ¶var spiderCountLimit = 2;spider(&#39;https://www.tupianzj.com/meinv/xiezhen/&#39;)// æ ¡éªŒæ˜¯å¦æ˜¯åˆæ³•çš„hreffunction isValidHref(href) &#123;    return /\S+\.html/.test(href)&#125;// æ£€ç´¢aæ ‡ç­¾çš„hreffunction fetchLinks(&#123; $, selector, linksAry, title, link &#125;) &#123;    let aTags = $(selector), $aTag, aHref, aTitle;    let &#123; domain, hrefPrev &#125; = getHrefInfo(link)    for (let i = 0; i &lt; aTags.length; i++) &#123;        $aTag = $(aTags[i]);        aHref = $aTag.attr(&#39;href&#39;);        aTitle = title || $aTag.attr(&#39;title&#39;);        if (String(aHref).startsWith(&#39;/&#39;)) &#123;            aHref = domain + aHref        &#125; else &#123;            aHref = hrefPrev + aHref        &#125;        // è¿‡æ»¤ï¼šé‡å¤é“¾æ¥        if (!isValidHref(aHref) || linksAry.some(d =&gt; d.href == aHref)) &#123;            continue;        &#125;        linksAry.push(&#123;            title: aTitle,            href: aHref        &#125;)    &#125;&#125;// è·å–å½“å‰é“¾æ¥çš„åŸŸåä¿¡æ¯å’Œæ‹¼æ¥å‰ç¼€function getHrefInfo(href) &#123;    let &#123; protocol, hostname &#125; = URL.parse(href);    let domain = protocol + &#39;//&#39; + hostname;    return &#123;        hrefPrev: href.split(&#39;/&#39;).slice(0, -1).join(&#39;/&#39;) + &#39;/&#39;,        domain: domain    &#125;&#125;// è¯·æ±‚urlfunction req(url) &#123;    return new Promise((rev, rej) =&gt; &#123;        request(&#39;GET&#39;, url)            .charset(&#39;gbk&#39;)            .buffer(true)            .set(&#39;Cookie&#39;, &#39;t=cdd3345174aba64147a802b43a0999e6; r=8221; Hm_lvt_f5329ae3e00629a7bb8ad78d0efb7273=1667359683,1667462127,1667525488; Hm_lpvt_f5329ae3e00629a7bb8ad78d0efb7273=1667538578&#39;)            .set(&#39;User-Agent&#39;, &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36&#39;)            .end(function (err, res) &#123;                if (err) &#123;                    rej(err)                    return                &#125;                rev(res)            &#125;)    &#125;)&#125;// çˆ¬è™«function spider(fetch_link) &#123;    console.log(`å¼€å§‹ç¬¬$&#123;++spiderCount&#125;æ¬¡å…¥å£çˆ¬è™«...`)    req(fetch_link).then(res =&gt; &#123;        let linksAry = [];        fetchLinks(&#123;            $: cheerio.load(res.text),            selector: &#39;.list_con_box ul&gt;li&gt;a[href]&#39;,            linksAry: linksAry,            link: fetch_link        &#125;);        console.log(&#39;ç¬¬ä¸€æ¬¡æŠ“å–åˆ°çš„é“¾æ¥ï¼š\n&#39;, linksAry)        async.mapLimit(linksAry, 1, async function (&#123; href, title &#125;) &#123;            // å­˜åœ¨titleï¼šä»£è¡¨æ˜¯æŠ“å–å›¾ç‰‡çš„ç›®æ ‡åœ°å€            if (title) &#123;                // åˆ›å»ºç›®å½•                mkdirp(savePath + title);                let linksAry = [];                let &#123; text &#125; = await req(href);                let $$ = cheerio.load(text);                fetchLinks(&#123;                    $: $$,                    selector: &#39;.pages li&gt;a&#39;,                    linksAry: linksAry,                    link: href,                    title: title, //å› ä¸ºå½“å‰æŠ“çš„é¡µé¢é‡Œå¯èƒ½å­˜åœ¨é¢å¤–çš„å›¾ç‰‡é“¾æ¥åœ°å€ï¼Œæ˜¯å±äºåŒä¸€åˆ†ç±»ï¼Œ é˜²æ­¢æ”¶é›†é“¾æ¥çš„æ—¶å€™titleä¸ºundefined                &#125;);                linksAry.unshift(&#123;                    title: title,                    href: href                &#125;);                return linksAry;            &#125; else &#123;                // åŠ å…¥é›†åˆ                if (!globalLinkQueue.some(d =&gt; d == href)) &#123;                    globalLinkQueue.push(href)                &#125;            &#125;        &#125;, (err, linksAry) =&gt; &#123;            let links = linksAry.filter(d =&gt; d != undefined).flat();            let count = 0;            let allCount = links.length;            console.log(&#39;ç¬¬äºŒæ¬¡æŠ“å–åˆ°çš„é“¾æ¥ï¼š\n&#39;, links);            async.mapLimit(links, 1, async function (&#123; href, title &#125;) &#123;                let &#123; text &#125; = await req(href);                let $ = cheerio.load(text);                let imgSrc = $(&#39;.pic_tupian img&#39;).attr(&#39;src&#39;);                let &#123; domain, hrefPrev &#125; = getHrefInfo(href);                if (!UrlReg.test(imgSrc)) &#123;                    if (String(imgSrc).startsWith(&#39;/&#39;)) &#123;                        imgSrc = domain + imgSrc                    &#125; else &#123;                        imgSrc = hrefPrev + imgSrc                    &#125;                &#125;                await download(imgSrc, savePath + title);                console.log(`å½“å‰å›¾ç‰‡ä¸‹è½½è¿›åº¦:$&#123;++count&#125;/$&#123;allCount&#125;\n`)            &#125;, () =&gt; &#123;                let href = globalLinkQueue.shift()                if (href &amp;&amp; spiderCount &lt;= spiderCountLimit) &#123;                    spider(href)                &#125;            &#125;)        &#125;)    &#125;).catch(err =&gt; &#123;        console.log(&#39;é”™è¯¯ä¿¡æ¯=ã€‹&#39;, err)    &#125;)&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Canvasä¹‹é©¬èµ›å…‹</title>
      <link href="/2022/10/20/canvas-masaike/"/>
      <url>/2022/10/20/canvas-masaike/</url>
      
        <content type="html"><![CDATA[<h3 id="Canvasä¹‹é©¬èµ›å…‹"><a href="#Canvasä¹‹é©¬èµ›å…‹" class="headerlink" title="Canvasä¹‹é©¬èµ›å…‹"></a>Canvasä¹‹é©¬èµ›å…‹</h3><p>é€šè¿‡<code>getImageData</code>è·å–åˆ°å›¾ç‰‡åƒç´ çš„æ•°æ®ï¼Œå¯¹è¿™äº›åƒç´ æ•°æ®è¿›è¡Œä¸€ç³»åˆ—å¤„ç†å°±èƒ½å¾—åˆ°ä¸ä¸€æ ·çš„å›¾ç‰‡æ•ˆæœ</p><p>ä½¿ç”¨<code>putImageData</code>æŠŠå¤„ç†åçš„åƒç´ æ•°æ®åœ¨è¾“å‡ºåˆ°ç”»å¸ƒä¸Š</p><h4 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h4><p><a href="https://postimg.cc/4710KP8z"><img src="https://i.postimg.cc/wMKYGbLb/canvas-masaike.jpg" alt="canvas-masaike.jpg"></a></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Canvasé©¬èµ›å…‹&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;canvas id=&quot;canvas&quot; width=&quot;500&quot; height=&quot;500&quot;&gt;&lt;/canvas&gt;&lt;/body&gt;&lt;script&gt;    var canvas = document.getElementById(&quot;canvas&quot;);    var ctx = canvas.getContext(&quot;2d&quot;);    var img = new Image();    img.src = &#39;./img/0.jpeg&#39;;    img.onload = function () &#123;        draw(this);    &#125;    function draw(obj) &#123;        ctx.drawImage(obj, 0, 0);                var w = obj.width;        var h = obj.height;        var oImg = ctx.getImageData(0, 0, w, h);        //åˆ›å»ºä¸€ä¸ªæ–°çš„ImageDataå¯¹è±¡        var newImg = ctx.createImageData(w, h);        //é©¬èµ›å…‹çš„ç¨‹åº¦ï¼Œæ•°å­—è¶Šå¤§è¶Šæ¨¡ç³Š        var num = 10;        //ç­‰åˆ†ç”»å¸ƒ        var stepW = w / num;        var stepH = h / num;        //è¿™é‡Œæ˜¯å¾ªç¯ç”»å¸ƒçš„åƒç´ ç‚¹        for (var i = 0; i &lt; stepH; i++) &#123;            for (var j = 0; j &lt; stepW; j++) &#123;                //è·å–ä¸€ä¸ªå°æ–¹æ ¼çš„éšæœºé¢œè‰²ï¼Œè¿™æ˜¯å°æ–¹æ ¼çš„éšæœºä½ç½®è·å–çš„                var color = getXY(oImg, j * num + Math.floor(Math.random() * num), i * num + Math.floor(Math.random() * num));                //è¿™é‡Œæ˜¯å¾ªç¯å°æ–¹æ ¼çš„åƒç´ ç‚¹ï¼Œ                for (var k = 0; k &lt; num; k++) &#123;                    for (var l = 0; l &lt; num; l++) &#123;                        //è®¾ç½®å°æ–¹æ ¼çš„é¢œè‰²                        setXY(newImg, j * num + l, i * num + k, color);                    &#125;                &#125;            &#125;        &#125;        ctx.putImageData(newImg, w, 0);    &#125;    function getXY(obj, x, y) &#123;        var w = obj.width;        var h = obj.height;        var d = obj.data;        var color = [];        color[0] = obj.data[4 * (y * w + x)];        color[1] = obj.data[4 * (y * w + x) + 1];        color[2] = obj.data[4 * (y * w + x) + 2];        color[3] = obj.data[4 * (y * w + x) + 3];        return color;    &#125;    function setXY(obj, x, y, color) &#123;        var w = obj.width;        var h = obj.height;        var d = obj.data;        obj.data[4 * (y * w + x)] = color[0];        obj.data[4 * (y * w + x) + 1] = color[1];        obj.data[4 * (y * w + x) + 2] = color[2];        obj.data[4 * (y * w + x) + 3] = color[3];    &#125;&lt;/script&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Canvasä¹‹åˆ®åˆ®å¡</title>
      <link href="/2022/10/20/canvas-guaguaka/"/>
      <url>/2022/10/20/canvas-guaguaka/</url>
      
        <content type="html"><![CDATA[<h3 id="Canvasä¹‹åˆ®åˆ®å¡"><a href="#Canvasä¹‹åˆ®åˆ®å¡" class="headerlink" title="Canvasä¹‹åˆ®åˆ®å¡"></a>Canvasä¹‹åˆ®åˆ®å¡</h3><h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>æ•´ä¸ªDemoï¼Œå…¶å®åªæ˜¯å®ç°åŸºæœ¬æ¸¸æˆé€»è¾‘ï¼Œæœ‰äº›ç»†èŠ‚å¯ç»§ç»­ä¼˜åŒ–ï¼Œä½†æ˜¯æ²¡æœ‰é‚£ä¹ˆå¤šç©ºä½™æ—¶é—´äº†â€¦</p><p>å¯è°“æ˜¯ç®€ç‰ˆä¸­çš„ç®€ç‰ˆä¹‹é»„é‡‘çŸ¿å·¥ hhhâ€¦</p><p>å…ˆä¸Šä¸ªé¢„è§ˆgifï¼Œå†è´´ä¸ªä»£ç â€¦</p><p>å¯ä»¥ä¸Šç äº‘ä¸Šçœ‹çœ‹: <a href="https://gitee.com/shaoyunfeng793/diao-wawa">https://gitee.com/shaoyunfeng793/diao-wawa</a></p><h4 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h4><p><a href="https://postimg.cc/SJ0fr04G"><img src="https://i.postimg.cc/yYxp7Br2/diaowawa.gif" alt="diaowawa.gif"></a></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Canvasä¹‹é’“å¨ƒå¨ƒGameDemo&lt;/title&gt;    &lt;style&gt;        * &#123;            margin: 0;            padding: 0;        &#125;        .container &#123;            width: 100vw;            height: 100vh;            background-color: #333;            display: flex;            justify-content: center;            align-items: center;        &#125;        #canvas &#123;            display: block;            background-color: bisque;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;container&quot;&gt;        &lt;canvas id=&quot;canvas&quot; width=&quot;300&quot; height=&quot;500&quot;&gt;&lt;/canvas&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./game.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;./wawa.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;./gouzi.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    var game = new Game(&#123;        dom: &#39;#canvas&#39;,        onClick: function () &#123;            if (game.gouzi.status == &#39;pending&#39;) &#123;                game.gouzi.status = &#39;down&#39;;            &#125;        &#125;    &#125;);&lt;/script&gt;&lt;/html&gt;</code></pre><h4 id="Game-js"><a href="#Game-js" class="headerlink" title="Game.js"></a>Game.js</h4><pre><code class="js">!(function () &#123;    var Game = window.Game = function (&#123;        dom,        onClick = function () &#123; &#125;,    &#125;) &#123;        this.canvas = document.querySelector(dom);        this.ctx = this.canvas.getContext(&quot;2d&quot;);        // èµ„æºç®¡ç†å™¨        this.R = &#123;&#125;;        // æ¸²æŸ“å®šæ—¶å™¨        this.renderTimer = null;        // å¨ƒå¨ƒæ•°ç»„        this.wawaArr = [];        // é’©å­å®ä¾‹        this.gouzi = null;        // å®‰å…¨åŸŸ        this.safeTopHeight = 200;        // å®½é«˜        this.canvasWidth = this.canvas.width;        this.canvasHeight = this.canvas.height;        // æ¸¸æˆåˆå§‹åŒ–        this.init();        // ç›‘å¬ç‚¹å‡»        this.canvas.addEventListener(&quot;click&quot;, onClick)    &#125;    Game.prototype.init = function () &#123;        console.log(&quot;æ¸¸æˆåˆå§‹åŒ–&quot;);        let xhr = new XMLHttpRequest();        let self = this;        let loadCount = 0;        xhr.onreadystatechange = function () &#123;            if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;                let data = JSON.parse(xhr.responseText);                for (let i = 0; i &lt; data.length; i++) &#123;                    self.R[data[i].name] = new Image();                    self.R[data[i].name].src = data[i].img;                    self.R[data[i].name].onload = function () &#123;                        loadCount++;                        self.ctx.clearRect(0, 0, self.canvas.width, self.canvas.height);                        self.ctx.save()                        self.ctx.font = &quot;20px å¾®è½¯é›…é»‘&quot;;                        self.ctx.textAlign = &quot;center&quot;;                        self.ctx.fillText(`æ­£åœ¨åŠ è½½èµ„æº($&#123;loadCount&#125;/$&#123;data.length&#125;)...`, self.canvas.width * 0.5, self.canvas.height * 0.5);                        self.ctx.restore()                        if (loadCount == data.length) &#123;                            setTimeout(() =&gt; &#123;                                // åˆ›å»ºé’©å­                                new Gouzi();                                // åˆ›å»ºå¨ƒå¨ƒ                                new Array(5).fill(1).forEach(() =&gt; &#123;                                    new Wawa();                                &#125;);                                self.start();                            &#125;, 1000)                        &#125;                    &#125;                &#125;            &#125;        &#125;        xhr.open(&quot;get&quot;, &quot;R.json&quot;, true);        xhr.send();    &#125;    Game.prototype.start = function () &#123;        let frame = 0;        this.renderTimer = setInterval(() =&gt; &#123;            frame++;            // æ¸…å±            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);            // ç”»å¸§æ•°            this.ctx.font = &quot;10px å¾®è½¯é›…é»‘&quot;;            this.ctx.fillStyle = &quot;red&quot;;            this.ctx.fillText(`Frame:$&#123;frame&#125;`, 10, 20);            // ç”»å‹¾å­            if (this.gouzi &amp;&amp; this.gouzi.constructor === Gouzi) &#123;                this.gouzi.render();                this.gouzi.update();            &#125;            // ç”»å¨ƒå¨ƒ            this.wawaArr.forEach(function (wawa) &#123;                wawa.render();                wawa.update();            &#125;)        &#125;, 1000 / 60)    &#125;    Game.prototype.end = function () &#123;        clearInterval(this.renderTimer);        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);        this.ctx.font = &quot;30px bold å¾®è½¯é›…é»‘&quot;;        this.ctx.textAlign = &quot;center&quot;;        this.ctx.fillStyle = &quot;red&quot;;        this.ctx.fillText(`You Winï¼`, this.canvas.width / 2, this.canvas.height / 2);    &#125;&#125;)()</code></pre><h4 id="Gouzi-js"><a href="#Gouzi-js" class="headerlink" title="Gouzi.js"></a>Gouzi.js</h4><pre><code class="js">!(function () &#123;    const DEG = Math.PI / 180;    var Gouzi = window.Gouzi = function () &#123;        if (game.gouzi) &#123;            return game.gouzi        &#125;        // é’©å­çŠ¶æ€: pendingï¼šç­‰å¾…ï¼› down: å‡ºé’© up: æ”¶é’©        this.status = &#39;pending&#39;;        // é’©å­åˆå§‹é•¿åº¦        this.rotateDegMax = 80;        this.gouziLong = 60;        // é’©å­èµ·å§‹ç‚¹ï¼Œç›¸å½“äºåœ†å¿ƒ        this.startX = game.canvasWidth / 2;        this.startY = 30;        // é’©å­åˆå§‹æ—‹è½¬è§’åº¦å€¼ï¼Œå³é»˜è®¤å·¦è¾¹å¼€å§‹è¡        this.rotateDeg = -this.rotateDegMax;        // é’©å­æ–¹å‘å€¼çš„æ§åˆ¶ +1 -1ä»£è¡¨ä¸åŒçš„æ–¹å‘ï¼Œæ¯è¾¾åˆ°80æˆ–-80çš„æ—¶å€™è½¬å˜æ–¹å‘        this.rotateZhengfu = -1;        // é’©å­ç»ˆç‚¹ä½ç½®        this.endX = 0; // endXä¸€ç›´éƒ½æ˜¯ä¸å˜çš„ï¼Œå› ä¸ºé’©å­çš„è¡æ¼¾åŠ¨ä½œæ˜¯æ—‹è½¬å¾—åˆ°çš„         this.endY = this.gouziLong;        // é’©å­å›¾ç‰‡å‚æ•°        this.gouziW = 36;        this.gouziH = 28;        // æ‰˜ç®¡åˆ°gameä¸Š        game.gouzi = this;    &#125;    Gouzi.prototype.render = function () &#123;        game.ctx.save();        game.ctx.beginPath();        game.ctx.lineWidth = 4;        game.ctx.lineCap = &#39;round&#39;;        game.ctx.translate(this.startX, this.startY);        game.ctx.rotate(this.rotateDeg * -DEG); // -DEGè¡¨ç¤ºé€†æ—¶é’ˆæ—‹è½¬        game.ctx.moveTo(0, 0);        game.ctx.lineTo(this.endX, this.endY);        game.ctx.stroke();        game.ctx.drawImage(game.R.zhuazi, 0, 0, 45, 35, this.endX - this.gouziW / 2, this.endY, this.gouziW, this.gouziH);        game.ctx.restore();    &#125;    Gouzi.prototype.update = function () &#123;        let endX;        switch (this.status) &#123;            case &#39;pending&#39;:                if (Math.abs(this.rotateDeg) == this.rotateDegMax) &#123;                    this.rotateZhengfu = -this.rotateZhengfu;                &#125;                this.rotateDeg += 1 * this.rotateZhengfu;                break;            case &#39;down&#39;:                // å¦‚ä½•åˆ¤æ–­è¯¥ä¸è¯¥æ”¶é’©å­å‘¢ï¼Ÿ                // ç¬¬1ç§æ˜¯é’©å­æŠ“åˆ°äº†å°±æ”¶é’©å­ï¼ˆé€šè¿‡endY + rotateDeg + sinå…¬å¼è®¡ç®—å‡ºendXï¼‰                this.endY += 3;                endX = this.startX + (this.endY * Math.sin(this.rotateDeg * DEG));                let wawaIndex = game.wawaArr.findIndex(d =&gt; (d.y - d.h) &lt; this.endY &amp;&amp; this.endY &lt; d.y &amp;&amp; d.x &lt; endX &amp;&amp; endX &lt; (d.x + d.w));                if (wawaIndex != -1) &#123;                    // ç§»é™¤å¨ƒå¨ƒ                    game.wawaArr.splice(wawaIndex, 1);                    // å¦‚æœå…¨è¢«æŠ“å…‰äº†å°±endæ¸¸æˆ                    if (game.wawaArr.length == 0) &#123;                        game.end();                    &#125;                    this.status = &#39;up&#39;;                &#125;                // ç¬¬2ç§æ˜¯é’©å­é•¿åˆ°æœ€é•¿è·ç¦»ç„¶åå¼€å§‹æ”¶é’©å­                else if (this.endY &gt;= game.canvasHeight - this.startY - this.gouziH) &#123;                    this.status = &#39;up&#39;;                &#125;                break;            case &#39;up&#39;:                this.endY -= 3;                if (this.endY &lt;= this.gouziLong) &#123;                    this.endY = this.gouziLong;                    this.status = &#39;pending&#39;;                &#125;                break;            default:                return;        &#125;    &#125;&#125;)()</code></pre><h4 id="Wawa-js"><a href="#Wawa-js" class="headerlink" title="Wawa.js"></a>Wawa.js</h4><pre><code class="js">!(function () &#123;    // å€ŸåŠ©å·¥å…·http://www.spritecow.com/æ¥è·å¾—å®šä½ï¼Œéœ€è¦å¾®è°ƒä¸€ä¸‹    var WawaImagePositionMap = [        &#123;            x: 0,            y: 96        &#125;,        &#123;            x: 2,            y: 129        &#125;,        &#123;            x: 3,            y: 168        &#125;,        &#123;            x: 33,            y: 96        &#125;,        &#123;            x: 36,            y: 132        &#125;,        &#123;            x: 37,            y: 168        &#125;,        &#123;            x: 65,            y: 98        &#125;,        &#123;            x: 100,            y: 97        &#125;,    ];    var Wawa = window.Wawa = function () &#123;        // å®½é«˜        this.w = 32;        this.h = 32;        // å¨ƒå¨ƒå›¾ç‰‡        let randomImage = WawaImagePositionMap[parseInt(Math.random() * WawaImagePositionMap.length)];        this.imageX = randomImage.x;        this.imageY = randomImage.y;        // éšæœºå‡ºç°ä½ç½®        this.x = Math.random() * game.canvasWidth;        this.y = Math.random() * (game.canvasHeight - game.safeTopHeight - this.h) + game.safeTopHeight;        // æ‰˜ç®¡åˆ°gameä¸Š        game.wawaArr.push(this);    &#125;    Wawa.prototype.render = function () &#123;        game.ctx.drawImage(game.R.wawa, this.imageX, this.imageY, this.w, this.h, this.x, this.y, this.w, this.h);    &#125;    Wawa.prototype.update = function () &#123;        this.x += 0.5;        if (this.x &gt; game.canvasWidth) &#123;            this.x = -this.w;        &#125;    &#125;&#125;)()</code></pre><h4 id="R-json"><a href="#R-json" class="headerlink" title="R.json"></a>R.json</h4><pre><code class="json">[    &#123;        &quot;name&quot;: &quot;wawa&quot;,        &quot;img&quot;: &quot;./images/wawa.png&quot;    &#125;,    &#123;        &quot;name&quot;: &quot;zhuazi&quot;,        &quot;img&quot;: &quot;./images/zhuazi.png&quot;    &#125;]</code></pre>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Canvasä¹‹å…¨å±æ°”æ³¡</title>
      <link href="/2022/10/19/canvas-qipao/"/>
      <url>/2022/10/19/canvas-qipao/</url>
      
        <content type="html"><![CDATA[<h3 id="Canvasä¹‹å…¨å±æ°”æ³¡"><a href="#Canvasä¹‹å…¨å±æ°”æ³¡" class="headerlink" title="Canvasä¹‹å…¨å±æ°”æ³¡"></a>Canvasä¹‹å…¨å±æ°”æ³¡</h3><h4 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h4><p><a href="https://postimg.cc/LqtCKYqQ"><img src="https://i.postimg.cc/6QSDZCBK/qipao-xiaoguo.gif" alt="qipao-xiaoguo.gif"></a></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;å…¨å±æ°”æ³¡&lt;/title&gt;    &lt;style&gt;        * &#123;            margin: 0;            padding: 0;        &#125;        html,        body &#123;            height: 100%;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;&lt;/body&gt;&lt;script&gt;    if (canvas.getContext) &#123;        canvas.width = document.documentElement.clientWidth        canvas.height = document.documentElement.clientHeight        canvas.style.backgroundColor = &#39;white&#39;        const ctx = canvas.getContext(&#39;2d&#39;)        // å£°æ˜å˜é‡        let radius = 20,            r,            g,            b,            a,            x,            y,            arr = [],            temp = [];                // å…ˆç”»5ä¸ªæ°”æ³¡        for (let i = 0; i &lt; 5; i++) &#123;            createPop()        &#125;        // ç›‘å¬ç‚¹å‡»äº‹ä»¶        canvas.addEventListener(&#39;click&#39;, event =&gt; &#123;            console.log(&quot;ç‚¹å‡»äº†canvasï¼š&quot;, event);            x = event.offsetX            y = event.offsetY            radius = 5            createPop(x, y, radius)        &#125;)        // å®šæ—¶åˆ·æ–°canvas        setInterval(() =&gt; &#123;            ctx.clearRect(0, 0, canvas.width, canvas.height)            arr.forEach((item, index) =&gt; &#123;                if (item.a &lt;= 0) &#123;                    temp.push(index)                &#125; else &#123;                    item.radius += 0.5                    item.a -= 0.005                &#125;                drawPop(item.radius, item.r, item.g, item.b, item.a, item.x, item.y)            &#125;)            arr = arr.filter(item =&gt; &#123;                return item.a &gt; 0            &#125;)        &#125;, 1000 / 60);        // å®šæ—¶æ·»åŠ æ–°çš„æ°”æ³¡        setInterval(() =&gt; &#123;            createPop()        &#125;, 500);        // ç”»æ°”æ³¡        function drawPop(radius, r, g, b, a, x, y) &#123;            ctx.beginPath()            ctx.arc(x, y, radius, 0, 2 * Math.PI)            ctx.fillStyle = `rgba($&#123;r&#125;,$&#123;g&#125;,$&#123;b&#125;,$&#123;a&#125;)`            ctx.fill()        &#125;        // æ°”æ³¡æ•°æ®        function createPop(x, y, radius) &#123;            r = arcRandomColor()            g = arcRandomColor()            b = arcRandomColor()            radius = radius || Math.ceil(Math.random() * 10)            x = x || Math.ceil(Math.random() * canvas.width)            y = y || Math.ceil(Math.random() * canvas.height)            a = 1            const temp = &#123;                r,                g,                b,                a,                x,                y,                radius            &#125;            arr.push(temp)        &#125;        // éšæœºæ•°æ®        function arcRandomColor() &#123;            return Math.ceil(Math.random() * 254)        &#125;    &#125;&lt;/script&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Canvasä¹‹é’“å¨ƒå¨ƒGameDemo</title>
      <link href="/2022/10/18/canvas-diaoWawa/"/>
      <url>/2022/10/18/canvas-diaoWawa/</url>
      
        <content type="html"><![CDATA[<h3 id="Canvasä¹‹é’“å¨ƒå¨ƒGameDemo"><a href="#Canvasä¹‹é’“å¨ƒå¨ƒGameDemo" class="headerlink" title="Canvasä¹‹é’“å¨ƒå¨ƒGameDemo"></a>Canvasä¹‹é’“å¨ƒå¨ƒGameDemo</h3><h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>æ•´ä¸ªDemoï¼Œå…¶å®åªæ˜¯å®ç°åŸºæœ¬æ¸¸æˆé€»è¾‘ï¼Œæœ‰äº›ç»†èŠ‚å¯ç»§ç»­ä¼˜åŒ–ï¼Œä½†æ˜¯æ²¡æœ‰é‚£ä¹ˆå¤šç©ºä½™æ—¶é—´äº†â€¦</p><p>å¯è°“æ˜¯ç®€ç‰ˆä¸­çš„ç®€ç‰ˆä¹‹é»„é‡‘çŸ¿å·¥ hhhâ€¦</p><p>å…ˆä¸Šä¸ªé¢„è§ˆgifï¼Œå†è´´ä¸ªä»£ç â€¦</p><p>å¯ä»¥ä¸Šç äº‘ä¸Šçœ‹çœ‹: <a href="https://gitee.com/shaoyunfeng793/diao-wawa">https://gitee.com/shaoyunfeng793/diao-wawa</a></p><h4 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h4><p><a href="https://postimg.cc/SJ0fr04G"><img src="https://i.postimg.cc/yYxp7Br2/diaowawa.gif" alt="diaowawa.gif"></a></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Canvasä¹‹é’“å¨ƒå¨ƒGameDemo&lt;/title&gt;    &lt;style&gt;        * &#123;            margin: 0;            padding: 0;        &#125;        .container &#123;            width: 100vw;            height: 100vh;            background-color: #333;            display: flex;            justify-content: center;            align-items: center;        &#125;        #canvas &#123;            display: block;            background-color: bisque;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;container&quot;&gt;        &lt;canvas id=&quot;canvas&quot; width=&quot;300&quot; height=&quot;500&quot;&gt;&lt;/canvas&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./game.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;./wawa.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;./gouzi.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    var game = new Game(&#123;        dom: &#39;#canvas&#39;,        onClick: function () &#123;            if (game.gouzi.status == &#39;pending&#39;) &#123;                game.gouzi.status = &#39;down&#39;;            &#125;        &#125;    &#125;);&lt;/script&gt;&lt;/html&gt;</code></pre><h4 id="Game-js"><a href="#Game-js" class="headerlink" title="Game.js"></a>Game.js</h4><pre><code class="js">!(function () &#123;    var Game = window.Game = function (&#123;        dom,        onClick = function () &#123; &#125;,    &#125;) &#123;        this.canvas = document.querySelector(dom);        this.ctx = this.canvas.getContext(&quot;2d&quot;);        // èµ„æºç®¡ç†å™¨        this.R = &#123;&#125;;        // æ¸²æŸ“å®šæ—¶å™¨        this.renderTimer = null;        // å¨ƒå¨ƒæ•°ç»„        this.wawaArr = [];        // é’©å­å®ä¾‹        this.gouzi = null;        // å®‰å…¨åŸŸ        this.safeTopHeight = 200;        // å®½é«˜        this.canvasWidth = this.canvas.width;        this.canvasHeight = this.canvas.height;        // æ¸¸æˆåˆå§‹åŒ–        this.init();        // ç›‘å¬ç‚¹å‡»        this.canvas.addEventListener(&quot;click&quot;, onClick)    &#125;    Game.prototype.init = function () &#123;        console.log(&quot;æ¸¸æˆåˆå§‹åŒ–&quot;);        let xhr = new XMLHttpRequest();        let self = this;        let loadCount = 0;        xhr.onreadystatechange = function () &#123;            if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;                let data = JSON.parse(xhr.responseText);                for (let i = 0; i &lt; data.length; i++) &#123;                    self.R[data[i].name] = new Image();                    self.R[data[i].name].src = data[i].img;                    self.R[data[i].name].onload = function () &#123;                        loadCount++;                        self.ctx.clearRect(0, 0, self.canvas.width, self.canvas.height);                        self.ctx.save()                        self.ctx.font = &quot;20px å¾®è½¯é›…é»‘&quot;;                        self.ctx.textAlign = &quot;center&quot;;                        self.ctx.fillText(`æ­£åœ¨åŠ è½½èµ„æº($&#123;loadCount&#125;/$&#123;data.length&#125;)...`, self.canvas.width * 0.5, self.canvas.height * 0.5);                        self.ctx.restore()                        if (loadCount == data.length) &#123;                            setTimeout(() =&gt; &#123;                                // åˆ›å»ºé’©å­                                new Gouzi();                                // åˆ›å»ºå¨ƒå¨ƒ                                new Array(5).fill(1).forEach(() =&gt; &#123;                                    new Wawa();                                &#125;);                                self.start();                            &#125;, 1000)                        &#125;                    &#125;                &#125;            &#125;        &#125;        xhr.open(&quot;get&quot;, &quot;R.json&quot;, true);        xhr.send();    &#125;    Game.prototype.start = function () &#123;        let frame = 0;        this.renderTimer = setInterval(() =&gt; &#123;            frame++;            // æ¸…å±            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);            // ç”»å¸§æ•°            this.ctx.font = &quot;10px å¾®è½¯é›…é»‘&quot;;            this.ctx.fillStyle = &quot;red&quot;;            this.ctx.fillText(`Frame:$&#123;frame&#125;`, 10, 20);            // ç”»å‹¾å­            if (this.gouzi &amp;&amp; this.gouzi.constructor === Gouzi) &#123;                this.gouzi.render();                this.gouzi.update();            &#125;            // ç”»å¨ƒå¨ƒ            this.wawaArr.forEach(function (wawa) &#123;                wawa.render();                wawa.update();            &#125;)        &#125;, 1000 / 60)    &#125;    Game.prototype.end = function () &#123;        clearInterval(this.renderTimer);        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);        this.ctx.font = &quot;30px bold å¾®è½¯é›…é»‘&quot;;        this.ctx.textAlign = &quot;center&quot;;        this.ctx.fillStyle = &quot;red&quot;;        this.ctx.fillText(`You Winï¼`, this.canvas.width / 2, this.canvas.height / 2);    &#125;&#125;)()</code></pre><h4 id="Gouzi-js"><a href="#Gouzi-js" class="headerlink" title="Gouzi.js"></a>Gouzi.js</h4><pre><code class="js">!(function () &#123;    const DEG = Math.PI / 180;    var Gouzi = window.Gouzi = function () &#123;        if (game.gouzi) &#123;            return game.gouzi        &#125;        // é’©å­çŠ¶æ€: pendingï¼šç­‰å¾…ï¼› down: å‡ºé’© up: æ”¶é’©        this.status = &#39;pending&#39;;        // é’©å­åˆå§‹é•¿åº¦        this.rotateDegMax = 80;        this.gouziLong = 60;        // é’©å­èµ·å§‹ç‚¹ï¼Œç›¸å½“äºåœ†å¿ƒ        this.startX = game.canvasWidth / 2;        this.startY = 30;        // é’©å­åˆå§‹æ—‹è½¬è§’åº¦å€¼ï¼Œå³é»˜è®¤å·¦è¾¹å¼€å§‹è¡        this.rotateDeg = -this.rotateDegMax;        // é’©å­æ–¹å‘å€¼çš„æ§åˆ¶ +1 -1ä»£è¡¨ä¸åŒçš„æ–¹å‘ï¼Œæ¯è¾¾åˆ°80æˆ–-80çš„æ—¶å€™è½¬å˜æ–¹å‘        this.rotateZhengfu = -1;        // é’©å­ç»ˆç‚¹ä½ç½®        this.endX = 0; // endXä¸€ç›´éƒ½æ˜¯ä¸å˜çš„ï¼Œå› ä¸ºé’©å­çš„è¡æ¼¾åŠ¨ä½œæ˜¯æ—‹è½¬å¾—åˆ°çš„         this.endY = this.gouziLong;        // é’©å­å›¾ç‰‡å‚æ•°        this.gouziW = 36;        this.gouziH = 28;        // æ‰˜ç®¡åˆ°gameä¸Š        game.gouzi = this;    &#125;    Gouzi.prototype.render = function () &#123;        game.ctx.save();        game.ctx.beginPath();        game.ctx.lineWidth = 4;        game.ctx.lineCap = &#39;round&#39;;        game.ctx.translate(this.startX, this.startY);        game.ctx.rotate(this.rotateDeg * -DEG); // -DEGè¡¨ç¤ºé€†æ—¶é’ˆæ—‹è½¬        game.ctx.moveTo(0, 0);        game.ctx.lineTo(this.endX, this.endY);        game.ctx.stroke();        game.ctx.drawImage(game.R.zhuazi, 0, 0, 45, 35, this.endX - this.gouziW / 2, this.endY, this.gouziW, this.gouziH);        game.ctx.restore();    &#125;    Gouzi.prototype.update = function () &#123;        let endX;        switch (this.status) &#123;            case &#39;pending&#39;:                if (Math.abs(this.rotateDeg) == this.rotateDegMax) &#123;                    this.rotateZhengfu = -this.rotateZhengfu;                &#125;                this.rotateDeg += 1 * this.rotateZhengfu;                break;            case &#39;down&#39;:                // å¦‚ä½•åˆ¤æ–­è¯¥ä¸è¯¥æ”¶é’©å­å‘¢ï¼Ÿ                // ç¬¬1ç§æ˜¯é’©å­æŠ“åˆ°äº†å°±æ”¶é’©å­ï¼ˆé€šè¿‡endY + rotateDeg + sinå…¬å¼è®¡ç®—å‡ºendXï¼‰                this.endY += 3;                endX = this.startX + (this.endY * Math.sin(this.rotateDeg * DEG));                let wawaIndex = game.wawaArr.findIndex(d =&gt; (d.y - d.h) &lt; this.endY &amp;&amp; this.endY &lt; d.y &amp;&amp; d.x &lt; endX &amp;&amp; endX &lt; (d.x + d.w));                if (wawaIndex != -1) &#123;                    // ç§»é™¤å¨ƒå¨ƒ                    game.wawaArr.splice(wawaIndex, 1);                    // å¦‚æœå…¨è¢«æŠ“å…‰äº†å°±endæ¸¸æˆ                    if (game.wawaArr.length == 0) &#123;                        game.end();                    &#125;                    this.status = &#39;up&#39;;                &#125;                // ç¬¬2ç§æ˜¯é’©å­é•¿åˆ°æœ€é•¿è·ç¦»ç„¶åå¼€å§‹æ”¶é’©å­                else if (this.endY &gt;= game.canvasHeight - this.startY - this.gouziH) &#123;                    this.status = &#39;up&#39;;                &#125;                break;            case &#39;up&#39;:                this.endY -= 3;                if (this.endY &lt;= this.gouziLong) &#123;                    this.endY = this.gouziLong;                    this.status = &#39;pending&#39;;                &#125;                break;            default:                return;        &#125;    &#125;&#125;)()</code></pre><h4 id="Wawa-js"><a href="#Wawa-js" class="headerlink" title="Wawa.js"></a>Wawa.js</h4><pre><code class="js">!(function () &#123;    // å€ŸåŠ©å·¥å…·http://www.spritecow.com/æ¥è·å¾—å®šä½ï¼Œéœ€è¦å¾®è°ƒä¸€ä¸‹    var WawaImagePositionMap = [        &#123;            x: 0,            y: 96        &#125;,        &#123;            x: 2,            y: 129        &#125;,        &#123;            x: 3,            y: 168        &#125;,        &#123;            x: 33,            y: 96        &#125;,        &#123;            x: 36,            y: 132        &#125;,        &#123;            x: 37,            y: 168        &#125;,        &#123;            x: 65,            y: 98        &#125;,        &#123;            x: 100,            y: 97        &#125;,    ];    var Wawa = window.Wawa = function () &#123;        // å®½é«˜        this.w = 32;        this.h = 32;        // å¨ƒå¨ƒå›¾ç‰‡        let randomImage = WawaImagePositionMap[parseInt(Math.random() * WawaImagePositionMap.length)];        this.imageX = randomImage.x;        this.imageY = randomImage.y;        // éšæœºå‡ºç°ä½ç½®        this.x = Math.random() * game.canvasWidth;        this.y = Math.random() * (game.canvasHeight - game.safeTopHeight - this.h) + game.safeTopHeight;        // æ‰˜ç®¡åˆ°gameä¸Š        game.wawaArr.push(this);    &#125;    Wawa.prototype.render = function () &#123;        game.ctx.drawImage(game.R.wawa, this.imageX, this.imageY, this.w, this.h, this.x, this.y, this.w, this.h);    &#125;    Wawa.prototype.update = function () &#123;        this.x += 0.5;        if (this.x &gt; game.canvasWidth) &#123;            this.x = -this.w;        &#125;    &#125;&#125;)()</code></pre><h4 id="R-json"><a href="#R-json" class="headerlink" title="R.json"></a>R.json</h4><pre><code class="json">[    &#123;        &quot;name&quot;: &quot;wawa&quot;,        &quot;img&quot;: &quot;./images/wawa.png&quot;    &#125;,    &#123;        &quot;name&quot;: &quot;zhuazi&quot;,        &quot;img&quot;: &quot;./images/zhuazi.png&quot;    &#125;]</code></pre>]]></content>
      
      
      <categories>
          
          <category> Canvas </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¹‹ä¼˜é›…çš„æ„å»ºè‡ªå·±çš„ç»„ä»¶åº“</title>
      <link href="/2022/10/15/vue-myselfCpns/"/>
      <url>/2022/10/15/vue-myselfCpns/</url>
      
        <content type="html"><![CDATA[<h3 id="Vueä¹‹ä¼˜é›…çš„æ„å»ºè‡ªå·±çš„ç»„ä»¶åº“ï¼ˆVue3ï¼‰"><a href="#Vueä¹‹ä¼˜é›…çš„æ„å»ºè‡ªå·±çš„ç»„ä»¶åº“ï¼ˆVue3ï¼‰" class="headerlink" title="Vueä¹‹ä¼˜é›…çš„æ„å»ºè‡ªå·±çš„ç»„ä»¶åº“ï¼ˆVue3ï¼‰"></a>Vueä¹‹ä¼˜é›…çš„æ„å»ºè‡ªå·±çš„ç»„ä»¶åº“ï¼ˆVue3ï¼‰</h3><h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p><em>ç°åœ¨å¸‚é¢ä¸Šçš„ç»„ä»¶åº“äº”èŠ±å…«é—¨ï¼Œä½†æ˜¯åˆå¤§åŒå°å¼‚ï¼Œç°åœ¨å°±æ¥çœ‹çœ‹å¦‚ä½•è¾ƒä¸ºä¼˜é›…çš„å¼€å‘è‡ªå·±çš„ä¸€å¥—ç»„ä»¶åº“ï¼Œè¯¥ç¯‡å†™çš„ç»„ä»¶éƒ½è¾ƒä¸ºç®€å•ï¼Œç»„ä»¶å¤æ‚åº¦å¯ä»¥è¯´å®Œå…¨æ²¡æœ‰ï¼Œä½†æ˜¯ä¸»è¦æƒ³è®²çš„æ˜¯æ•´å¥—ç»„ä»¶å¼€å‘çš„å¤§è‡´ç»“æ„</em></p><h4 id="ç»„ä»¶åº“ç›®å½•ç»“æ„"><a href="#ç»„ä»¶åº“ç›®å½•ç»“æ„" class="headerlink" title="ç»„ä»¶åº“ç›®å½•ç»“æ„"></a>ç»„ä»¶åº“ç›®å½•ç»“æ„</h4><p><img src="https://i.postimg.cc/1tp4dfF6/myself-Cpns-mulu.jpg" alt="ç›®å½•ç»“æ„"></p><p>æŠŠæ‰€æœ‰ç»„ä»¶ä»¥æ–‡ä»¶å¤¹çš„æ–¹å¼éƒ½æ”¾åœ¨<strong>src</strong>ç›®å½•é‡Œï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹å†…éƒ½åŒ…å«ä¸€<em>index.js</em>ï¼Œå’Œ<em>index.css</em>ï¼Œè¿˜æœ‰å¯èƒ½åŒ…æ‹¬æ¸²æŸ“ç»„ä»¶çš„<code>.js</code>æˆ–è€…<code>.vue</code>æ–‡ä»¶</p><p><em>è§£é‡Šä¸‹æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨: ä»¥<strong>button</strong>ä¸ºä¾‹</em></p><h5 id="button-js"><a href="#button-js" class="headerlink" title="button.js"></a>button.js</h5><p>é€šè¿‡<code>hå‡½æ•°</code>æ¥æ¸²æŸ“å‡ºç»„ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™æˆ<code>.vue</code>çš„å•æ–‡ä»¶å½¢å¼</p><pre><code class="js">// vue3 é€šè¿‡importæ‹¿åˆ° hå‡½æ•°import &#123; h &#125; from &#39;vue&#39;export default &#123;    name: &#39;button&#39;, // ç”¨æ¥æ³¨å†Œç»„ä»¶å    props: &#123;        color: &#123;            type: String,            default: &#39;aqua&#39;        &#125;,        size: &#123;            type: String,            default: &#39;medium&#39;        &#125;    &#125;,    render(&#123; color, size &#125;) &#123;        return h(&#39;div&#39;, &#123; class: `yf-button yf-button--$&#123;size&#125;`, style: `background-color: $&#123;color&#125;` &#125;, [this.$slots.default ? this.$slots.default() : &#39;æŒ‰é’®&#39;])    &#125;&#125;</code></pre><h5 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h5><pre><code class="js">import Button from &quot;./button.js&quot;;// åœ¨å•ä¸ªç»„ä»¶è¢«ä½¿ç”¨æ—¶ï¼Œå³è¢«vue.use()çš„æ—¶å€™ç›´æ¥æ³¨å†Œæˆå…¨å±€ç»„ä»¶Button.install = function (app) &#123;    app.component(Button.name, Button);&#125;;export default Button</code></pre><h5 id="index-css"><a href="#index-css" class="headerlink" title="index.css"></a>index.css</h5><pre><code class="css">.yf-button &#123;    display: inline-block;    margin: 10px;    border-radius: 5px;    padding: 8px 15px;    background-color: aqua;    color: #fff;    cursor: pointer;&#125;.yf-button--large &#123;    padding: 10px 20px;&#125;.yf-button--medium &#123;    padding: 8px 15px;&#125;.yf-button--small &#123;    padding: 4px 8px;&#125;.yf-button:active &#123;    filter: grayscale(0.3);&#125;</code></pre><h4 id="æ‰€æœ‰ç»„ä»¶çš„æ€»å…¥å£æ–‡ä»¶"><a href="#æ‰€æœ‰ç»„ä»¶çš„æ€»å…¥å£æ–‡ä»¶" class="headerlink" title="æ‰€æœ‰ç»„ä»¶çš„æ€»å…¥å£æ–‡ä»¶"></a>æ‰€æœ‰ç»„ä»¶çš„æ€»å…¥å£æ–‡ä»¶</h4><p>ä¸<em>srcç›®å½•</em>åŒçº§çš„2ä¸ªæ–‡ä»¶ï¼š<strong>index.js</strong>ã€<strong>index.css</strong>æ˜¯æ‰€æœ‰ç»„ä»¶çš„æ€»å…¥å£</p><h5 id="æ€»å…¥å£index-js"><a href="#æ€»å…¥å£index-js" class="headerlink" title="æ€»å…¥å£index.js"></a>æ€»å…¥å£index.js</h5><pre><code class="js">import button from &#39;./src/button/index.js&#39;import loading from &#39;./src/loading/index.js&#39;import splitline from &#39;./src/splitline/index.js&#39;import ul from &#39;./src/ul/index.js&#39;import li from &#39;./src/li/index.js&#39;import Switch from &#39;./src/switch/index.js&#39;const components = [    button,    loading,    splitline,    ul,    li,    Switch];export default &#123;    install(app) &#123;        // é€šè¿‡å¼‚æ­¥æ–¹å¼ç›´æ¥å¼•å…¥æ€»å…¥å£index.cssæ–‡ä»¶        import(&#39;./index.css&#39;);        // éå†æ³¨å†Œå…¨å±€ç»„ä»¶        components.forEach(cpn =&gt; &#123;            app.component(`yf-$&#123;cpn.name&#125;`, cpn)        &#125;)    &#125;,    button,    loading,    splitline,    ul,    li,    Switch&#125;</code></pre><h5 id="æ€»å…¥å£index-css"><a href="#æ€»å…¥å£index-css" class="headerlink" title="æ€»å…¥å£index.css"></a>æ€»å…¥å£index.css</h5><pre><code class="css">@import &#39;./src/button/index.css&#39;;@import &#39;./src/loading/index.css&#39;;@import &#39;./src/splitline/index.css&#39;;@import &#39;./src/ul/index.css&#39;;@import &#39;./src/message/index.css&#39;;@import &#39;./src/switch/index.css&#39;;</code></pre><h4 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h4><p>åœ¨vueé¡¹ç›®çš„<code>main.js</code>ä¸­ï¼Œé”®å…¥ä»£ç ï¼ˆä»¥<em>vite+vue3</em>é¡¹ç›®ä¸ºä¾‹ï¼‰</p><pre><code class="js">import &#123; createApp &#125; from &#39;vue&#39;import &#39;./style.css&#39;import App from &#39;./App.vue&#39;import router from &#39;./router/index.js&#39;// å¯¼å…¥æˆ‘çš„ç»„ä»¶åº“  æ³¨æ„ï¼šä¸€å®šå¾—å¯¼ï¼å¾—å¯¼ï¼å¯¼ï¼import yfCpns from &#39;./yf-cpns/index.js&#39;// å¯¼å…¥è‡ªå·±å†™çš„messageæ’ä»¶ï¼Œ é€šè¿‡this.$messageæ¥æç¤ºä¿¡æ¯import message from &#39;./yf-cpns/src/message&#39;const app = createApp(App)// æ³¨å†Œæˆ‘çš„ç»„ä»¶åº“  æ³¨æ„ï¼šä¸€å®šå¾—æ³¨ï¼å¾—æ³¨ï¼æ³¨ï¼app.use(yfCpns)app.use(message)app.use(router).mount(&#39;#app&#39;)</code></pre><p>åœ¨æŸä¸ªé¡µé¢<code>.vue</code>æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä»£ç å¦‚ä¸‹</p><pre><code class="vue">&lt;template&gt;  &lt;div&gt;    &lt;yf-button color=&quot;pink&quot; size=&quot;small&quot;&gt;å°æŒ‰é’®&lt;/yf-button&gt;    &lt;yf-button&gt;æŒ‰é’®&lt;/yf-button&gt;    &lt;yf-button color=&quot;greenyellow&quot; size=&quot;large&quot;&gt;å¤§æŒ‰é’®&lt;/yf-button&gt;    &lt;yf-splitline /&gt;    &lt;yf-loading color=&quot;pink&quot; size=&quot;small&quot;&gt;&lt;/yf-loading&gt;    &lt;yf-loading&gt;&lt;/yf-loading&gt;    &lt;yf-loading color=&quot;greenyellow&quot; size=&quot;large&quot;&gt;&lt;/yf-loading&gt;    &lt;yf-splitline /&gt;    &lt;yf-ul&gt;      &lt;yf-li&gt;çœ‹ç”µå½±&lt;/yf-li&gt;      &lt;yf-li&gt;å¬éŸ³ä¹&lt;/yf-li&gt;      &lt;yf-li&gt;æ‰“æ¸¸æˆ&lt;/yf-li&gt;      &lt;yf-li&gt;åšçˆ±åšçš„äº‹&lt;/yf-li&gt;    &lt;/yf-ul&gt;    &lt;yf-ul sign=&quot;ğŸƒ&quot;&gt;      &lt;yf-li&gt;çœ‹ç”µå½±&lt;/yf-li&gt;      &lt;yf-li&gt;å¬éŸ³ä¹&lt;/yf-li&gt;      &lt;yf-li&gt;æ‰“æ¸¸æˆ&lt;/yf-li&gt;      &lt;yf-li&gt;åšçˆ±åšçš„äº‹&lt;/yf-li&gt;    &lt;/yf-ul&gt;    &lt;yf-ul sign=&quot;ğŸ˜Š&quot;&gt;      &lt;yf-li&gt;çœ‹ç”µå½±&lt;/yf-li&gt;      &lt;yf-li&gt;å¬éŸ³ä¹&lt;/yf-li&gt;      &lt;yf-li&gt;æ‰“æ¸¸æˆ&lt;/yf-li&gt;      &lt;yf-li&gt;åšçˆ±åšçš„äº‹&lt;/yf-li&gt;    &lt;/yf-ul&gt;    &lt;yf-splitline /&gt;    &lt;yf-button color=&quot;greenyellow&quot; @click=&quot;showSuccess&quot;&gt;æˆåŠŸæç¤º&lt;/yf-button&gt;    &lt;yf-button @click=&quot;showNormal&quot;&gt;æ™®é€šæç¤º&lt;/yf-button&gt;    &lt;yf-button color=&quot;red&quot; @click=&quot;showError&quot;&gt;å¤±è´¥æç¤º&lt;/yf-button&gt;    &lt;yf-splitline /&gt;    &lt;yf-switch v-model=&quot;checkValue&quot;&gt;&lt;/yf-switch&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  data() &#123;    return &#123;      checkValue: false    &#125;;  &#125;,  methods: &#123;    showNormal() &#123;      this.$message(&#123;        content: &quot;æ™®é€šä¿¡æ¯&quot;      &#125;);    &#125;,    showSuccess() &#123;      this.$message.success(&quot;æˆåŠŸä¿¡æ¯&quot;);    &#125;,    showError() &#123;      this.$message.error(&quot;é”™è¯¯ä¿¡æ¯&quot;);    &#125;  &#125;&#125;;&lt;/script&gt;</code></pre><h4 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h4><p><img src="https://i.postimg.cc/J4RH9cPh/myself-Cpns-xiaoguo.gif" alt="ç›®å½•ç»“æ„"></p><p>ç äº‘åœ°å€ï¼š<a href="https://gitee.com/shaoyunfeng793/yf-cpns">https://gitee.com/shaoyunfeng793/yf-cpns</a></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å·¥å…·ç½‘ç«™</title>
      <link href="/2022/10/13/utils-webSite/"/>
      <url>/2022/10/13/utils-webSite/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å·¥å…·ç½‘ç«™"><a href="#ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å·¥å…·ç½‘ç«™" class="headerlink" title="ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å·¥å…·ç½‘ç«™"></a>ä¸€äº›å¯èƒ½ç”¨åˆ°çš„å·¥å…·ç½‘ç«™</h3><h4 id="1-å»é™¤å¤šä½™CSS"><a href="#1-å»é™¤å¤šä½™CSS" class="headerlink" title="1.å»é™¤å¤šä½™CSS"></a>1.å»é™¤å¤šä½™CSS</h4><p>æ³¨å…¥htmlä»£ç å’Œcsså®Œæˆå»é™¤å¤šä½™css<br>åœ°å€ï¼š <a href="https://uncss-online.com/">https://uncss-online.com/</a></p><h4 id="2-CSS-spriteå›¾"><a href="#2-CSS-spriteå›¾" class="headerlink" title="2.CSS spriteå›¾"></a>2.CSS spriteå›¾</h4><p>ä¸Šä¼ è‹¥å¹²å›¾ç‰‡ï¼Œå¸®ä½ ç”Ÿæˆé›ªç¢§å›¾ï¼Œè¿˜å¯ä»¥å¸®åŠ©ä½ ç›´æ¥å®šä½åˆ°ç›¸åº”å›¾æ ‡çš„cssæ ·å¼<br>åœ°å€ï¼š <a href="https://www.toptal.com/developers/css/sprite-generator">https://www.toptal.com/developers/css/sprite-generator</a>; <a href="http://www.spritecow.com/">http://www.spritecow.com/</a>;</p><h4 id="3-å›¾ç‰‡å‹ç¼©TinyPng"><a href="#3-å›¾ç‰‡å‹ç¼©TinyPng" class="headerlink" title="3.å›¾ç‰‡å‹ç¼©TinyPng"></a>3.å›¾ç‰‡å‹ç¼©TinyPng</h4><p>ä¸€ä¸ªå¾ˆå¼ºå¤§ä¸”å…è´¹çš„å‹ç¼©ç½‘ç«™<br>åœ°å€ï¼š <a href="https://tinypng.com/">https://tinypng.com</a></p><h4 id="4-cssåŠ¨ç”»"><a href="#4-cssåŠ¨ç”»" class="headerlink" title="4.cssåŠ¨ç”»"></a>4.cssåŠ¨ç”»</h4><p>æœ‰å¾ˆå¤šcssåŠ¨ç”»æ ·å¼ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹æ•ˆæœ<br>åœ°å€ï¼š <a href="https://animate.style/">https://animate.style/</a></p><h4 id="5-cssæ¸å˜é¢œè‰²"><a href="#5-cssæ¸å˜é¢œè‰²" class="headerlink" title="5.cssæ¸å˜é¢œè‰²"></a>5.cssæ¸å˜é¢œè‰²</h4><p>æœ‰å¾ˆå¤šå¥½çœ‹çš„æ¸å˜é¢œè‰²<br>åœ°å€ï¼š <a href="https://webkul.github.io/coolhue/">https://webkul.github.io/coolhue/</a></p><h4 id="6-åˆ é™¤èƒŒæ™¯"><a href="#6-åˆ é™¤èƒŒæ™¯" class="headerlink" title="6.åˆ é™¤èƒŒæ™¯"></a>6.åˆ é™¤èƒŒæ™¯</h4><p>ä¸€ä¸ªæ‰£é™¤èƒŒæ™¯çš„ç½‘ç«™<br>åœ°å€ï¼š <a href="https://www.remove.bg/">https://www.remove.bg/</a></p><h4 id="7-è½¬æ¢æ–‡ä»¶æ ¼å¼"><a href="#7-è½¬æ¢æ–‡ä»¶æ ¼å¼" class="headerlink" title="7.è½¬æ¢æ–‡ä»¶æ ¼å¼"></a>7.è½¬æ¢æ–‡ä»¶æ ¼å¼</h4><p>ä¸€ä¸ªå¯ä»¥å…è´¹è½¬æ¢æ–‡ä»¶æ ¼å¼çš„ç½‘ç«™ï¼Œï¼ˆæœ‰é™åˆ¶ï¼‰<br>åœ°å€ï¼š <a href="https://convertio.co/zh/">https://convertio.co/zh/</a></p><h4 id="8-emojiè¡¨æƒ…ç¬¦å·"><a href="#8-emojiè¡¨æƒ…ç¬¦å·" class="headerlink" title="8.emojiè¡¨æƒ…ç¬¦å·"></a>8.emojiè¡¨æƒ…ç¬¦å·</h4><p>ä¸€ä¸ªemojiè¡¨æƒ…ç¬¦å·å¤§å…¨çš„ç½‘ç«™<br>åœ°å€ï¼š <a href="https://emojipedia.org/">https://emojipedia.org/</a></p><h4 id="9-å›¾ç‰‡æ‰˜ç®¡"><a href="#9-å›¾ç‰‡æ‰˜ç®¡" class="headerlink" title="9.å›¾ç‰‡æ‰˜ç®¡"></a>9.å›¾ç‰‡æ‰˜ç®¡</h4><p>å…è´¹å›¾ç‰‡æ‰˜ç®¡çš„ç½‘ç«™ï¼Œå¯ä»¥æŠŠåšå®¢å›¾ç‰‡éƒ½æ‰˜ç®¡åˆ°è¿™<br>åœ°å€ï¼š <a href="https://postimages.org/">https://postimages.org/</a></p>]]></content>
      
      
      <categories>
          
          <category> Utils </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CSSæŠ€å·§ä¹‹DIVä¿æŒé•¿å®½æ¯”</title>
      <link href="/2022/10/13/css-aspectRatioDiv/"/>
      <url>/2022/10/13/css-aspectRatioDiv/</url>
      
        <content type="html"><![CDATA[<h3 id="CSSæŠ€å·§ä¹‹DIVä¿æŒé•¿å®½æ¯”"><a href="#CSSæŠ€å·§ä¹‹DIVä¿æŒé•¿å®½æ¯”" class="headerlink" title="CSSæŠ€å·§ä¹‹DIVä¿æŒé•¿å®½æ¯”"></a>CSSæŠ€å·§ä¹‹DIVä¿æŒé•¿å®½æ¯”</h3><p><strong>ps:</strong> <em>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨å‰ç«¯å¼€å‘ä¸­ç»å¸¸é‡åˆ°éœ€è¦ä¿æŒä¸€ä¸ªå…ƒç´ çš„é•¿å®½æ¯”ï¼Œæœ€å¸¸è§çš„å°±æ˜¯æˆ‘ä»¬çš„Imgå…ƒç´ ï¼Œä½†æ˜¯é™¤äº†imgã€vidoeè¿™ç§å¯æ›¿æ¢å…ƒç´ å…ƒç´ å…·æœ‰é•¿å®½æ¯”çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆå…¶å®ƒå…ƒç´ å¦‚æœä¿æŒé•¿å®½æ¯”å‘¢ï¼Œè¿™ç»™æˆ‘ä»¬çš„å¼€å‘å¸¦æ¥äº†è®¸å¤šä¸ä¾¿åˆ©â€¦</em></p><h4 id="æ–¹å¼1-padding-top-hack"><a href="#æ–¹å¼1-padding-top-hack" class="headerlink" title="æ–¹å¼1 padding-top-hack"></a>æ–¹å¼1 padding-top-hack</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;style&gt;        *&#123;            padding: 0;            margin: 0;        &#125;        .outer &#123;            position: relative;            height: 0;            padding-top: 56.25%;        &#125;        .inner &#123;            background-color: skyblue;            position: absolute;            top: 0;            right: 0;            bottom: 0;            left: 0;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;outer&quot;&gt;        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;    &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="æ–¹å¼2-aspect-ratio"><a href="#æ–¹å¼2-aspect-ratio" class="headerlink" title="æ–¹å¼2 aspect-ratio"></a>æ–¹å¼2 aspect-ratio</h4><p><em>è¯¥æ–¹å¼å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œæƒ³è¦çŸ¥é“å…¼å®¹æ€§å¯åœ¨<strong>Can i use</strong>ä¸ŠæŸ¥çœ‹</em></p><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;style&gt;        *&#123;            padding: 0;            margin: 0;        &#125;        .inner &#123;            background-color: skyblue;            width: 50%;            aspect-ratio: auto 2 / 1; /* åªéœ€è¿™ä¸€è¡Œ */        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç§»åŠ¨ç«¯H5å¼€å‘æŠ€å·§</title>
      <link href="/2022/10/06/html-mobileH5/"/>
      <url>/2022/10/06/html-mobileH5/</url>
      
        <content type="html"><![CDATA[<h3 id="ç§»åŠ¨ç«¯H5å¼€å‘æŠ€å·§"><a href="#ç§»åŠ¨ç«¯H5å¼€å‘æŠ€å·§" class="headerlink" title="ç§»åŠ¨ç«¯H5å¼€å‘æŠ€å·§"></a>ç§»åŠ¨ç«¯H5å¼€å‘æŠ€å·§</h3><p><strong>ps:</strong> <em>h5åœ¨ç§»åŠ¨ç«¯å¼€å‘ä¸Šå„ä¸ªæµè§ˆå™¨ä¸åŒç³»ç»Ÿä¸Šéƒ½æœ‰å¤ªå¤šçš„å·®å¼‚ï¼Œæ•´ä¸ªç§»åŠ¨ç«¯é˜¶æ®µéƒ½æ˜¯é‡å‘å¡«å‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œä»¥ä¸‹h5ç§»åŠ¨ç«¯å¼€å‘æŠ€å·§ä¾›å›å¡«å‘â€¦</em></p><h4 id="htmlæ–¹å‘"><a href="#htmlæ–¹å‘" class="headerlink" title="htmlæ–¹å‘"></a>htmlæ–¹å‘</h4><h5 id="è°ƒç”¨ç³»ç»ŸåŠŸèƒ½"><a href="#è°ƒç”¨ç³»ç»ŸåŠŸèƒ½" class="headerlink" title="è°ƒç”¨ç³»ç»ŸåŠŸèƒ½"></a>è°ƒç”¨ç³»ç»ŸåŠŸèƒ½</h5><p>ä½¿ç”¨<code>&lt;a&gt;</code>èƒ½å¿«é€Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡çš„<code>ç”µè¯/çŸ­ä¿¡/é‚®ä»¶</code>ä¸‰å¤§é€šè®¯åŠŸèƒ½ï¼Œä½¿ç”¨<code>&lt;input&gt;</code>èƒ½å¿«é€Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡çš„çš„å›¾åº“&#x2F;æ–‡ä»¶ã€‚</p><p>è¿™äº›åŠŸèƒ½æ–¹ä¾¿äº†é¡µé¢ä¸ç³»ç»Ÿçš„äº¤äº’ï¼Œå…³é”®åœ¨äºè°ƒç”¨æ ¼å¼ä¸€å®šè¦å‡†ç¡®ï¼Œå¦åˆ™ä¼šè¢«ç§»åŠ¨ç«¯æµè§ˆå™¨å¿½ç•¥ã€‚</p><pre><code class="html">    &lt;!-- æ‹¨æ‰“ç”µè¯ --&gt;    &lt;a href=&quot;tel:10086&quot;&gt;æ‹¨æ‰“ç”µè¯ç»™10086å°å§å§&lt;/a&gt;    &lt;!-- å‘é€çŸ­ä¿¡ --&gt;    &lt;a href=&quot;sms:10086&quot;&gt;å‘é€çŸ­ä¿¡ç»™10086å°å§å§&lt;/a&gt;    &lt;!-- å‘é€é‚®ä»¶ --&gt;    &lt;a href=&quot;mailto:young.joway@aliyun.com&quot;&gt;å‘é€é‚®ä»¶ç»™JowayYoung&lt;/a&gt;    &lt;!-- é€‰æ‹©ç…§ç‰‡æˆ–æ‹æ‘„ç…§ç‰‡ --&gt;    &lt;input type=&quot;file&quot; accept=&quot;image/*&quot;&gt;    &lt;!-- é€‰æ‹©è§†é¢‘æˆ–æ‹æ‘„è§†é¢‘ --&gt;    &lt;input type=&quot;file&quot; accept=&quot;video/*&quot;&gt;    &lt;!-- å¤šé€‰æ–‡ä»¶ --&gt;    &lt;input type=&quot;file&quot; multiple&gt;</code></pre><h5 id="å¿½ç•¥è‡ªåŠ¨è¯†åˆ«"><a href="#å¿½ç•¥è‡ªåŠ¨è¯†åˆ«" class="headerlink" title="å¿½ç•¥è‡ªåŠ¨è¯†åˆ«"></a>å¿½ç•¥è‡ªåŠ¨è¯†åˆ«</h5><p>æœ‰äº›ç§»åŠ¨ç«¯æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†æ•°å­—å­—æ¯ç¬¦å·è¯†åˆ«ä¸º<code>ç”µè¯/é‚®ç®±</code>å¹¶å°†å…¶æ¸²æŸ“æˆä¸Šè¿° <strong>ã€Œè°ƒç”¨ç³»ç»ŸåŠŸèƒ½ã€</strong> é‡Œçš„<code>&lt;a&gt;</code>ã€‚è™½ç„¶å¾ˆæ–¹ä¾¿å´æœ‰å¯èƒ½è¿èƒŒéœ€æ±‚ã€‚</p><pre><code class="html">    &lt;!-- å¿½ç•¥è‡ªåŠ¨è¯†åˆ«ç”µè¯ --&gt;    &lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot;&gt;    &lt;!-- å¿½ç•¥è‡ªåŠ¨è¯†åˆ«é‚®ç®± --&gt;    &lt;meta name=&quot;format-detection&quot; content=&quot;email=no&quot;&gt;    &lt;!-- å¿½ç•¥è‡ªåŠ¨è¯†åˆ«ç”µè¯å’Œé‚®ç®± --&gt;    &lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no, email=no&quot;&gt;</code></pre><h5 id="å¼¹å‡ºæ•°å­—é”®ç›˜"><a href="#å¼¹å‡ºæ•°å­—é”®ç›˜" class="headerlink" title="å¼¹å‡ºæ•°å­—é”®ç›˜"></a>å¼¹å‡ºæ•°å­—é”®ç›˜</h5><p>ä½¿ç”¨<code>&lt;input type=&quot;tel&quot;&gt;</code>å¼¹èµ·æ•°å­—é”®ç›˜ä¼šå¸¦ä¸Š#å’Œ*ï¼Œé€‚åˆè¾“å…¥ç”µè¯ã€‚æ¨èä½¿ç”¨<code>&lt;input type=&quot;number&quot; pattern=&quot;\d*&quot;&gt;</code>å¼¹èµ·æ•°å­—é”®ç›˜ï¼Œé€‚åˆè¾“å…¥éªŒè¯ç ç­‰çº¯æ•°å­—æ ¼å¼ã€‚</p><pre><code class="html">    &lt;!-- çº¯æ•°å­—å¸¦#å’Œ* --&gt;    &lt;input type=&quot;tel&quot;&gt;    &lt;!-- çº¯æ•°å­— --&gt;    &lt;input type=&quot;number&quot; pattern=&quot;\d*&quot;&gt;</code></pre><h5 id="å”¤é†’åŸç”Ÿåº”ç”¨"><a href="#å”¤é†’åŸç”Ÿåº”ç”¨" class="headerlink" title="å”¤é†’åŸç”Ÿåº”ç”¨"></a>å”¤é†’åŸç”Ÿåº”ç”¨</h5><p>é€šè¿‡<code>location.href</code>ä¸åŸç”Ÿåº”ç”¨å»ºç«‹é€šè®¯æ¸ é“ï¼Œè¿™ç§é¡µé¢ä¸å®¢æˆ·ç«¯çš„é€šè®¯æ–¹å¼ç§°ä¸º <strong>ã€ŒURL Schemeã€</strong>ï¼Œå…¶åŸºæœ¬æ ¼å¼ä¸º<code>scheme://[path][?query]</code>ï¼Œæ›´å¤š<code>URL Scheme</code>çš„è¯¦è¿°è¯·è‡ªè¡Œåº¦å¨˜ã€‚</p><ul><li><strong>ã€Œschemeã€</strong>ï¼šåº”ç”¨æ ‡è¯†ï¼Œè¡¨ç¤ºåº”ç”¨åœ¨ç³»ç»Ÿé‡Œçš„å”¯ä¸€æ ‡è¯†</li><li><strong>ã€Œpathã€</strong>ï¼šåº”ç”¨è¡Œä¸ºï¼Œè¡¨ç¤ºåº”ç”¨æŸä¸ªé¡µé¢æˆ–åŠŸèƒ½</li><li><strong>ã€Œqueryã€</strong>ï¼šåº”ç”¨å‚æ•°ï¼Œè¡¨ç¤ºåº”ç”¨é¡µé¢æˆ–åº”ç”¨åŠŸèƒ½æ‰€éœ€çš„æ¡ä»¶å‚æ•°</li></ul><p><code>URL Scheme</code>ä¸€èˆ¬ç”±å‰ç«¯ä¸å®¢æˆ·ç«¯å…±åŒåå•†ã€‚å”¤é†’åŸç”Ÿåº”ç”¨çš„å‰ææ˜¯å¿…é¡»åœ¨ç§»åŠ¨è®¾å¤‡é‡Œå®‰è£…äº†è¯¥åº”ç”¨ï¼Œæœ‰äº›ç§»åŠ¨ç«¯æµè§ˆå™¨å³ä½¿å®‰è£…äº†è¯¥åº”ç”¨ä¹Ÿæ— æ³•å”¤é†’åŸç”Ÿåº”ç”¨ï¼Œå› ä¸ºå®ƒè®¤ä¸º<code>URL Scheme</code>æ˜¯ä¸€ç§æ½œåœ¨çš„å±é™©è¡Œä¸ºè€Œç¦ç”¨å®ƒï¼Œåƒ<code>Safari</code>å’Œ<code>å¾®ä¿¡æµè§ˆå™¨</code>ã€‚è¿˜å¥½<code>å¾®ä¿¡æµè§ˆå™¨</code>å¯å¼€å¯ç™½åå•è®©<code>URL Scheme</code>æœ‰æ•ˆã€‚</p><pre><code class="html">    &lt;!-- æ‰“å¼€å¾®ä¿¡ --&gt;    &lt;a href=&quot;weixin://&quot;&gt;æ‰“å¼€å¾®ä¿¡&lt;/a&gt;    &lt;!-- æ‰“å¼€æ”¯ä»˜å® --&gt;    &lt;a href=&quot;alipays://&quot;&gt;æ‰“å¼€æ”¯ä»˜å®&lt;/a&gt;    &lt;!-- æ‰“å¼€æ”¯ä»˜å®çš„æ‰«ä¸€æ‰« --&gt;    &lt;a href=&quot;alipays://platformapi/startapp?saId=10000007&amp;qrcode=https://qr.alipay.com/bax02911brluc2xieoph6001&quot;&gt;æ‰“å¼€æ”¯ä»˜å®çš„æ‰«ä¸€æ‰«&lt;/a&gt;    &lt;!-- æ‰“å¼€æ”¯ä»˜å®çš„èš‚èšæ£®æ— --&gt;    &lt;a href=&quot;alipays://platformapi/startapp?appId=60000002&quot;&gt;æ‰“å¼€æ”¯ä»˜å®çš„èš‚èšæ£®æ—&lt;/a&gt;    &lt;!-- æ‰“å¼€æ”¯ä»˜å®å†…ç½®æµè§ˆå™¨å¹¶è·³åˆ°ç™¾åº¦ --&gt;    &lt;a href=&quot;alipays://platformapi/startapp?appId=20000067&amp;url=https%3A%2F%2Fwww.baidu.com&quot;&gt;æ‰“å¼€æ”¯ä»˜å®å†…ç½®æµè§ˆå™¨&lt;/a&gt;    </code></pre><h5 id="ç¦æ­¢é¡µé¢ç¼©æ”¾"><a href="#ç¦æ­¢é¡µé¢ç¼©æ”¾" class="headerlink" title="ç¦æ­¢é¡µé¢ç¼©æ”¾"></a>ç¦æ­¢é¡µé¢ç¼©æ”¾</h5><p>åœ¨æ™ºèƒ½æ‰‹æœºçš„æ™®åŠä¸‹ï¼Œå¾ˆå¤šç½‘ç«™éƒ½å…·å¤‡æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ä¸¤ç§æµè§ˆç‰ˆæœ¬ï¼Œå› æ­¤æ— éœ€åŒå‡»ç¼©æ”¾æŸ¥çœ‹é¡µé¢ã€‚ç¦æ­¢é¡µé¢ç¼©æ”¾å¯ä¿éšœç§»åŠ¨ç«¯æµè§ˆå™¨èƒ½æ— é—æ¼åœ°å±•ç°é¡µé¢æ‰€æœ‰å¸ƒå±€ã€‚</p><pre><code class="html">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1&quot;&gt;</code></pre><h5 id="ç¦æ­¢é¡µé¢ç¼“å­˜"><a href="#ç¦æ­¢é¡µé¢ç¼“å­˜" class="headerlink" title="ç¦æ­¢é¡µé¢ç¼“å­˜"></a>ç¦æ­¢é¡µé¢ç¼“å­˜</h5><p><strong>ã€ŒCache-Controlã€</strong>æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶ï¼Œä¸æƒ³ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜å°±ç›´æ¥ç¦æ­¢</p><pre><code class="html">    &lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache&quot;&gt;</code></pre><h5 id="ç¦æ­¢å­—æ¯å¤§å†™"><a href="#ç¦æ­¢å­—æ¯å¤§å†™" class="headerlink" title="ç¦æ­¢å­—æ¯å¤§å†™"></a>ç¦æ­¢å­—æ¯å¤§å†™</h5><p>æœ‰æ—¶åœ¨è¾“å…¥æ¡†é‡Œè¾“å…¥æ–‡æœ¬ä¼šé»˜è®¤å¼€å¯é¦–å­—æ¯å¤§å†™çº æ­£ï¼Œå°±æ˜¯è¾“å…¥é¦–å­—æ¯å°å†™ä¼šè¢«è‡ªåŠ¨çº æ­£æˆå¤§å†™ï¼Œç‰¹ä¹ˆçš„çƒ¦ã€‚ç›´æ¥å£°æ˜<code>autocapitalize=off</code>å…³é—­é¦–å­—æ¯å¤§å†™åŠŸèƒ½å’Œ<code>autocorrect=off</code>å…³é—­çº æ­£åŠŸèƒ½</p><pre><code class="html">    &lt;input autocapitalize=&quot;off&quot; autocorrect=&quot;off&quot;&gt;</code></pre><h5 id="é’ˆå¯¹Safarié…ç½®"><a href="#é’ˆå¯¹Safarié…ç½®" class="headerlink" title="é’ˆå¯¹Safarié…ç½®"></a>é’ˆå¯¹Safarié…ç½®</h5><pre><code class="html">    &lt;!-- è®¾ç½®Safariå…¨å±ï¼Œåœ¨iOS7+æ— æ•ˆ --&gt;    &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;    &lt;!-- æ”¹å˜SafariçŠ¶æ€æ æ ·å¼ï¼Œå¯é€‰default/black/black-translucentï¼Œéœ€åœ¨ä¸Šè¿°å…¨å±æ¨¡å¼ä¸‹æ‰æœ‰æ•ˆ --&gt;    &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black&quot;&gt;    &lt;!-- æ·»åŠ é¡µé¢å¯åŠ¨å ä½å›¾ --&gt;    &lt;link rel=&quot;apple-touch-startup-image&quot; href=&quot;pig.jpg&quot; media=&quot;(device-width: 375px)&quot;&gt;    &lt;!-- ä¿å­˜ç½‘ç«™åˆ°æ¡Œé¢æ—¶æ·»åŠ å›¾æ ‡ --&gt;    &lt;link rel=&quot;apple-touch-icon&quot; sizes=&quot;76x76&quot; href=&quot;pig.jpg&quot;&gt;    &lt;!-- ä¿å­˜ç½‘ç«™åˆ°æ¡Œé¢æ—¶æ·»åŠ å›¾æ ‡ä¸”æ¸…é™¤é»˜è®¤å…‰æ³½ --&gt;    &lt;link rel=&quot;apple-touch-icon-precomposed&quot; href=&quot;pig.jpg&quot;&gt;</code></pre><h5 id="é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®"><a href="#é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®" class="headerlink" title="é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®"></a>é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®</h5><p>è´´ä¸€äº›å…¶ä»–æµè§ˆå™¨è¾ƒé›¶æ•£ä¸”å°‘ç”¨çš„é…ç½®ï¼Œä¸»è¦æ˜¯å¸¸ç”¨çš„<code>QQæµè§ˆå™¨</code>ã€<code>UCæµè§ˆå™¨</code>å’Œ<code>360æµè§ˆå™¨</code>ã€‚<strong>ä½†æ˜¯</strong>ï¼Œæ–°ç‰ˆçš„<code>QQæµè§ˆå™¨</code>å’Œ<code>UCæµè§ˆå™¨</code>å·²ä¸æ”¯æŒä»¥ä¸‹<code>&lt;meta&gt;</code>å£°æ˜äº†ã€‚</p><pre><code class="html">    &lt;!-- å¼ºåˆ¶QQæµè§ˆå™¨ç«–å± --&gt;    &lt;meta name=&quot;x5-orientation&quot; content=&quot;portrait&quot;&gt;    &lt;!-- å¼ºåˆ¶QQæµè§ˆå™¨å…¨å± --&gt;    &lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot;&gt;    &lt;!-- å¼€å¯QQæµè§ˆå™¨åº”ç”¨æ¨¡å¼ --&gt;    &lt;meta name=&quot;x5-page-mode&quot; content=&quot;app&quot;&gt;    &lt;!-- å¼ºåˆ¶UCæµè§ˆå™¨ç«–å± --&gt;    &lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot;&gt;    &lt;!-- å¼ºåˆ¶UCæµè§ˆå™¨å…¨å± --&gt;    &lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt;    &lt;!-- å¼€å¯UCæµè§ˆå™¨åº”ç”¨æ¨¡å¼ --&gt;    &lt;meta name=&quot;browsermode&quot; content=&quot;application&quot;&gt;    &lt;!-- å¼€å¯360æµè§ˆå™¨æé€Ÿæ¨¡å¼ --&gt;    &lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;</code></pre><h5 id="è®©-activeæœ‰æ•ˆï¼Œè®©-hoveræ— æ•ˆ"><a href="#è®©-activeæœ‰æ•ˆï¼Œè®©-hoveræ— æ•ˆ" class="headerlink" title="è®©:activeæœ‰æ•ˆï¼Œè®©:hoveræ— æ•ˆ"></a>è®©:activeæœ‰æ•ˆï¼Œè®©:hoveræ— æ•ˆ</h5><p>æœ‰äº›å…ƒç´ çš„<code>:active</code>å¯èƒ½ä¼šæ— æ•ˆï¼Œè€Œå…ƒç´ çš„<code>:hover</code>åœ¨ç‚¹å‡»åä¼šä¸€ç›´å¤„äºç‚¹å‡»çŠ¶æ€ï¼Œéœ€ç‚¹å‡»å…¶ä»–ä½ç½®æ‰èƒ½è§£é™¤ç‚¹å‡»çŠ¶æ€ã€‚ç»™<code>&lt;body&gt;</code>æ³¨å†Œä¸€ä¸ª<strong>ç©º</strong>çš„<code>touchstart</code>äº‹ä»¶å¯å°†ä¸¤ç§çŠ¶æ€åè½¬ã€‚</p><pre><code class="html">    &lt;body ontouchstart&gt;&lt;/body&gt;</code></pre><h4 id="cssæ–¹å‘"><a href="#cssæ–¹å‘" class="headerlink" title="cssæ–¹å‘"></a>cssæ–¹å‘</h4><h5 id="è‡ªåŠ¨é€‚åº”å¸ƒå±€"><a href="#è‡ªåŠ¨é€‚åº”å¸ƒå±€" class="headerlink" title="è‡ªåŠ¨é€‚åº”å¸ƒå±€"></a>è‡ªåŠ¨é€‚åº”å¸ƒå±€</h5><p>é’ˆå¯¹ç§»åŠ¨ç«¯ï¼Œé€šå¸¸ä¼šç»“åˆJSä¾æ®å±å¹•å®½åº¦ä¸è®¾è®¡å›¾å®½åº¦çš„æ¯”ä¾‹åŠ¨æ€å£°æ˜<code>&lt;html&gt;</code>çš„<code>font-size</code>ï¼Œä»¥<code>rem</code>ä¸ºé•¿åº¦å•ä½å£°æ˜æ‰€æœ‰èŠ‚ç‚¹çš„å‡ ä½•å±æ€§ï¼Œè¿™æ ·å°±èƒ½åšåˆ°å¤§éƒ¨åˆ†ç§»åŠ¨è®¾å¤‡çš„é¡µé¢å…¼å®¹ï¼Œå…¼å®¹å‡ºå…¥è¾ƒå¤§çš„åœ°æ–¹å†é€šè¿‡åª’ä½“æŸ¥è¯¢åšç‰¹åˆ«å¤„ç†ã€‚<br>é€šè¿‡remå¸ƒå±€æ¯”ä¾‹è®¾ç½®æˆ<code>1rem=100px</code>ï¼Œå³åœ¨è®¾è®¡å›¾ä¸Š<code>100px</code>é•¿åº¦åœ¨CSSä»£ç ä¸Šä½¿ç”¨<code>1rem</code>è¡¨ç¤ºã€‚å°½å¯èƒ½ä½¿ç”¨<strong>1rem&#x3D;100px</strong>çš„æ¯”ä¾‹ï¼Œå› ä¸ºå“åº”å¼å¸ƒå±€åœ¨pcç«¯ä¹Ÿéœ€è¦å“åº”ï¼Œä½†æ˜¯é¡µé¢å­˜åœ¨é»˜è®¤æœ€å°å­—å·ï¼Œæ‰€ä»¥å°½å¯èƒ½æ”¾å¤§<strong>html</strong>çš„<strong>font-size</strong>ï¼Œå³è°ƒå¤§<strong>1remå’Œpxçš„æ¯”ä¾‹</strong>ã€‚</p><p>cssæ–¹å¼</p><pre><code class="css">    html &#123;        font-size: calc(100vw / 7.5);    &#125;</code></pre><p>jsæ–¹å¼</p><pre><code class="js">    function AutoResponse(width = 750) &#123;        const target = document.documentElement;        if (target.clientWidth &gt;= 600) &#123;            target.style.fontSize = &quot;80px&quot;;        &#125; else &#123;            target.style.fontSize = target.clientWidth / width * 100 + &quot;px&quot;;        &#125;    &#125;    AutoResponse();    window.addEventListener(&quot;resize&quot;, () =&gt; AutoResponse());</code></pre><p>è‹¥ä»¥<strong>iPad Pro</strong>åˆ†è¾¨ç‡<strong>1024px</strong>ä¸ºç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯çš„æ–­ç‚¹ï¼Œè¿˜å¯ç»“åˆåª’ä½“æŸ¥è¯¢åšæ–­ç‚¹å¤„ç†ã€‚<strong>1024px</strong>ä»¥ä¸‹ä½¿ç”¨<strong>remå¸ƒå±€</strong>ï¼Œå¦åˆ™ä¸ä½¿ç”¨<strong>remå¸ƒå±€</strong></p><pre><code class="css">    @media screen and (max-width: 1024px) &#123;        html &#123;            font-size: calc(100vw / 7.5);        &#125;    &#125;</code></pre><h5 id="è‡ªåŠ¨é€‚åº”èƒŒæ™¯"><a href="#è‡ªåŠ¨é€‚åº”èƒŒæ™¯" class="headerlink" title="è‡ªåŠ¨é€‚åº”èƒŒæ™¯"></a>è‡ªåŠ¨é€‚åº”èƒŒæ™¯</h5><p>ä½¿ç”¨<code>remå¸ƒå±€</code>å£°æ˜ä¸€ä¸ªå…ƒç´ èƒŒæ™¯ï¼Œå¤šæ•°æƒ…å†µä¼šå°†<code>background-size</code>å£°æ˜ä¸º<code>cover</code>ã€‚å¯èƒ½åœ¨è®¾è®¡å›¾å¯¹åº”åˆ†è¾¨ç‡çš„ç§»åŠ¨è®¾å¤‡ä¸‹ï¼ŒèƒŒæ™¯ä¼šå®Œç¾è´´åˆæ˜¾ç¤ºï¼Œä½†æ¢åˆ°å…¶ä»–åˆ†è¾¨ç‡çš„ç§»åŠ¨è®¾å¤‡ä¸‹å°±ä¼šå‡ºç°å·¦å³ç©ºå‡º1pxåˆ°npxçš„ç©ºéš™ã€‚</p><p>æ­¤æ—¶å°†<code>background-size</code>å£°æ˜ä¸º<code>100% 100%</code>ï¼Œè·Ÿéšwidthå’Œheightçš„å˜åŒ–è€Œå˜åŒ–ã€‚åæ­£widthå’Œheightéƒ½æ˜¯é‡å¥½çš„å®é™…å°ºå¯¸ã€‚</p><pre><code class="css">    .elem &#123;        width: 1rem;        height: 1rem;        background: url(&quot;pig.jpg&quot;) no-repeat center/100% 100%;    &#125;</code></pre><h5 id="ç›‘å¬å±å¹•æ—‹è½¬"><a href="#ç›‘å¬å±å¹•æ—‹è½¬" class="headerlink" title="ç›‘å¬å±å¹•æ—‹è½¬"></a>ç›‘å¬å±å¹•æ—‹è½¬</h5><p>é€šè¿‡cssçš„æ–¹å¼è°ƒæ•´<strong>æ¨ªå±</strong>ã€<strong>ç«–å±</strong>çš„æ ·å¼</p><pre><code class="css">    /* ç«–å± */    @media all and (orientation: portrait) &#123;        /* è‡ªå®šä¹‰æ ·å¼ */    &#125;    /* æ¨ªå± */    @media all and (orientation: landscape) &#123;        /* è‡ªå®šä¹‰æ ·å¼ */    &#125;</code></pre><h5 id="æ”¯æŒå¼¹æ€§æ»šåŠ¨"><a href="#æ”¯æŒå¼¹æ€§æ»šåŠ¨" class="headerlink" title="æ”¯æŒå¼¹æ€§æ»šåŠ¨"></a>æ”¯æŒå¼¹æ€§æ»šåŠ¨</h5><p>åœ¨è‹¹æœç³»ç»Ÿä¸Šé<code>&lt;body&gt;</code>å…ƒç´ çš„æ»šåŠ¨æ“ä½œå¯èƒ½ä¼šå­˜åœ¨å¡é¡¿ï¼Œä½†å®‰å“ç³»ç»Ÿä¸ä¼šå‡ºç°è¯¥æƒ…å†µã€‚é€šè¿‡å£°æ˜<code>overflow-scrolling:touch</code>è°ƒç”¨ç³»ç»ŸåŸç”Ÿæ»šåŠ¨äº‹ä»¶ä¼˜åŒ–<em>å¼¹æ€§æ»šåŠ¨</em>ï¼Œå¢åŠ é¡µé¢æ»šåŠ¨çš„æµç•…åº¦ã€‚</p><pre><code class="css">    body &#123;        -webkit-overflow-scrolling: touch;    &#125;    .elem &#123;        overflow: auto;    &#125;</code></pre><h5 id="ç¦æ­¢æ»šåŠ¨ä¼ æ’­"><a href="#ç¦æ­¢æ»šåŠ¨ä¼ æ’­" class="headerlink" title="ç¦æ­¢æ»šåŠ¨ä¼ æ’­"></a>ç¦æ­¢æ»šåŠ¨ä¼ æ’­</h5><p>ä¸æ¡Œé¢ç«¯æµè§ˆå™¨ä¸ä¸€æ ·ï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨æœ‰ä¸€ä¸ªå¥‡æ€ªè¡Œä¸ºã€‚å½“é¡µé¢åŒ…å«å¤šä¸ªæ»šåŠ¨åŒºåŸŸæ—¶ï¼Œæ»šå®Œä¸€ä¸ªåŒºåŸŸåè‹¥è¿˜å­˜åœ¨æ»šåŠ¨åŠ¨é‡åˆ™ä¼šå°†è¿™äº›å‰©ä½™åŠ¨é‡ä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªæ»šåŠ¨åŒºåŸŸï¼Œé€ æˆè¯¥åŒºåŸŸä¹Ÿæ»šåŠ¨èµ·æ¥ã€‚è¿™ç§è¡Œä¸ºç§°ä¸º <strong>ã€Œæ»šåŠ¨ä¼ æ’­ã€</strong>ã€‚</p><pre><code class="css">    .elem &#123;        overscroll-behavior: contain;    &#125;</code></pre><h5 id="ç¦æ­¢å±å¹•æŠ–åŠ¨"><a href="#ç¦æ­¢å±å¹•æŠ–åŠ¨" class="headerlink" title="ç¦æ­¢å±å¹•æŠ–åŠ¨"></a>ç¦æ­¢å±å¹•æŠ–åŠ¨</h5><p>å¯¹äºä¸€äº›çªç„¶å‡ºç°æ»šåŠ¨æ¡çš„é¡µé¢ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå·¦å³æŠ–åŠ¨çš„ä¸è‰¯å½±å“ã€‚åœ¨ä¸€ä¸ªæ»šåŠ¨å®¹å™¨é‡Œï¼Œæ‰“å¼€å¼¹çª—å°±éšè—æ»šåŠ¨æ¡ï¼Œå…³é—­å¼¹çª—å°±æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œæ¥å›æ“ä½œä¼šè®©å±å¹•æŠ–åŠ¨èµ·æ¥ã€‚æå‰å£°æ˜æ»šåŠ¨å®¹å™¨çš„padding-rightä¸ºæ»šåŠ¨æ¡å®½åº¦ï¼Œå°±èƒ½æœ‰æ•ˆæ¶ˆé™¤è¿™ä¸ªä¸è‰¯å½±å“ã€‚</p><p>æ¯ä¸ªç§»åŠ¨ç«¯æµè§ˆå™¨çš„æ»šåŠ¨æ¡å®½åº¦éƒ½æœ‰å¯èƒ½ä¸ä¸€è‡´ï¼Œç”šè‡³ä¸ä¸€å®šå ä½ç½®ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼èƒ½é—´æ¥è®¡ç®—å‡ºæ»šåŠ¨æ¡çš„å®½åº¦ã€‚100vwä¸ºè§†çª—å®½åº¦ï¼Œ100%ä¸ºæ»šåŠ¨å®¹å™¨å†…å®¹å®½åº¦ï¼Œç›¸å‡å°±æ˜¯æ»šåŠ¨æ¡å®½åº¦ï¼Œå¦¥å¦¥çš„åŠ¨æ€è®¡ç®—ã€‚</p><pre><code class="css">    body &#123;        padding-right: calc(100vw - 100%);    &#125;</code></pre><h5 id="ç¦æ­¢é•¿æŒ‰æ“ä½œ"><a href="#ç¦æ­¢é•¿æŒ‰æ“ä½œ" class="headerlink" title="ç¦æ­¢é•¿æŒ‰æ“ä½œ"></a>ç¦æ­¢é•¿æŒ‰æ“ä½œ</h5><p>æœ‰æ—¶ä¸æƒ³ç”¨æˆ·é•¿æŒ‰å…ƒç´ å‘¼å‡ºèœå•è¿›è¡Œ<strong>ç‚¹é“¾æ¥ã€æ‰“ç”µè¯ã€å‘é‚®ä»¶ã€ä¿å­˜å›¾ç‰‡æˆ–æ‰«æäºŒç»´ç </strong>ç­‰æ“ä½œï¼Œå£°æ˜<code>touch-callout:none</code>ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ“ä½œã€‚</p><p>æœ‰æ—¶ä¸æƒ³ç”¨æˆ·å¤åˆ¶ç²˜è´´ç›—æ–‡æ¡ˆï¼Œå£°æ˜<code>user-select:none</code>ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ“ä½œå’Œé€‰æ‹©å¤åˆ¶ã€‚</p><pre><code class="css">    .elem &#123;        /* pointer-events: none; */ /* å¾®ä¿¡æµè§ˆå™¨è¿˜éœ€é™„åŠ è¯¥å±æ€§æ‰æœ‰æ•ˆ */        user-select: none; /* ç¦æ­¢é•¿æŒ‰é€‰æ‹©æ–‡å­— */        -webkit-touch-callout: none;    &#125;</code></pre><h5 id="ç¦æ­¢å­—ä½“è°ƒæ•´"><a href="#ç¦æ­¢å­—ä½“è°ƒæ•´" class="headerlink" title="ç¦æ­¢å­—ä½“è°ƒæ•´"></a>ç¦æ­¢å­—ä½“è°ƒæ•´</h5><p>æ—‹è½¬å±å¹•å¯èƒ½ä¼šæ”¹å˜å­—ä½“å¤§å°ï¼Œå£°æ˜<code>text-size-adjust:100%</code>è®©å­—ä½“å¤§å°ä¿æŒä¸å˜ã€‚</p><pre><code class="css">   * &#123;        text-size-adjust: 100%;    &#125;</code></pre><h5 id="ç¦æ­¢åŠ¨ç”»é—ªå±"><a href="#ç¦æ­¢åŠ¨ç”»é—ªå±" class="headerlink" title="ç¦æ­¢åŠ¨ç”»é—ªå±"></a>ç¦æ­¢åŠ¨ç”»é—ªå±</h5><p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ·»åŠ åŠ¨ç”»ï¼Œå¤šæ•°æƒ…å†µä¼šå‡ºç°é—ªå±ï¼Œç»™åŠ¨ç”»å…ƒç´ çš„çˆ¶å…ƒç´ æ„é€ ä¸€ä¸ª3Dç¯å¢ƒå°±èƒ½è®©åŠ¨ç”»ç¨³å®šè¿è¡Œäº†ã€‚</p><pre><code class="css">   .elem &#123;        perspective: 1000;        backface-visibility: hidden;        transform-style: preserve-3d;    &#125;</code></pre><h5 id="ç¾åŒ–è¡¨å•å¤–è§‚"><a href="#ç¾åŒ–è¡¨å•å¤–è§‚" class="headerlink" title="ç¾åŒ–è¡¨å•å¤–è§‚"></a>ç¾åŒ–è¡¨å•å¤–è§‚</h5><pre><code class="css">    button,    input,    select,    textarea &#123;        appearance: none;        /* è‡ªå®šä¹‰æ ·å¼ */    &#125;</code></pre><h5 id="ç¾åŒ–æ»šåŠ¨å ä½"><a href="#ç¾åŒ–æ»šåŠ¨å ä½" class="headerlink" title="ç¾åŒ–æ»šåŠ¨å ä½"></a>ç¾åŒ–æ»šåŠ¨å ä½</h5><p>é€šè¿‡<code>::-webkit-scrollbar-*</code>ç¾åŒ–æ»šåŠ¨æ¡</p><ul><li><strong>ã€Œ::-webkit-scrollbarã€</strong>ï¼šæ»šåŠ¨æ¡æ•´ä½“éƒ¨åˆ†</li><li><strong>ã€Œ::-webkit-scrollbar-trackã€</strong>ï¼šæ»šåŠ¨æ¡è½¨é“éƒ¨åˆ†</li><li><strong>ã€Œ::-webkit-scrollbar-thumbã€</strong>ï¼šæ»šåŠ¨æ¡æ»‘å—éƒ¨åˆ†</li></ul><pre><code class="css">    ::-webkit-scrollbar &#123;        width: 6px;        height: 6px;        background-color: transparent;    &#125;    ::-webkit-scrollbar-track &#123;        background-color: transparent;    &#125;    ::-webkit-scrollbar-thumb &#123;        border-radius: 3px;        background-image: linear-gradient(135deg, #09f, #3c9);    &#125;</code></pre><h5 id="ç¾åŒ–è¾“å…¥å ä½"><a href="#ç¾åŒ–è¾“å…¥å ä½" class="headerlink" title="ç¾åŒ–è¾“å…¥å ä½"></a>ç¾åŒ–è¾“å…¥å ä½</h5><pre><code class="css">    input::-webkit-input-placeholder &#123;        color: #66f;    &#125;</code></pre><h5 id="å¯¹é½è¾“å…¥å ä½"><a href="#å¯¹é½è¾“å…¥å ä½" class="headerlink" title="å¯¹é½è¾“å…¥å ä½"></a>å¯¹é½è¾“å…¥å ä½</h5><p>æœ‰å¼ºè¿«ç—‡çš„åŒå­¦æ€»ä¼šè§‰å¾—è¾“å…¥æ¡†æ–‡æœ¬ä½ç½®æ•´ä½“åä¸Šï¼Œæ„Ÿè§‰æœªå±…ä¸­å¿ƒé‡Œå°±ç—’ç—’çš„ã€‚<strong>æ¡Œé¢ç«¯æµè§ˆå™¨</strong>é‡Œå£°æ˜<code>line-height</code>ç­‰äº<code>height</code>å°±èƒ½è§£å†³ï¼Œä½†<strong>ç§»åŠ¨ç«¯æµè§ˆå™¨</strong>é‡Œè¿˜æ˜¯æœªèƒ½è§£å†³ï¼Œéœ€å°†<code>line-height</code>å£°æ˜ä¸º<code>normal</code>æ‰è¡Œã€‚</p><pre><code class="css">    input &#123;        line-height: normal;    &#125;</code></pre><h5 id="å¯¹é½ä¸‹æ‹‰é€‰é¡¹"><a href="#å¯¹é½ä¸‹æ‹‰é€‰é¡¹" class="headerlink" title="å¯¹é½ä¸‹æ‹‰é€‰é¡¹"></a>å¯¹é½ä¸‹æ‹‰é€‰é¡¹</h5><pre><code class="css">    select option &#123;        direction: rtl;    &#125;</code></pre><h5 id="æç»˜1pxè¾¹æ¡†"><a href="#æç»˜1pxè¾¹æ¡†" class="headerlink" title="æç»˜1pxè¾¹æ¡†"></a>æç»˜1pxè¾¹æ¡†</h5><pre><code class="css">    .elem &#123;        position: relative;        width: 200px;        height: 80px;        &amp;::after &#123;            position: absolute;            left: 0;            top: 0;            border: 1px solid #f66;            width: 200%;            height: 200%;            content: &quot;&quot;;            transform: scale(.5);            transform-origin: left top;        &#125;    &#125;</code></pre><h5 id="æ–‡æœ¬æº¢å‡ºçœç•¥"><a href="#æ–‡æœ¬æº¢å‡ºçœç•¥" class="headerlink" title="æ–‡æœ¬æº¢å‡ºçœç•¥"></a>æ–‡æœ¬æº¢å‡ºçœç•¥</h5><pre><code class="css">    .elem &#123;        width: 400px;        line-height: 30px;        font-size: 20px;        /* å•è¡Œæº¢å‡º */        overflow: hidden;        text-overflow: ellipsis;        white-space: nowrap;         /* å¤šè¡Œæº¢å‡º */        display: -webkit-box;        overflow: hidden;        text-overflow: ellipsis;        -webkit-line-clamp: 3;        -webkit-box-orient: vertical;    &#125;</code></pre><h4 id="jsæ–¹å‘"><a href="#jsæ–¹å‘" class="headerlink" title="jsæ–¹å‘"></a>jsæ–¹å‘</h4><h5 id="å¾€è¿”åˆ·æ–°"><a href="#å¾€è¿”åˆ·æ–°" class="headerlink" title="å¾€è¿”åˆ·æ–°"></a>å¾€è¿”åˆ·æ–°</h5><p>ç‚¹å‡»ç§»åŠ¨ç«¯æµè§ˆå™¨çš„å‰è¿›æŒ‰é’®æˆ–åé€€æŒ‰é’®ï¼Œæœ‰æ—¶ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œæ—§é¡µé¢çš„JSä»£ç ï¼Œè¿™ä¸å¾€è¿”ç¼“å­˜æœ‰å…³ã€‚è¿™ç§æƒ…å†µåœ¨<strong>Safari</strong>ä¸Šç‰¹åˆ«æ˜æ˜¾ï¼Œç®€å•æ¦‚æ‹¬å°±æ˜¯å¾€è¿”é¡µé¢æ— æ³•åˆ·æ–°ã€‚</p><p><strong>ã€Œå¾€è¿”ç¼“å­˜ã€</strong>æŒ‡æµè§ˆå™¨ä¸ºäº†åœ¨é¡µé¢é—´æ‰§è¡Œå‰è¿›åé€€æ“ä½œæ—¶èƒ½æ‹¥æœ‰æ›´æµç•…ä½“éªŒçš„ä¸€ç§ç­–ç•¥ï¼Œä»¥ä¸‹ç®€ç§°<strong>BFCache</strong>ã€‚è¯¥ç­–ç•¥å…·ä½“è¡¨ç°ä¸ºï¼šå½“ç”¨æˆ·å‰å¾€æ–°é¡µé¢å‰å°†æ—§é¡µé¢çš„DOMçŠ¶æ€ä¿å­˜åœ¨<strong>BFCache</strong>é‡Œï¼Œå½“ç”¨æˆ·è¿”å›æ—§é¡µé¢å‰å°†æ—§é¡µé¢çš„DOMçŠ¶æ€ä»<strong>BFCache</strong>é‡Œå–å‡ºå¹¶åŠ è½½ã€‚å¤§éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨éƒ½ä¼šéƒ¨ç½²<strong>BFCache</strong>ï¼Œå¯å¤§å¤§èŠ‚çœæ¥å£è¯·æ±‚çš„æ—¶é—´å’Œå¸¦å®½ã€‚</p><p><code>pageshow</code>äº‹ä»¶åœ¨æ¯æ¬¡é¡µé¢åŠ è½½æ—¶éƒ½ä¼šè§¦å‘ï¼Œæ— è®ºæ˜¯é¦–æ¬¡åŠ è½½è¿˜æ˜¯å†æ¬¡åŠ è½½éƒ½ä¼šè§¦å‘ï¼Œè¿™å°±æ˜¯å®ƒä¸loadäº‹ä»¶çš„åŒºåˆ«ã€‚<code>pageshow</code>äº‹ä»¶æš´éœ²çš„<code>persisted</code>å¯åˆ¤æ–­é¡µé¢æ˜¯å¦ä»<strong>BFCache</strong>é‡Œå–å‡ºã€‚</p><pre><code class="js">    window.addEventListener(&quot;pageshow&quot;, e =&gt; e.persisted &amp;&amp; location.reload());</code></pre><h5 id="è‡ªåŠ¨æ’­æ”¾åª’ä½“"><a href="#è‡ªåŠ¨æ’­æ”¾åª’ä½“" class="headerlink" title="è‡ªåŠ¨æ’­æ”¾åª’ä½“"></a>è‡ªåŠ¨æ’­æ”¾åª’ä½“</h5><p>å¸¸è§åª’ä½“å…ƒç´ åŒ…æ‹¬éŸ³é¢‘<code>&lt;audio&gt;</code>å’Œè§†é¢‘<code>&lt;video&gt;</code>ï¼Œä¸ºäº†è®©ç”¨æˆ·å¾—åˆ°æ›´å¥½çš„åª’ä½“æ’­æ”¾ä½“éªŒä¸ä¸ç›²ç›®æµªè´¹ç”¨æˆ·æµé‡ï¼Œå¤§éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨éƒ½æ˜ç¡®è§„å®šä¸èƒ½è‡ªåŠ¨æ’­æ”¾åª’ä½“æˆ–é»˜è®¤å±è”½<code>autoplay</code>ã€‚ä¸ºäº†èƒ½è®©åª’ä½“åœ¨é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ’­æ”¾ï¼Œåªèƒ½æ˜¾å¼å£°æ˜æ’­æ”¾ã€‚</p><pre><code class="js">    const audio = document.getElementById(&quot;audio&quot;);    const video = document.getElementById(&quot;video&quot;);    audio.play();    video.play();</code></pre><p>åœ¨è‹¹æœç³»ç»Ÿä¸Šæ˜ç¡®è§„å®šç”¨æˆ·äº¤äº’æ“ä½œå¼€å§‹åæ‰èƒ½æ’­æ”¾åª’ä½“ï¼Œæœªå¾—åˆ°ç”¨æˆ·å“åº”ä¼šè¢«<strong>Safari</strong>è‡ªåŠ¨æ‹¦æˆªï¼Œå› æ­¤éœ€ç›‘å¬ç”¨æˆ·é¦–æ¬¡è§¦æ‘¸æ“ä½œå¹¶è§¦å‘åª’ä½“è‡ªåŠ¨æ’­æ”¾ï¼Œè€Œè¯¥ç›‘å¬ä»…æ­¤ä¸€æ¬¡ã€‚</p><pre><code class="js">    document.body.addEventListener(&quot;touchstart&quot;, () =&gt; &#123;        // æ‰§è¡Œä¸Šé¢åª’ä½“è‡ªåŠ¨æ’­æ”¾ä»£ç             &#125;, &#123; once: true &#125;);</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vueæ€§èƒ½ä¼˜åŒ–æ–¹å¼</title>
      <link href="/2022/10/06/vue-optimizationCode/"/>
      <url>/2022/10/06/vue-optimizationCode/</url>
      
        <content type="html"><![CDATA[<h3 id="Vueæ€§èƒ½ä¼˜åŒ–æ–¹å¼"><a href="#Vueæ€§èƒ½ä¼˜åŒ–æ–¹å¼" class="headerlink" title="Vueæ€§èƒ½ä¼˜åŒ–æ–¹å¼"></a>Vueæ€§èƒ½ä¼˜åŒ–æ–¹å¼</h3><p><strong>ps:</strong> <em>æˆ‘ä»¬åœ¨ä½¿ç”¨ Vue æˆ–å…¶ä»–æ¡†æ¶çš„æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ–å¤šæˆ–å°‘çš„éƒ½ä¼šé‡åˆ°ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå°½ç®¡ Vue å†…éƒ¨å·²ç»å¸®åŠ©æˆ‘ä»¬åšäº†è®¸å¤šä¼˜åŒ–ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›é—®é¢˜æ˜¯éœ€è¦æˆ‘ä»¬ä¸»åŠ¨å»é¿å…çš„ã€‚æˆ‘åœ¨æˆ‘çš„æ—¥å¸¸å¼€ä¸­ï¼Œä»¥åŠç½‘ä¸Šå„ç§å¤§ä½¬çš„æ–‡ç« ä¸­æ€»ç»“äº†ä¸€äº›å®¹æ˜“äº§ç”Ÿæ€§èƒ½é—®é¢˜çš„åœºæ™¯ä»¥åŠé’ˆå¯¹è¿™äº›é—®é¢˜ä¼˜åŒ–çš„æŠ€å·§ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥æ¢è®¨ä¸‹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</em></p><h4 id="ä¸€ã€ä½¿ç”¨v-slot-slotName"><a href="#ä¸€ã€ä½¿ç”¨v-slot-slotName" class="headerlink" title="ä¸€ã€ä½¿ç”¨v-slot:slotName"></a>ä¸€ã€ä½¿ç”¨v-slot:slotName</h4><p><code>v-slot</code>æ˜¯ 2.6 æ–°å¢çš„è¯­æ³•ï¼Œå…·ä½“å¯æŸ¥çœ‹:Vue2.6ï¼Œ2.6 å‘å¸ƒå·²ç»æ˜¯å¿«ä¸¤å¹´å‰çš„äº‹æƒ…äº†ï¼Œä½†æ˜¯ç°åœ¨ä»ç„¶æœ‰ä¸å°‘äººä»ç„¶åœ¨ä½¿ç”¨<code>slot=&quot;slotName&quot;</code>è¿™ä¸ªè¯­æ³•ã€‚è™½ç„¶è¿™ä¸¤ä¸ªè¯­æ³•éƒ½èƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œä½†æ˜¯å†…éƒ¨çš„é€»è¾‘ç¡®å®ä¸ä¸€æ ·çš„ï¼Œä¸‹é¢æ¥çœ‹ä¸‹è¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™ä¸¤ç§è¯­æ³•åˆ†åˆ«ä¼šè¢«ç¼–è¯‘æˆä»€ä¹ˆï¼š</p><h5 id="v-slot-slotNameç¼–è¯‘"><a href="#v-slot-slotNameç¼–è¯‘" class="headerlink" title="v-slot:slotNameç¼–è¯‘"></a>v-slot:slotNameç¼–è¯‘</h5><pre><code>    //ç¼–è¯‘å‰     &lt;child&gt;        &lt;template v-slot:name&gt;&#123;&#123;name&#125;&#125;&lt;/template&gt;    &lt;/child&gt;    // ç¼–è¯‘å    function render() &#123;        with (this) &#123;            return _c(&#39;child&#39;, &#123;            scopedSlots: _u([                &#123;                key: &#39;name&#39;,                fn: function () &#123;                    return [_v(_s(name))]                &#125;,                proxy: true                &#125;            ])            &#125;)        &#125;    &#125;</code></pre><h5 id="slot-x3D-â€slotNameâ€ç¼–è¯‘"><a href="#slot-x3D-â€slotNameâ€ç¼–è¯‘" class="headerlink" title="slot&#x3D;â€slotNameâ€ç¼–è¯‘"></a>slot&#x3D;â€slotNameâ€ç¼–è¯‘</h5><pre><code>    //ç¼–è¯‘å‰     &lt;child&gt;        &lt;template v-slot:name&gt;&#123;&#123;name&#125;&#125;&lt;/template&gt;    &lt;/child&gt;    // ç¼–è¯‘å    function render() &#123;        with (this) &#123;            return _c(            &#39;child&#39;,            [                _c(                &#39;template&#39;,                &#123;                    slot: &#39;name&#39;                &#125;,                [_v(_s(name))]                )            ],            )        &#125;    &#125;</code></pre><h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><p>é€šè¿‡ç¼–è¯‘åçš„ä»£ç å¯ä»¥å‘ç°ï¼Œ<strong>æ—§çš„å†™æ³•æ˜¯å°†æ’æ§½å†…å®¹ä½œä¸º children æ¸²æŸ“çš„ï¼Œä¼šåœ¨çˆ¶ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¸­åˆ›å»ºï¼Œæ’æ§½å†…å®¹çš„ä¾èµ–ä¼šè¢«çˆ¶ç»„ä»¶æ”¶é›†ï¼ˆname çš„ dep æ”¶é›†åˆ°çˆ¶ç»„ä»¶çš„æ¸²æŸ“ watcherï¼‰ï¼Œè€Œæ–°çš„å†™æ³•å°†æ’æ§½å†…å®¹æ”¾åœ¨äº† scopedSlots ä¸­ï¼Œä¼šåœ¨å­ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¸­è°ƒç”¨ï¼Œæ’æ§½å†…å®¹çš„ä¾èµ–ä¼šè¢«å­ç»„ä»¶æ”¶é›†ï¼ˆname çš„ dep æ”¶é›†åˆ°å­ç»„ä»¶çš„æ¸²æŸ“ watcherï¼‰ï¼Œ</strong>æœ€ç»ˆå¯¼è‡´çš„ç»“æœå°±æ˜¯ï¼šå½“æˆ‘ä»¬ä¿®æ”¹ name è¿™ä¸ªå±æ€§æ—¶ï¼Œæ—§çš„å†™æ³•æ˜¯è°ƒç”¨çˆ¶ç»„ä»¶çš„æ›´æ–°ï¼ˆè°ƒç”¨çˆ¶ç»„ä»¶çš„æ¸²æŸ“ watcherï¼‰ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹ä¸­è°ƒç”¨å­ç»„ä»¶æ›´æ–°ï¼ˆprePatch &#x3D;&gt; updateChildComponentï¼‰ï¼Œè€Œæ–°çš„å†™æ³•åˆ™æ˜¯ç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„æ›´æ–°ï¼ˆè°ƒç”¨å­ç»„ä»¶çš„æ¸²æŸ“ watcherï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ—§çš„å†™æ³•åœ¨æ›´æ–°æ—¶å°±å¤šäº†ä¸€ä¸ªçˆ¶ç»„ä»¶æ›´æ–°çš„è¿‡ç¨‹ï¼Œè€Œæ–°çš„å†™æ³•ç”±äºç›´æ¥æ›´æ–°å­ç»„ä»¶ï¼Œå°±ä¼šæ›´åŠ é«˜æ•ˆï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ‰€ä»¥æ¨èå§‹ç»ˆä½¿ç”¨<code>v-slot:slotName</code>è¯­æ³•ã€‚</p><h4 id="äºŒã€ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶"><a href="#äºŒã€ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="äºŒã€ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶"></a>äºŒã€ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶</h4><p>å¯¹äºæŸäº›ç»„ä»¶ï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯ç”¨æ¥æ˜¾ç¤ºä¸€äº›æ•°æ®ï¼Œä¸éœ€è¦ç®¡ç†çŠ¶æ€ï¼Œç›‘å¬æ•°æ®ç­‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨å‡½æ•°å¼ç»„ä»¶ã€‚å‡½æ•°å¼ç»„ä»¶æ˜¯æ— çŠ¶æ€çš„ï¼Œæ— å®ä¾‹çš„ï¼Œåœ¨åˆå§‹åŒ–æ—¶ä¸éœ€è¦åˆå§‹åŒ–çŠ¶æ€ï¼Œä¸éœ€è¦åˆ›å»ºå®ä¾‹ï¼Œä¹Ÿä¸éœ€è¦å»å¤„ç†ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œç›¸æ¯”æœ‰çŠ¶æ€ç»„ä»¶ï¼Œä¼šæ›´åŠ è½»é‡ï¼ŒåŒæ—¶æ€§èƒ½ä¹Ÿæ›´å¥½ã€‚</p><pre><code class="vue">    &lt;template functional&gt;        &lt;div class=&quot;user-profile&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt;    &lt;/template&gt;    &lt;script&gt;        export default &#123;            // or functional: true            props: [&#39;name&#39;],        &#125;    &lt;/script&gt;</code></pre><h4 id="ä¸‰ã€ç»“åˆåœºæ™¯ä½¿ç”¨-v-show-å’Œ-v-if"><a href="#ä¸‰ã€ç»“åˆåœºæ™¯ä½¿ç”¨-v-show-å’Œ-v-if" class="headerlink" title="ä¸‰ã€ç»“åˆåœºæ™¯ä½¿ç”¨ v-show å’Œ v-if"></a>ä¸‰ã€ç»“åˆåœºæ™¯ä½¿ç”¨ v-show å’Œ v-if</h4><pre><code>// v-if ç¼–è¯‘å‰&lt;template&gt;  &lt;div&gt;    &lt;UserProfile :user=&quot;user1&quot; v-if=&quot;visible&quot; /&gt;    &lt;button @click=&quot;visible = !visible&quot;&gt;toggle&lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;// ç¼–è¯‘åfunction render() &#123;  with (this) &#123;    return _c(      &#39;div&#39;,      [        visible          ? _c(&#39;UserProfile&#39;, &#123;              attrs: &#123;                user: user1              &#125;            &#125;)          : _e(),        _c(          &#39;button&#39;,          &#123;            on: &#123;              click: function ($event) &#123;                visible = !visible              &#125;            &#125;          &#125;,          [_v(&#39;toggle&#39;)]        )      ],    )  &#125;&#125;</code></pre><pre><code>// v-show ç¼–è¯‘å‰&lt;template&gt;  &lt;div&gt;    &lt;UserProfile :user=&quot;user1&quot; v-show=&quot;visible&quot; /&gt;    &lt;button @click=&quot;visible = !visible&quot;&gt;toggle&lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;function render() &#123;  with (this) &#123;    return _c(      &#39;div&#39;,      [        _c(&#39;UserProfile&#39;, &#123;          directives: [            &#123;              name: &#39;show&#39;,              rawName: &#39;v-show&#39;,              value: visible,              expression: &#39;visible&#39;            &#125;          ],          attrs: &#123;            user: user1          &#125;        &#125;),        _c(          &#39;button&#39;,          &#123;            on: &#123;              click: function ($event) &#123;                visible = !visible              &#125;            &#125;          &#125;,          [_v(&#39;toggle&#39;)]        )      ],    )  &#125;&#125;</code></pre><h5 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><p><code>v-show</code> å’Œ <code>v-if</code> ç›¸æ¯”ï¼Œä¸éœ€è¦åœ¨ patch é˜¶æ®µåˆ›å»º &#x2F; ç§»é™¤èŠ‚ç‚¹ï¼Œåªæ˜¯æ ¹æ®v-showä¸Šç»‘å®šçš„å€¼æ¥æ§åˆ¶ DOM å…ƒç´ çš„<code>style.display</code>å±æ€§ï¼Œåœ¨é¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ä¸‹å°±å¯ä»¥èŠ‚çœå¾ˆå¤šæ€§èƒ½ã€‚</p><p>ä½†æ˜¯å¹¶ä¸æ˜¯è¯´<code>v-show</code>å¯ä»¥åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æ›¿æ¢<code>v-if</code>ï¼Œå¦‚æœåˆå§‹å€¼æ˜¯falseæ—¶ï¼Œ<code>v-if</code>å¹¶ä¸ä¼šåˆ›å»ºéšè—çš„èŠ‚ç‚¹ï¼Œä½†æ˜¯<code>v-show</code>ä¼šåˆ›å»ºï¼Œå¹¶é€šè¿‡è®¾ç½®<code>style.display=&#39;none&#39;</code>æ¥éšè—ï¼Œè™½ç„¶å¤–è¡¨çœ‹ä¸Šå»è¿™ä¸ª DOM éƒ½æ˜¯è¢«éšè—çš„ï¼Œä½†æ˜¯<code>v-show</code>å·²ç»å®Œæ•´çš„èµ°äº†ä¸€éåˆ›å»ºçš„æµç¨‹ï¼Œé€ æˆäº†æ€§èƒ½çš„æµªè´¹ã€‚æ‰€ä»¥ï¼Œ<code>v-if</code>çš„ä¼˜åŠ¿ä½“ç°åœ¨åˆå§‹åŒ–æ—¶ï¼Œ<code>v-show</code>ä½“ç°åœ¨æ›´æ–°æ—¶ï¼Œå½“ç„¶å¹¶ä¸æ˜¯è¦æ±‚ä½ ç»å¯¹æŒ‰ç…§è¿™ä¸ªæ–¹å¼æ¥ï¼Œæ¯”å¦‚æŸäº›ç»„ä»¶åˆå§‹åŒ–æ—¶ä¼šè¯·æ±‚æ•°æ®ï¼Œè€Œä½ æƒ³å…ˆéšè—ç»„ä»¶ï¼Œç„¶ååœ¨æ˜¾ç¤ºæ—¶èƒ½ç«‹åˆ»çœ‹åˆ°æ•°æ®ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨<code>v-show</code>ï¼Œåˆæˆ–è€…ä½ æƒ³æ¯æ¬¡æ˜¾ç¤ºè¿™ä¸ªç»„ä»¶æ—¶éƒ½æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ç”¨<code>v-if</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯å»é€‰ä¸€ä¸ªåˆé€‚çš„æ–¹å¼ã€‚</p><h4 id="å››ã€é¿å…-v-for-å’Œ-v-if-åŒæ—¶ä½¿ç”¨"><a href="#å››ã€é¿å…-v-for-å’Œ-v-if-åŒæ—¶ä½¿ç”¨" class="headerlink" title="å››ã€é¿å… v-for å’Œ v-if åŒæ—¶ä½¿ç”¨"></a>å››ã€é¿å… v-for å’Œ v-if åŒæ—¶ä½¿ç”¨</h4><p>2.x å½“ <code>v-if</code> ä¸ <code>v-for</code> ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ<code>v-for</code> å…·æœ‰æ¯” <code>v-if</code> æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚<br>3.x å½“ <code>v-if</code> ä¸ <code>v-for</code> ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ<code>v-if</code> å…·æœ‰æ¯” <code>v-for</code> æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p><p>å¦‚æœåŒæ—¶å‡ºç°ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šå…ˆæ‰§è¡Œå¾ªç¯åœ¨åˆ¤æ–­æ¡ä»¶ï¼Œæ— è®ºå¦‚ä½•å¾ªç¯éƒ½ä¸å¯é¿å…ï¼Œæµªè´¹äº†æ€§èƒ½,è¦é¿å…å‡ºç°è¿™ç§æƒ…å†µï¼Œåœ¨å¤–å±‚åµŒå¥—<code>template</code>ï¼Œåœ¨è¿™ä¸€å±‚è¿›è¡Œv-ifåˆ¤æ–­ï¼Œç„¶ååœ¨å†…éƒ¨è¿›è¡Œ<code>v-for</code>å¾ªç¯ã€‚</p><h4 id="äº”ã€å§‹ç»ˆä¸º-v-for-æ·»åŠ -keyï¼Œå¹¶ä¸”ä¸è¦å°†-index-ä½œä¸ºçš„-key"><a href="#äº”ã€å§‹ç»ˆä¸º-v-for-æ·»åŠ -keyï¼Œå¹¶ä¸”ä¸è¦å°†-index-ä½œä¸ºçš„-key" class="headerlink" title="äº”ã€å§‹ç»ˆä¸º v-for æ·»åŠ  keyï¼Œå¹¶ä¸”ä¸è¦å°† index ä½œä¸ºçš„ key"></a>äº”ã€å§‹ç»ˆä¸º v-for æ·»åŠ  keyï¼Œå¹¶ä¸”ä¸è¦å°† index ä½œä¸ºçš„ key</h4><p>1.keyçš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†é«˜æ•ˆçš„æ›´æ–°è™šæ‹ŸDOMï¼Œå…¶åŸç†æ˜¯vueåœ¨patchè¿‡ç¨‹ä¸­é€šè¿‡keyå¯ä»¥ç²¾å‡†çš„åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªï¼Œä»è€Œé¿å…é¢‘ç¹æ›´æ–°ä¸åŒå…ƒç´ ï¼Œä½¿å¾—æ•´ä¸ªpatchè¿‡ç¨‹æ›´åŠ é«˜æ•ˆï¼Œå‡å°‘äº†domçš„æ“ä½œé‡ï¼Œæé«˜æ€§èƒ½ã€‚</p><p>2.å¦‚æœä¸è®¾ç½®keyå¯èƒ½åœ¨åˆ—è¡¨æ›´æ–°æ—¶å¼•å‘ä¸€äº›éšè—çš„bug æ¯”å¦‚è¯´æ›´æ–°å’Œä¸æ›´æ–°çœ‹ä¸å‡ºæ¥ã€‚</p><p>3.vueä¸­åœ¨ä½¿ç”¨ç›¸åŒæ ‡ç­¾åå…ƒç´ çš„è¿‡æ¸¡åˆ‡æ¢æ˜¯ï¼Œä¹Ÿä¼šç”¨åˆ°keyå±æ€§ï¼Œå…¶ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†è®©vueå¯ä»¥åŒºåˆ†ä»–ä»¬ï¼Œå¦åˆ™vueåªä¼šæ›¿æ¢å…¶å†…éƒ¨å±æ€§è€Œä¸ä¼šè§¦å‘è¿‡æ¸¡æ•ˆæœã€‚éœ€è¦ç”¨keyæ¥ä½œä¸ºå”¯ä¸€æ€§çš„åˆ¤æ–­ã€‚</p><p>å½“ç”¨<code>index</code>ä½œä¸º<code>key</code>æ—¶ï¼Œå› ä¸ºdiffç®—æ³•ä¼šå°±åœ°æ›´æ–°ï¼Œä¼šå¤ç”¨key:0çš„è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¯¹çš„æ—¶å€™ï¼Œkey:0çš„èŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™æ¯”å¯¹key:1ï¼Œä¹Ÿå­˜åœ¨ï¼Œè€Œå¤šå‡ºäº†key:2, åˆ™ä¼šå°†å…¶åˆ é™¤ã€‚</p><h4 id="å…­ã€ä½¿ç”¨Object-freeze"><a href="#å…­ã€ä½¿ç”¨Object-freeze" class="headerlink" title="å…­ã€ä½¿ç”¨Object.freeze()"></a>å…­ã€ä½¿ç”¨Object.freeze()</h4><p>åœ¨ Vue ç»„ä»¶åˆå§‹åŒ–æ•°æ®æ—¶ï¼Œä¼šé€’å½’éå†åœ¨ data ä¸­å®šä¹‰çš„æ¯ä¸€æ¡æ•°æ®ï¼Œé€šè¿‡Object.definePropertyå°†æ•°æ®æ”¹æˆå“åº”å¼ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœ data ä¸­çš„æ•°æ®é‡å¾ˆå¤§çš„è¯ï¼Œåœ¨åˆå§‹åŒ–æ—¶å°†ä¼šä½¿ç”¨å¾ˆé•¿çš„æ—¶é—´å»æ‰§è¡ŒObject.defineProperty, ä¹Ÿå°±ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶ä½¿æ•°æ®å˜ä¸ºéå“åº”å¼ï¼Œä»è€ŒèŠ‚çœæ—¶é—´ã€‚</p><p>å¯¹æŸä¸€å¯¹è±¡ä½¿ç”¨<code>Object.freeze()</code>åï¼Œå°†ä¸èƒ½å‘è¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹è¯¥å¯¹è±¡å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ã€‚åœ¨vueæºç ä¸­åˆ¤æ–­æ¡ä»¶ä¸­æœ‰ä¸€ä¸ª<code>Object.isExtensible(value)</code>ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯æ‰©å±•çš„ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨äº†<code>Object.freeze()</code>ï¼Œè¿™é‡Œè‚¯å®šå°±è¿”å›äº†falseï¼Œæ‰€ä»¥å°±è·³è¿‡äº†ä¸‹é¢çš„æ•°æ®å“åº”ç»‘å®šè¿‡ç¨‹ï¼Œè‡ªç„¶å°±çœäº†å¾ˆå¤šæ—¶é—´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Webpackä¹‹å¤šå…¥å£&amp;ä¸‰ç§hash</title>
      <link href="/2022/09/30/webpack-multiInput/"/>
      <url>/2022/09/30/webpack-multiInput/</url>
      
        <content type="html"><![CDATA[<h3 id="Webpackä¹‹å¤šå…¥å£-amp-ä¸‰ç§hash"><a href="#Webpackä¹‹å¤šå…¥å£-amp-ä¸‰ç§hash" class="headerlink" title="Webpackä¹‹å¤šå…¥å£&amp;ä¸‰ç§hash"></a>Webpackä¹‹å¤šå…¥å£&amp;ä¸‰ç§hash</h3><p>webpackä¸‰ç§hash</p><p>1.å…¨å±€hash: <code>hash</code> ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹æ‰€æœ‰æ–‡ä»¶hashéƒ½æ”¹å˜</p><p>2.å†…å®¹hash: <code>contentHash</code>  æ ¹æ®è‡ªèº«æ–‡ä»¶ä¿®æ”¹äº†æ‰ä¼šå˜hash</p><p>3.åˆ†ç»„hash: <code>chunkHash</code>  æ ¹æ®å¤šå…¥å£æ–‡ä»¶åˆ†ç»„ ä¸åŒç»„ä¹‹é—´hashå€¼ä¸ç›¸å½±å“ï¼Œ ç»„å†…æ–‡ä»¶ä¿®æ”¹ï¼Œè¯¥ç»„hashæ”¹å˜</p><h4 id="Webpack-é…ç½®"><a href="#Webpack-é…ç½®" class="headerlink" title="Webpack é…ç½®"></a>Webpack é…ç½®</h4><pre><code class="js">    module.exports = &#123;        entry: &#123;            main: &#39;./js/main.js&#39;,            other: &#39;./js/other.js&#39;        &#125;,        output: &#123;            filename: &#39;[name].[hash/contentHash/chunkHash].js&#39;,            path: path.resolve(__dirname, &#39;dist&#39;)        &#125;,        plugins: [            new HtmlWebpackPlugin(&#123;                filename: &#39;index.html&#39;,                template: &#39;./src/index.html&#39;,                chunks: [&#39;main&#39;]            &#125;),            new HtmlWebpackPlugin(&#123;                filename: &#39;other.html&#39;,                template: &#39;./src/other.html&#39;,                chunks: [&#39;other&#39;]            &#125;),        ]        // ...    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Webpackä¹‹æŠ½ç¦»å‹ç¼©css</title>
      <link href="/2022/09/30/webpack-optimization/"/>
      <url>/2022/09/30/webpack-optimization/</url>
      
        <content type="html"><![CDATA[<h3 id="Webpackä¹‹æŠ½ç¦»å‹ç¼©css"><a href="#Webpackä¹‹æŠ½ç¦»å‹ç¼©css" class="headerlink" title="Webpackä¹‹æŠ½ç¦»å‹ç¼©css"></a>Webpackä¹‹æŠ½ç¦»å‹ç¼©css</h3><p>ä½¿ç”¨ <code>mini-css-extract-plugin</code> æ’ä»¶çš„å†…ç½®loader æ›¿æ¢ <code>style-loader</code></p><p>ä½¿ç”¨ <code>terser-webpack-plugin</code> æ’ä»¶å‹ç¼©jsä»£ç </p><p>ä½¿ç”¨ <code>optimize-css-assets-webpack-plugin</code> æ’ä»¶å‹ç¼©cssä»£ç </p><h4 id="Webpack-é…ç½®"><a href="#Webpack-é…ç½®" class="headerlink" title="Webpack é…ç½®"></a>Webpack é…ç½®</h4><pre><code class="js">    const MiniCSSExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);        const TerserPlugin = require(&#39;terser-webpack-plugin&#39;);  // å‹ç¼©jsæ’ä»¶    const OptimizeCssAssetsWebpackPlugin = require(&#39;optimize-css-assets-webpack-plugin&#39;);  // å‹ç¼©cssæ’ä»¶        module.exports = &#123;        // ...        module: &#123;            rules: [                &#123;                    test: /\.css/,                    loader: [                        MiniCSSExtractPlugin.loader, // æ›¿æ¢ style-loader                        &#39;css-loader&#39;,                        &#39;postcss-loader&#39;,  // autoprefixer                    ],                &#125;            ]        &#125;,        plugins: [            new MiniCSSExtractPlugin(&#123;                filename: &#39;css/main.[contentHash:8].css&#39;            &#125;)        ],        // ä¼˜åŒ–é…ç½®        optimization: &#123;            minimizer: &#123;                // å‹ç¼©js                new TerserPlugin(),                // å‹ç¼©css                new OptimizeCssAssetsWebpackPlugin()            &#125;        &#125;      &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Webpackä¹‹æ‹†åˆ†/åˆå¹¶é…ç½®</title>
      <link href="/2022/09/30/webpack-mergeConfig/"/>
      <url>/2022/09/30/webpack-mergeConfig/</url>
      
        <content type="html"><![CDATA[<h3 id="Webpackä¹‹æ‹†åˆ†-x2F-åˆå¹¶é…ç½®"><a href="#Webpackä¹‹æ‹†åˆ†-x2F-åˆå¹¶é…ç½®" class="headerlink" title="Webpackä¹‹æ‹†åˆ†&#x2F;åˆå¹¶é…ç½®"></a>Webpackä¹‹æ‹†åˆ†&#x2F;åˆå¹¶é…ç½®</h3><p>ä½¿ç”¨ <code>webpack-merge</code> åˆå¹¶é…ç½®ï¼›</p><p>å¯¹åº”scriptä¸ºï¼š<br>build:dev webpack â€“config webpack.dev.config.jsï¼›<br>build:prod webpack â€“config webpack.prod.config.jsï¼›</p><h4 id="webpack-base-config-js"><a href="#webpack-base-config-js" class="headerlink" title="webpack.base.config.js"></a>webpack.base.config.js</h4><p>æå–å…¬å…±é…ç½®</p><pre><code class="js">    const path = requrie(&#39;path&#39;);    const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);        module.exports = &#123;        entry: &#123;            main: &#39;./src/index.js&#39;        &#125;,        output: &#123;            filename: &#39;[name].js&#39;,            path: path.resolve(__dirname, &#39;dist&#39;)        &#125;,        plugins: [            new HtmlWebpackPlugin(&#123;                template: &#39;./src/index.html&#39;            &#125;)        ],        // ...    &#125;</code></pre><h4 id="webpack-dev-config-js"><a href="#webpack-dev-config-js" class="headerlink" title="webpack.dev.config.js"></a>webpack.dev.config.js</h4><p>å¼€å‘ç¯å¢ƒé…ç½®</p><pre><code class="js">    const baseConfig = require(&#39;./weback.base.config.js&#39;);    const &#123; smart: merge &#125; = require(&#39;webpack-merge&#39;);        const devConfig = &#123;        mode: &#39;development&#39;        // å¼€å‘ç¯å¢ƒé…ç½®....    &#125;        module.export = merge(baseConfig, devConfig);</code></pre><h4 id="webpack-prod-config-js"><a href="#webpack-prod-config-js" class="headerlink" title="webpack.prod.config.js"></a>webpack.prod.config.js</h4><p>ç”Ÿäº§ç¯å¢ƒé…ç½®</p><pre><code class="js">    const baseConfig = require(&#39;./weback.base.config.js&#39;);    const &#123; smart: merge &#125; = require(&#39;webpack-merge&#39;);        const devConfig = &#123;        mode: &#39;development&#39;        // å¼€å‘ç¯å¢ƒé…ç½®....    &#125;        module.export = merge(baseConfig, devConfig);</code></pre>]]></content>
      
      
      <categories>
          
          <category> Webpack </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œossä¸Šä¼ å·¥å…·å‡½æ•°</title>
      <link href="/2022/09/30/js-aliOssUpload/"/>
      <url>/2022/09/30/js-aliOssUpload/</url>
      
        <content type="html"><![CDATA[<h3 id="é˜¿é‡Œossä¸Šä¼ å·¥å…·å‡½æ•°"><a href="#é˜¿é‡Œossä¸Šä¼ å·¥å…·å‡½æ•°" class="headerlink" title="é˜¿é‡Œossä¸Šä¼ å·¥å…·å‡½æ•°"></a>é˜¿é‡Œossä¸Šä¼ å·¥å…·å‡½æ•°</h3><p><strong>ps:</strong> <em>ç°åœ¨å¾ˆå¤šå›¾ç‰‡ä¸Šä¼ éƒ½æ˜¯æ‰˜ç®¡åˆ°é˜¿é‡Œäº‘ossä¸Šçš„,å‰ç«¯æ–¹æ³•å¦‚ä¸‹</em></p><h4 id="å®‰è£…-ali-oss"><a href="#å®‰è£…-ali-oss" class="headerlink" title="å®‰è£… ali-oss"></a>å®‰è£… ali-oss</h4><p><code>compressorjs</code>ç”¨æ¥å‹ç¼©å›¾ç‰‡ï¼Œ<code>ali-oss</code>ç”¨æ¥ä¸Šä¼ oss</p><pre><code class="bash">    npm install ali-oss    npm install compressorjs</code></pre><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    import OSS from &#39;ali-oss&#39;;    import Compressor from &#39;compressorjs&#39;;    import &#123; randomString &#125; from &#39;@/utils/index.js&#39;;    const &#123; accessKeyId, accessKeySecret, region, endpoint &#125; = &#123;    region: &#39;your region&#39;,    accessKeyId: &#39;your accessKeyId&#39;,    accessKeySecret: &#39;your accessKeySecret&#39;,    endpoint: &#39;oss-cn-hangzhou.aliyuncs.com&#39;    &#125;;    const client = new OSS(&#123;    // yourRegionå¡«å†™Bucketæ‰€åœ¨åœ°åŸŸã€‚ä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼ŒRegionå¡«å†™ä¸ºoss-cn-hangzhouã€‚    region: region,    // ä»STSæœåŠ¡è·å–çš„ä¸´æ—¶è®¿é—®å¯†é’¥ï¼ˆAccessKey IDå’ŒAccessKey Secretï¼‰ã€‚    accessKeyId: accessKeyId,    accessKeySecret: accessKeySecret,    endpoint: endpoint,    // å¡«å†™Bucketåç§°ã€‚    bucket: &#39;mdhw&#39;    &#125;);    /**     * å›¾ç‰‡å‹ç¼©     */    function compressImage(fileList, backType, limitSize, quality) &#123;    const promiseAry = [];    const maxSize = limitSize * 1024 * 1024;    fileList.forEach(image =&gt; &#123;        promiseAry.push(new Promise((resolve, reject) =&gt; &#123;        if (image.size &lt;= maxSize) &#123; // æ²¡æ“è¿‡é™åˆ¶ï¼Œä¸ç”¨å‹ç¼©            resolve(image)        &#125;        else &#123;            new Compressor(image, &#123;            // maxWidth: 750,            // maxHeight: 750,            quality: quality || 0.8,            success(result) &#123;                let file = new File([result], image.name, &#123; type: image.type &#125;)                if (!backType || backType == &#39;blob&#39;) &#123;                resolve(result)                &#125; else if (backType == &#39;file&#39;) &#123;                resolve(file)                &#125; else &#123;                resolve(file)                &#125;            &#125;,            error(err) &#123;                console.log(&#39;å›¾ç‰‡å‹ç¼©å¤±è´¥----&gt;&gt;&gt;&gt;&gt;&#39;, err)                resolve(image)            &#125;            &#125;)        &#125;        &#125;))    &#125;)    return Promise.all(promiseAry)    &#125;    const defaultLimit = 1;    /**     *     * @param fileList ä¸Šä¼ å›¾ç‰‡çš„èµ„æºè·¯å¾„     * @param dir ossè¦ä¿å­˜çš„æ–‡ä»¶å¤¹     * @param limitSize osså›¾ç‰‡é™åˆ¶ é»˜è®¤1m 0ä¸ºä¸é™åˆ¶     * @returns &#123;OSSæ–‡ä»¶è·¯å¾„&#125;     */    async function uploadOSS(fileList, dir = &#39;file&#39;, &#123;    limitSize = defaultLimit, compress = false    &#125;) &#123;    return new Promise((resolve, reject) =&gt; &#123;        const promiseAry = [];        let randomVal, randomStr, imgtype, fileName, tmpAry, maxSize = limitSize * 1024 * 1024;        let _Promise = compress ? compressImage(fileList, &#39;file&#39;, limitSize) : Promise.resolve(fileList)        if (compress) &#123;        console.log(&#39;å‹ç¼©å‰çš„å›¾ç‰‡åˆ—è¡¨&#39;, fileList)        &#125;        _Promise.then(fileList =&gt; &#123;        if (compress) &#123;            console.log(&#39;å‹ç¼©åçš„å›¾ç‰‡åˆ—è¡¨&#39;, fileList)        &#125;        const canUploadList = limitSize == 0 ? fileList : fileList.filter(file =&gt; file.size &lt;= maxSize);        canUploadList.forEach(file =&gt; &#123;            tmpAry = file.name.split(&#39;.&#39;);            imgtype = tmpAry[tmpAry.length - 1]            randomVal = +new Date();            randomStr = randomString()            fileName = `$&#123;randomVal&#125;_$&#123;randomStr&#125;.$&#123;imgtype&#125;`            promiseAry.push(client.put(`$&#123;dir&#125;/$&#123;fileName&#125;`, file, &#123;            headers: &#123;                &#39;aa&#39;: &#39;aa&#39;            &#125;            &#125;))        &#125;)        Promise.all(promiseAry).then(result =&gt; &#123;            let code = canUploadList.length == fileList.length ? 1 : 0            resolve(&#123;            result,            code,            msg: code == 1 ? &#39;ä¸Šä¼ æˆåŠŸ&#39; : `$&#123;fileList.length == 1 ? &#39;&#39; : &#39;éƒ¨åˆ†&#39;&#125;å›¾ç‰‡å¤§å°è¶…è¿‡$&#123;limitSize&#125;M`            &#125;);        &#125;).catch(e =&gt; &#123;            reject(e)        &#125;)        &#125;)    &#125;);    &#125;    export &#123; uploadOSS, defaultLimit &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ElementUIäºŒå¼€Aliossä¸Šä¼ ç»„ä»¶</title>
      <link href="/2022/09/30/vue-ossUploadComponent/"/>
      <url>/2022/09/30/vue-ossUploadComponent/</url>
      
        <content type="html"><![CDATA[<h3 id="ElementUIäºŒå¼€Aliossä¸Šä¼ ç»„ä»¶"><a href="#ElementUIäºŒå¼€Aliossä¸Šä¼ ç»„ä»¶" class="headerlink" title="ElementUIäºŒå¼€Aliossä¸Šä¼ ç»„ä»¶"></a>ElementUIäºŒå¼€Aliossä¸Šä¼ ç»„ä»¶</h3><p>æœ¬æ–‡ä»£ç åªæ˜¯vueå‰ç«¯ç»„ä»¶ä»£ç ï¼Œè¿˜éœ€è¦ä¾èµ–<code>vuedraggable</code>ç»„ä»¶åº“ï¼ˆæ”¯æŒæ‹–æ‹½æ’åºï¼‰ï¼›è¿˜éœ€è¦<strong>ossUpload.js</strong>å·¥å…·å‡½æ•°ï¼ˆè¯¦è§å¦å¤–ä¸€æ–‡ï¼š<em><strong>é˜¿é‡Œossä¸Šä¼ å·¥å…·å‡½æ•°</strong></em>ï¼‰</p><p>è¯¥ç»„ä»¶å†™çš„æ—¶å€™å¤§éƒ¨åˆ†éƒ½æ˜¯å‚ç…§elementUIçš„ä¸Šä¼ ç»„ä»¶ï¼ˆå…¶å®æ˜¯æœ¬æ¥çš„ä¸šåŠ¡ä»£ç éƒ½æ˜¯é€šè¿‡åç«¯ä¸Šä¼ ï¼Œåé¢é¢†å¯¼è¯´è¦ç”¨ossï¼Œæ‰€ä»¥å°±å†™äº†è¿™ä¸ªç»„ä»¶ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨åˆ°äº†elementUIçš„éƒ¨åˆ†ç»„ä»¶</p><h4 id="vue-Code"><a href="#vue-Code" class="headerlink" title="vue Code"></a>vue Code</h4><pre><code class="vue">&lt;template&gt;  &lt;div&gt;    &lt;div class=&quot;flex-wrap&quot;&gt;      &lt;div class=&quot;oss-upload&quot;&gt;        &lt;slot&gt;&lt;/slot&gt;        &lt;label v-if=&quot;!disabled&quot; class=&quot;hand&quot;&gt;          &lt;input            :multiple=&quot;multiple&quot;            type=&quot;file&quot;            class=&quot;hidden&quot;            @change=&quot;change&quot;          /&gt;        &lt;/label&gt;      &lt;/div&gt;      &lt;el-button        v-if=&quot;!disabled &amp;&amp; onDelete &amp;&amp; value&quot;        @click=&quot;handleDelete&quot;        type=&quot;text&quot;        size=&quot;small&quot;        &gt;åˆ é™¤&lt;/el-button      &gt;      &lt;slot name=&quot;tips&quot;&gt;        &lt;span class=&quot;tips&quot;&gt;&#123;&#123; tips &#125;&#125;&lt;/span&gt;      &lt;/slot&gt;    &lt;/div&gt;    &lt;draggable      class=&quot;drag-list&quot;      v-if=&quot;!disabled &amp;&amp; showFileList &amp;&amp; filelist.length &gt; 0&quot;      v-model=&quot;filelist&quot;      @change=&quot;drag&quot;    &gt;      &lt;div class=&quot;drag-item&quot; v-for=&quot;(item, idx) in filelist&quot; :key=&quot;idx&quot;&gt;        &lt;img class=&quot;drag-item-img&quot; :src=&quot;item&quot; /&gt;        &lt;i class=&quot;el-icon-error&quot; @click=&quot;remove(idx)&quot;&gt;&lt;/i&gt;      &lt;/div&gt;    &lt;/draggable&gt;    &lt;template v-else-if=&quot;showFileList &amp;&amp; filelist.length &gt; 0&quot;&gt;      &lt;div class=&quot;drag-list&quot;&gt;        &lt;div class=&quot;drag-item&quot; v-for=&quot;(item, idx) in filelist&quot; :key=&quot;idx&quot;&gt;          &lt;img class=&quot;drag-item-img&quot; :src=&quot;item&quot; /&gt;        &lt;/div&gt;      &lt;/div&gt;    &lt;/template&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import draggable from &quot;vuedraggable&quot;;import &#123; uploadOSS, defaultLimit &#125; from &quot;@/utils/ossUpload&quot;;export default &#123;  components: &#123;    draggable,  &#125;,  props: &#123;    value: String,    limit: [String, Number],    maxCount: [String, Number],    tips: String,    disabled: &#123;      type: Boolean,      default: false,    &#125;,    compress: &#123;      type: Boolean,      default: false,    &#125;,    showUploadResult: &#123;      type: Boolean,      default: true,    &#125;,    multiple: &#123;      type: Boolean,      default: false,    &#125;,    showFileList: &#123;      type: Boolean,      default: false,    &#125;,    fileList: &#123;      type: Array,      default: () =&gt; [],    &#125;,    onBeforeUpload: &#123;      type: Function,      default: () =&gt; &#123;&#125;,    &#125;,    onSuccess: &#123;      type: Function,      default: () =&gt; &#123;&#125;,    &#125;,    onError: &#123;      type: Function,      default: () =&gt; &#123;&#125;,    &#125;,    onChange: &#123;      type: Function,      default: () =&gt; &#123;&#125;,    &#125;,    onDelete: &#123;      type: Function,      default: null,    &#125;,    dir: &#123;      type: String,      default: &quot;file&quot;,    &#125;,  &#125;,  watch: &#123;    fileList: &#123;      handler(val) &#123;        this.filelist = val || [];      &#125;,      immediate: true,    &#125;,  &#125;,  data() &#123;    return &#123;      filelist: [],    &#125;;  &#125;,  methods: &#123;    clearFileList() &#123;      this.filelist = [];    &#125;,    handleDelete() &#123;      this.onDelete &amp;&amp; this.onDelete();    &#125;,    remove(index) &#123;      this.filelist = this.filelist.filter((item, idx) =&gt; idx !== index);      this.onChange(this.filelist);    &#125;,    drag() &#123;      this.onChange(this.filelist);    &#125;,    change(e) &#123;      const files = Array.from(e.target.files);      const limit = Number(this.limit);      const maxCount = Number(this.maxCount);      if (maxCount === maxCount) &#123;        // maxCountå€¼æœ‰æ•ˆï¼Œåˆ™é™åˆ¶æ•°é‡        if (this.filelist.length + files.length &gt; maxCount) &#123;          this.$message.warning(`æœ€å¤šä¸Šä¼ $&#123;maxCount&#125;å¼ å›¾ç‰‡`);          return;        &#125;      &#125;      // é™åˆ¶å›¾ç‰‡ç±»å‹      const _files = files.filter((d) =&gt; &#123;        if (d.type == &quot;image/png&quot; || d.type == &quot;image/jpeg&quot;) &#123;          return true;        &#125; else &#123;          return false;        &#125;      &#125;);      e.target.value = null;      // å­˜åœ¨ä¸ç¬¦åˆçš„å›¾ç‰‡ç±»å‹      if (_files.length !== files.length) &#123;        this.$message.warning(&quot;å›¾ç‰‡ç±»å‹ä¸æ˜¯pngæˆ–è€…jpeg&quot;);      &#125;      // æ²¡æœ‰æœ‰æ•ˆçš„å›¾ç‰‡ç›´æ¥è¿”å›      if (_files.length === 0) &#123;        return;      &#125;      this.onBeforeUpload(); // ä¸Šä¼ å‰é’©å­      uploadOSS(_files, this.dir, &#123;        limitSize: isNaN(limit) ? defaultLimit : limit,        compress: this.compress,      &#125;)        .then((&#123; result, code, msg &#125;) =&gt; &#123;          this.showUploadResult &amp;&amp;            this.$message(&#123;              type: code == 1 ? &quot;success&quot; : &quot;warning&quot;,              message: msg,            &#125;);          result.forEach((res) =&gt; &#123;            this.filelist.push(res.url);          &#125;);          if (this.multiple || this.filelist[this.filelist.length - 1]) &#123;            this.onSuccess(              result,              this.multiple                ? this.filelist                : this.filelist[this.filelist.length - 1]            );          &#125;        &#125;)        .catch((err) =&gt; &#123;          console.error(err);          this.onError(err);        &#125;);    &#125;,  &#125;,&#125;;&lt;/script&gt;&lt;style scoped&gt;.oss-upload img &#123;  display: block;&#125;.flex-wrap &#123;  display: inline-flex;  align-items: center;&#125;.oss-upload &#123;  display: inline-block;  position: relative;  margin-right: 10px;&#125;.hand &#123;  z-index: 99;  cursor: pointer;  position: absolute;  top: 0;  left: 0;  right: 0;  bottom: 0;&#125;.hidden &#123;  display: none;&#125;.el-icon-error &#123;  position: absolute;  right: -7px;  top: -7px;  font-size: 18px;  cursor: pointer;  color: #f56c6c;&#125;.drag-list &#123;  display: flex;  flex-wrap: wrap;  padding: 20px 0;&#125;.drag-item &#123;  position: relative;  margin-right: 10px;&#125;.drag-item-img &#123;  object-fit: contain;  width: 100px;  height: 100px;  border: 1px solid #ddd;  border-radius: 4px;&#125;.tips &#123;  font-size: 12px;  color: #999;&#125;&lt;/style&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ElementUIäºŒå¼€å•†å“è§„æ ¼ç»„ä»¶</title>
      <link href="/2022/09/30/vue-goodsSkuComponent/"/>
      <url>/2022/09/30/vue-goodsSkuComponent/</url>
      
        <content type="html"><![CDATA[<h3 id="ElementUIäºŒå¼€å•†å“è§„æ ¼ç»„ä»¶"><a href="#ElementUIäºŒå¼€å•†å“è§„æ ¼ç»„ä»¶" class="headerlink" title="ElementUIäºŒå¼€å•†å“è§„æ ¼ç»„ä»¶"></a>ElementUIäºŒå¼€å•†å“è§„æ ¼ç»„ä»¶</h3><p>ä½¿ç”¨åˆ°<code>element-ui</code>è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„ç»„ä»¶</p><p>ç”µå•†åå°éœ€æ±‚-å•†å“è§„æ ¼ç»„ä»¶ï¼Œå‚æ•°æ˜¯æˆ‘ä»¬ä¸šåŠ¡ä¸Šéœ€è¦çš„ï¼Œä¸è¿‡å…«ä¹ä¸ç¦»å</p><p>ç»„ä»¶ä¸­çš„ä¸Šä¼ å›¾ç‰‡ä½¿ç”¨äº†oss-uploadç»„ä»¶ï¼ˆè¯¦è§å¦ä¸€æ–‡ï¼š<em><strong>ElementUIäºŒå¼€Aliossä¸Šä¼ ç»„ä»¶</strong></em>ï¼‰</p><p><a href="https://postimg.cc/WFhBcd5r"><img src="https://i.postimg.cc/C1NSDDDv/goodsSku.png" alt="goodsSku.png"></a></p><h4 id="vue-Code"><a href="#vue-Code" class="headerlink" title="vue Code"></a>vue Code</h4><pre><code class="vue">&lt;template&gt;  &lt;div class=&quot;sku-list&quot;&gt;    &lt;template v-if=&quot;!disabled&quot;&gt;      &lt;div class=&quot;sku-list-head&quot;&gt;        &lt;el-button type=&quot;primary&quot; size=&quot;mini&quot; @click=&quot;addSkuRow&quot;          &gt;æ·»åŠ è§„æ ¼&lt;/el-button        &gt;      &lt;/div&gt;      &lt;div        class=&quot;sku-list-item&quot;        v-for=&quot;(item, index) in skuData.attrList&quot;        :key=&quot;index&quot;      &gt;        &lt;div class=&quot;sku-list-item-main&quot;&gt;          &lt;div class=&quot;sku-list-item__layout&quot;&gt;            &lt;span class=&quot;span&quot;&gt;è§„æ ¼å&lt;/span&gt;            &lt;el-input              size=&quot;small&quot;              v-model=&quot;item.attrName&quot;              class=&quot;input&quot;            &gt;&lt;/el-input&gt;          &lt;/div&gt;          &lt;div class=&quot;sku-list-item__layout&quot;&gt;            &lt;span class=&quot;span&quot;&gt;è§„æ ¼å€¼&lt;/span&gt;            &lt;div class=&quot;sku-list-item-tags&quot;&gt;              &lt;el-tag                class=&quot;sku-list-item-tag&quot;                closable                @close=&quot;removeSkuAttr(index)&quot;                v-for=&quot;(subitem, i) in item.attrValue&quot;                :key=&quot;i&quot;                &gt;&#123;&#123; subitem.attrValue &#125;&#125;&lt;/el-tag              &gt;              &lt;el-button                size=&quot;small&quot;                icon=&quot;el-icon-plus&quot;                @click=&quot;addSkuAttr(index)&quot;                &gt;æ·»åŠ &lt;/el-button              &gt;            &lt;/div&gt;          &lt;/div&gt;        &lt;/div&gt;        &lt;el-button          type=&quot;text&quot;          size=&quot;small&quot;          class=&quot;sku-list-item-removeBtn&quot;          @click=&quot;removeSkuRow(index)&quot;          &gt;åˆ é™¤è§„æ ¼&lt;/el-button        &gt;      &lt;/div&gt;    &lt;/template&gt;    &lt;el-table border :data=&quot;skuData.skuList&quot;&gt;      &lt;el-table-column label=&quot;å›¾ç‰‡&quot; align=&quot;center&quot; width=&quot;120&quot;&gt;        &lt;template slot-scope=&quot;scope&quot;&gt;          &lt;oss-upload            :disabled=&quot;disabled&quot;            :on-success=&quot;              (res, file) =&gt; onUploadImgSuccess(res, file, scope.row)            &quot;            dir=&quot;erp/goods&quot;          &gt;            &lt;img              v-if=&quot;scope.row.icon&quot;              :src=&quot;scope.row.icon&quot;              class=&quot;goods-img&quot;            /&gt;            &lt;el-button v-else-if=&quot;!disabled&quot; type=&quot;text&quot; size=&quot;small&quot;              &gt;ä¸Šä¼ å›¾ç‰‡&lt;/el-button            &gt;          &lt;/oss-upload&gt;        &lt;/template&gt;      &lt;/el-table-column&gt;      &lt;el-table-column        label=&quot;è§„æ ¼&quot;        align=&quot;center&quot;        prop=&quot;attrPath&quot;      &gt;&lt;/el-table-column&gt;      &lt;el-table-column label=&quot;ä¾›è´§ä»·æ ¼&quot; align=&quot;center&quot;&gt;        &lt;template slot-scope=&quot;scope&quot;&gt;          &lt;el-input            :readonly=&quot;disabled&quot;            v-model=&quot;scope.row.priceCost&quot;          &gt;&lt;/el-input&gt;        &lt;/template&gt;      &lt;/el-table-column&gt;      &lt;el-table-column label=&quot;é”€å”®ä»·æ ¼&quot; align=&quot;center&quot;&gt;        &lt;template slot-scope=&quot;scope&quot;&gt;          &lt;el-input            :readonly=&quot;disabled&quot;            v-model=&quot;scope.row.priceCash&quot;          &gt;&lt;/el-input&gt;        &lt;/template&gt;      &lt;/el-table-column&gt;      &lt;el-table-column label=&quot;åˆ’çº¿ä»·æ ¼&quot; align=&quot;center&quot;&gt;        &lt;template slot-scope=&quot;scope&quot;&gt;          &lt;el-input            :readonly=&quot;disabled&quot;            v-model=&quot;scope.row.priceOriginal&quot;          &gt;&lt;/el-input&gt;        &lt;/template&gt;      &lt;/el-table-column&gt;      &lt;el-table-column label=&quot;å•†å“åº“å­˜&quot; align=&quot;center&quot;&gt;        &lt;template slot-scope=&quot;scope&quot;&gt;          &lt;el-input :readonly=&quot;disabled&quot; v-model=&quot;scope.row.stock&quot;&gt;&lt;/el-input&gt;        &lt;/template&gt;      &lt;/el-table-column&gt;      &lt;!-- &lt;el-table-column label=&quot;å•†å“é¢„è­¦å€¼&quot; align=&quot;center&quot;&gt;        &lt;template slot-scope=&quot;scope&quot;&gt;          &lt;el-input :readonly=&quot;disabled&quot; v-model=&quot;scope.row.stock&quot;&gt;&lt;/el-input&gt;        &lt;/template&gt;      &lt;/el-table-column&gt; --&gt;      &lt;!-- &lt;el-table-column v-if=&quot;!disabled&quot; label=&quot;æ“ä½œ&quot; align=&quot;center&quot;&gt;        &lt;template&gt;          &lt;el-button type=&quot;text&quot; size=&quot;small&quot;&gt;åˆ é™¤&lt;/el-button&gt;          &lt;el-button type=&quot;text&quot; size=&quot;small&quot;&gt;ä¸Šç§»&lt;/el-button&gt;        &lt;/template&gt;      &lt;/el-table-column&gt; --&gt;    &lt;/el-table&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  model: &#123;    prop: &quot;skuData&quot;,    event: &quot;change&quot;,  &#125;,  props: &#123;    skuData: &#123;      type: Object,      default: () =&gt; (&#123;&#125;),    &#125;,    disabled: &#123;      type: Boolean,      default: false,    &#125;,  &#125;,  data() &#123;    return &#123;&#125;;  &#125;,  watch: &#123;    &quot;skuData.attrList&quot;: &#123;      handler() &#123;        if (!this.disabled) &#123;          this.$set(this.skuData, &quot;skuList&quot;, this.getTable());        &#125;      &#125;,      deep: true,      immediate: true,    &#125;,  &#125;,  methods: &#123;    // æ·»åŠ è§„æ ¼è¡Œ    addSkuRow(i) &#123;      this.skuData.attrList.push(&#123;        attrName: &quot;&quot;,        attrValue: [],      &#125;);      this.$emit(&quot;change&quot;, this.skuData);    &#125;,    // åˆ é™¤è§„æ ¼è¡Œ    removeSkuRow(i) &#123;      this.skuData.attrList.splice(i, 1);      this.$emit(&quot;change&quot;, this.skuData);    &#125;,    // åˆ é™¤è§„æ ¼å±æ€§å€¼    removeSkuAttr(a, b) &#123;      this.skuData.attrList[a].attrValue.splice(b, 1);      this.$emit(&quot;change&quot;, this.skuData);    &#125;,    // æ·»åŠ è§„æ ¼å±æ€§å€¼    addSkuAttr(i) &#123;      this.$prompt(&quot;è¯·è¾“å…¥è§„æ ¼å€¼&quot;, &quot;æ·»åŠ è§„æ ¼å€¼&quot;, &#123;        confirmButtonText: &quot;ç¡®å®š&quot;,        cancelButtonText: &quot;å–æ¶ˆ&quot;,        inputPattern: /\S+/,        inputErrorMessage: &quot;è§„æ ¼å€¼ä¸èƒ½ä¸ºç©º&quot;,        closeOnClickModal: false,      &#125;).then((&#123; value &#125;) =&gt; &#123;        this.skuData.attrList[i].attrValue.push(&#123;          attrValue: value,        &#125;);        this.$emit(&quot;change&quot;, this.skuData);      &#125;);    &#125;,    onUploadImgSuccess(res, file, row) &#123;      if (!file) &#123;        return;      &#125;      row.icon = file;      this.$emit(&quot;change&quot;, this.skuData);    &#125;,    getTable() &#123;      const table = [];      const attrValueAry = [];      const arr = [];      const tmpSkuData = (this.skuData.attrList || []).filter(        (d) =&gt; d.attrName != &quot;&quot; &amp;&amp; d.attrValue.length &gt; 0      );      if (!tmpSkuData || tmpSkuData.length == 0) &#123;        return [];      &#125;      tmpSkuData.forEach((item) =&gt; &#123;        attrValueAry.push(item.attrValue);      &#125;);      function func(skuarr = [], i) &#123;        for (let j = 0; j &lt; attrValueAry[i].length; j++) &#123;          if (i &lt; attrValueAry.length - 1) &#123;            skuarr[i] = attrValueAry[i][j];            func(skuarr, i + 1);          &#125; else &#123;            arr.push([...skuarr, attrValueAry[i][j]]);          &#125;        &#125;      &#125;      func([], 0);      arr.forEach((item) =&gt; &#123;        let attrPath = &quot;&quot;,          findItem,          tableItem;        item.forEach((d, idx) =&gt; &#123;          attrPath += `$&#123;tmpSkuData[idx].attrName&#125;:$&#123;d.attrValue&#125;;`;        &#125;);        findItem =          this.skuData.initSkulist.find((item) =&gt; &#123;            return attrPath.includes(item.attrPath);          &#125;) || &#123;&#125;;        tableItem = Object.assign(          &#123;            priceCost: 0,            priceCash: 0,            priceOriginal: 0,            stock: 0,            icon: null,          &#125;,          findItem,          &#123;            attrPath,          &#125;        );        table.push(tableItem);      &#125;);      return table;    &#125;,  &#125;,&#125;;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.sku-list &#123;  &amp;-head &#123;    margin-bottom: 10px;  &#125;  &amp;-item &#123;    display: flex;    align-items: center;    border: 1px solid #eee;    border-radius: 5px;    margin-bottom: 20px;    padding: 20px 50px;    &amp;-main &#123;      flex: 1;    &#125;    &amp;-removeBtn &#123;      margin-left: 20px;      color: #f56c6c;    &#125;    &amp;__layout &#123;      display: flex;      align-items: center;      margin-bottom: 20px;      &amp;:last-child &#123;        margin-bottom: 0;      &#125;      .input &#123;        width: 240px;      &#125;      .span &#123;        font-size: 13px;        font-weight: bold;        margin-right: 10px;      &#125;    &#125;    &amp;-tags &#123;      flex: 1;    &#125;    &amp;-tag &#123;      margin-bottom: 10px;      margin-right: 10px;    &#125;  &#125;&#125;&lt;/style&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vueé¡¹ç›®åŠ¨æ€åˆ¶å®šå›¾ç‰‡</title>
      <link href="/2022/09/30/vue-mergeImg/"/>
      <url>/2022/09/30/vue-mergeImg/</url>
      
        <content type="html"><![CDATA[<h3 id="vueé¡¹ç›®åŠ¨æ€åˆ¶å®šå›¾ç‰‡"><a href="#vueé¡¹ç›®åŠ¨æ€åˆ¶å®šå›¾ç‰‡" class="headerlink" title="vueé¡¹ç›®åŠ¨æ€åˆ¶å®šå›¾ç‰‡"></a>vueé¡¹ç›®åŠ¨æ€åˆ¶å®šå›¾ç‰‡</h3><p><strong>ps:</strong> <em>ä¸šåŠ¡éœ€æ±‚ï¼šéœ€è¦åœ¨ä¸€å¼ æŒ‡å®šçš„èƒŒæ™¯å›¾ä¸Šæ”¾ä¸€å¼ ä»£è¡¨ç”¨æˆ·ä¿¡æ¯çš„äºŒç»´ç ï¼Œå¹¶åœ¨äºŒç»´ç åº•éƒ¨å†™ä¸€äº›ç¼–å·ï¼Œç„¶åç”Ÿæˆä¸€å¼ å›¾ç‰‡ä¸‹è½½â€¦</em></p><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><p><code>js-file-download</code> å¯ä»¥ç”¨æ¥ä¸‹è½½å›¾ç‰‡ï¼›</p><p><code>merge-images</code> å¯ä»¥æŠŠä¸¤å¼ å›¾ç‰‡åˆæˆä¸€å¼ ï¼›</p><p><code>qrcode</code> å¯ä»¥åŠ¨æ€ç”ŸæˆäºŒç»´ç å›¾ç‰‡ï¼›</p><pre><code class="bash">    npm i js-file-download    npm i merge-images    npm i qrcode </code></pre><h4 id="vue-Code"><a href="#vue-Code" class="headerlink" title="vue Code"></a>vue Code</h4><pre><code class="vue">&lt;script&gt;    import fileDownload from &quot;js-file-download&quot;;    import mergeImages from &quot;merge-images&quot;;    import QRCode from &quot;qrcode&quot;;    export default &#123;        methods:&#123;            downloadItem(ary, sleep = 1000)&#123;                let row = ary.shift();                if(!row)&#123;                    return                &#125;                let textImg = drawText(&#123;                    text: `$&#123;row.loginName&#125;_$&#123;row.shareCount&#125;`,                    color: &quot;#fff&quot;,                    fontSize: 30,                    width: &quot;750&quot;,                &#125;);                this.makeQrCode(row.shareCode).then((url) =&gt; &#123;                    mergeImages(                        [                        &quot;https://mdhw.oss-cn-hangzhou.aliyuncs.com/h5/share_bg.png?v=2.0&quot;,                        &#123; src: url, x: 149, y: 478 &#125;,                        &#123; src: textImg, x: 0, y: 995 &#125;,                        ],                        &#123;                        crossOrigin: &quot;Anonymous&quot;,                        &#125;                    ).then((b64) =&gt; &#123;                        fileDownload(                            dataURLtoFile(b64),                            `$&#123;row.loginName&#125;_$&#123;row.shareCount&#125;.png`                        );                        // éœ€è¦å»¶æ—¶ä¸‹è½½ï¼Œå› ä¸ºå¦‚æœæ‰¹é‡ä¸‹è½½çš„ ä¸”ä¸å»¶æ—¶ é‚£ä¹ˆä¼šå¯¼è‡´æ‰¹é‡ä¸‹è½½çš„å›¾ç‰‡éƒ¨åˆ†ä¸¢å¤±                        setTimeout(()=&gt;&#123;                            this.downloadItem(ary, sleep)                        &#125;, sleep)                    &#125;);                &#125;);            &#125;,                    makeQrCode(shareCode) &#123;                return QRCode.toDataURL(                    `https://www.nairongmiao.xyz/share.html?shareCode=$&#123;shareCode&#125;`,                    &#123;                    errorCorrectionLevel: &quot;H&quot;,                    width: 477,                    margin: 1,                    &#125;                );            &#125;,        &#125;    &#125;&lt;/script&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vueé¡¹ç›®é¡µé¢å¢åŠ æ°´å°</title>
      <link href="/2022/09/30/vue-waterMark/"/>
      <url>/2022/09/30/vue-waterMark/</url>
      
        <content type="html"><![CDATA[<h3 id="vueé¡¹ç›®é¡µé¢å¢åŠ æ°´å°"><a href="#vueé¡¹ç›®é¡µé¢å¢åŠ æ°´å°" class="headerlink" title="vueé¡¹ç›®é¡µé¢å¢åŠ æ°´å°"></a>vueé¡¹ç›®é¡µé¢å¢åŠ æ°´å°</h3><p><strong>ps:</strong> <em>é¢†å¯¼è¯´è¦åœ¨åå°ä¸Šé¢æ·»åŠ å¸¦ä¸Šç”¨æˆ·åå­—çš„æ°´å°ï¼Œå—¯â€¦åŠ ä¸ªæŒ‡ä»¤â€¦ï¼Œè¿˜æœ‰å°±æ˜¯å¯èƒ½éœ€è¦ä½¿ç”¨<code>pointer-event: none;</code>æ¥è®©è¿™ä¸ªæ°´å°å±‚ä¸ä¼šå½±å“åˆ°é¡µé¢çš„äº‹ä»¶æ“ä½œ</em></p><h4 id="vue-config-js-é…ç½®"><a href="#vue-config-js-é…ç½®" class="headerlink" title="vue.config.js é…ç½®"></a>vue.config.js é…ç½®</h4><pre><code class="js">    Vue.directive(&#39;watermark&#39;, (el,binding) =&gt; &#123;        let text = binding.value.text;        let font = binding.value.font || &quot;16px Microsoft JhengHei&quot;;        let textColor = binding.value.textColor || &quot;rgba(215, 215, 215, 0.2)&quot;;        let width = binding.value.width || 400;        let height = binding.value.height || 200;        let textRotate = binding.value.textRotate||-20;                function addWaterMarker(parentNode) &#123;            var can = document.createElement(&#39;canvas&#39;);            var cans = can.getContext(&#39;2d&#39;);            parentNode.appendChild(can);            can.width = width;            can.height = height;            can.style.display = &#39;none&#39;;            cans.rotate(textRotate * Math.PI / 180);            cans.font = font;            cans.fillStyle = textColor ;            cans.textAlign = &#39;left&#39;;            cans.textBaseline = &#39;Middle&#39;;            cans.fillText(text, 0,  can.height);            parentNode.style.backgroundImage = &quot;url(&quot; + can.toDataURL(&quot;image/png&quot;) + &quot;)&quot;;        &#125;        addWaterMarker(el)    &#125;)</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vueé¡¹ç›®å°ä¼˜åŒ–é…ç½®</title>
      <link href="/2022/09/30/vue-optimization/"/>
      <url>/2022/09/30/vue-optimization/</url>
      
        <content type="html"><![CDATA[<h3 id="vueé¡¹ç›®å°ä¼˜åŒ–é…ç½®"><a href="#vueé¡¹ç›®å°ä¼˜åŒ–é…ç½®" class="headerlink" title="vueé¡¹ç›®å°ä¼˜åŒ–é…ç½®"></a>vueé¡¹ç›®å°ä¼˜åŒ–é…ç½®</h3><p><strong>ps:</strong> <em>éƒ¨ç½²åˆ°çº¿ä¸Šçš„æ—¶å€™ç½‘é¡µåŠ è½½å¾ˆæ…¢â€¦ï¼Œé¢†å¯¼å«æˆ‘å»ä¼˜åŒ–ä¸‹ï¼Œäºæ˜¯å°±ç›´æ¥ç”¨<code>gzip</code>å‹ç¼©å¤§æ³•ï¼Œä½†æ˜¯éœ€è¦åç«¯é…åˆå¼€å¯gzipï¼Œå—¯â€¦é€Ÿåº¦é£èµ·â€¦</em></p><p><code>webpack-bundle-analyzer</code>å¯ä»¥å¸®æˆ‘ä»¬è¿›è¡Œæ‰“åŒ…åˆ†æï¼Œé¿å…é‡å¤æ‰“åŒ…ï¼Œä»¥åŠåˆç†ä»£ç åˆ†å‰²</p><h4 id="vue-config-js-é…ç½®"><a href="#vue-config-js-é…ç½®" class="headerlink" title="vue.config.js é…ç½®"></a>vue.config.js é…ç½®</h4><pre><code class="js">    const BundleAnalyzerPlugin = require(&#39;webpack-bundle-analyzer&#39;).BundleAnalyzerPlugin;    chainWebpack(config)&#123;        // ...        config            .when(process.env.NODE_ENV !== &#39;development&#39;,                config =&gt; &#123;                    /* æ‰“åŒ…åˆ†ææ’ä»¶ */                    config                        .plugin(&#39;webpackBundleAnalyzer&#39;)                        .use(BundleAnalyzerPlugin)                    /* å¼€å¯gzipå‹ç¼©ï¼Œéœ€è¦åç«¯é…åˆ */                    config                        .plugin(&#39;compressionWebpackPlugin&#39;)                        .use(&#39;compression-webpack-plugin&#39;, [&#123;                            filename: &#39;[path].gz[query]&#39;,                            algorithm: &#39;gzip&#39;,                            test: new RegExp(&quot;\\.(&quot; + productionGzipExtensions.join(&quot;|&quot;) + &quot;)$&quot;),                            threshold: 10240,                            minRatio: 0.8,                            deleteOriginalAssets: false                        &#125;])                    /* é…ç½®æ‰“åŒ…ååˆ é™¤console.logå’Œdebugger */                    config.optimization.minimizer(&#39;terser&#39;).tap((args) =&gt; &#123;                        args[0].terserOptions.compress.drop_debugger = true                        args[0].terserOptions.compress.pure_funcs = [&#39;console.log&#39;]                        return args                    &#125;)                    /* ä»£ç åˆ†å‰² */                    config                        .optimization.splitChunks(&#123;                            chunks: &#39;all&#39;, // all-åŒæ­¥å¼‚æ­¥éƒ½åˆ†å‰²,inital-å¯¹åŒæ­¥åˆ†å‰²,async-å¯¹å¼‚æ­¥åˆ†å‰²                            cacheGroups: &#123;                                libs: &#123;                                    name: &#39;chunk-libs&#39;, // ç»„å                                    test: /[\\/]node_modules[\\/]/,                                    priority: 10, // ä¼˜å…ˆçº§                                    /* minSize: 5 * 1024 // è¾¾åˆ°5kbæ‰åˆ†å‰² */                                    /* minChunks: 1 // å¼•ç”¨1æ¬¡å°±å•ç‹¬æ‰“åŒ… */                                &#125;,                                elementUI: &#123;                                    name: &#39;chunk-elementUI&#39;,                                     priority: 20,                                     test: /[\\/]node_modules[\\/]_?element-ui(.*)/                                 &#125;,                                commons: &#123;                                    name: &#39;chunk-commons&#39;,                                    test: resolve(&#39;src/components&#39;),                                     minChunks: 3,                                    priority: 5,                                    reuseExistingChunk: true                                &#125;                            &#125;                        &#125;)                &#125;            )    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHPå¤„ç†å›¾ç‰‡</title>
      <link href="/2022/09/29/php-dealImage/"/>
      <url>/2022/09/29/php-dealImage/</url>
      
        <content type="html"><![CDATA[<h3 id="ä½¿ç”¨GDåº“å®ç°å›¾ç‰‡å¤„ç†å·¥å…·å‡½æ•°"><a href="#ä½¿ç”¨GDåº“å®ç°å›¾ç‰‡å¤„ç†å·¥å…·å‡½æ•°" class="headerlink" title="ä½¿ç”¨GDåº“å®ç°å›¾ç‰‡å¤„ç†å·¥å…·å‡½æ•°"></a>ä½¿ç”¨GDåº“å®ç°å›¾ç‰‡å¤„ç†å·¥å…·å‡½æ•°</h3><p><strong>ps:</strong> <em>ä½¿ç”¨phpå®Œæˆå¯¹å›¾ç‰‡çš„è£åˆ‡æˆ–è€…è°ƒæ•´å›¾ç‰‡å¤§å°(ç¼©æ”¾)</em></p><h4 id="php-Code"><a href="#php-Code" class="headerlink" title="php Code"></a>php Code</h4><pre><code class="php">&lt;?php    /* img_deal(String $file,String $save,Array $options)å‚æ•°        $file ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„è·¯å¾„        $save ä¿å­˜çš„è·¯å¾„            $optionså‚æ•°:        - type è£åˆ‡(clip)æˆ–è€…æ˜¯ç¼©æ”¾(scale) é»˜è®¤è£åˆ‡            - scaleå‚æ•° (è‡³å°‘å†™ä¸€ä¸ªå‚æ•°)        - scale_w ç¼©æ”¾åçš„å®½åº¦ (å¦‚æœåªè®¾ç½®å…¶ä¸­ä¸€å€¼åˆ™æŒ‰åŸå›¾æ¯”ä¾‹ç¼©æ”¾)        - scale_h ç¼©æ”¾åçš„é«˜åº¦            - clipå‚æ•° (å…¨éƒ½å¾—å†™)        - clip_w è£åˆ‡åçš„å®½åº¦        - clip_h è£åˆ‡åçš„é«˜åº¦        - clip_x è£åˆ‡èµ·ç‚¹xåæ ‡(ä»¥å›¾ç‰‡å·¦ä¸Šé¡¶ç‚¹ä¸ºåŸç‚¹,å‘ä¸‹yæ­£æ–¹å‘,å‘å³xæ­£æ–¹å‘)        - clip_y è£åˆ‡èµ·ç‚¹yåæ ‡    */    function img_deal($file,$save,$options)&#123;            //ä¸Šä¼ çš„åŸå›¾ç‰‡        $img_src = imagecreatefromjpeg($file);        //åŸå›¾ç‰‡çš„å®½é«˜        $src_w = imagesx($img_src);        $src_h = imagesy($img_src);                switch ($options[&#39;type&#39;]) &#123;            case &#39;scale&#39;:                if(is_numeric($options[&#39;scale_w&#39;]) &amp;&amp; is_numeric($options[&#39;scale_h&#39;]))&#123;                    $dist_w = $options[&#39;scale_w&#39;];                    $dist_h = $options[&#39;scale_h&#39;];                &#125;elseif(is_numeric($options[&#39;scale_w&#39;]))&#123;                    $dist_w = $options[&#39;scale_w&#39;];                    $dist_h = $src_h*$dist_w/$src_w;                &#125;elseif(is_numeric($options[&#39;scale_h&#39;]))&#123;                    $dist_h = $options[&#39;scale_h&#39;];                    $dist_w = $src_w*$dist_h/$src_h;                &#125;else&#123;                    echo &#39;Image deal is Failed&lt;br&gt;&#39;;                    return false;                &#125;                //è®¾ç½®ç›®æ ‡å›¾ç‰‡å¤§å°                $img_dist = imagecreatetruecolor($dist_w,$dist_h);                //å›¾ç‰‡è¿›è¡Œå¤„ç†                imagecopyresampled($img_dist, $img_src, 0, 0, 0, 0, $dist_w, $dist_h, $src_w, $src_h);                    break;                        default:                //è®¾ç½®ç›®æ ‡å›¾ç‰‡å¤§å°                $img_dist = imagecreatetruecolor($options[&#39;clip_w&#39;],$options[&#39;clip_h&#39;]);                $keys = array_keys($options);                $str = implode($keys, &#39;,&#39;);                preg_match_all(&#39;/clip_/&#39;, $str, $matches);                if(count($matches[0]) !== 4)&#123;                    echo &#39;Image deal is Failed&lt;br&gt;&#39;;                    return false;                &#125;                    //å›¾ç‰‡è¿›è¡Œå¤„ç†                imagecopyresampled($img_dist, $img_src, 0, 0, $options[&#39;clip_x&#39;], $options[&#39;clip_y&#39;], $options[&#39;clip_w&#39;], $options[&#39;clip_h&#39;], $options[&#39;clip_w&#39;], $options[&#39;clip_h&#39;]);                                break;                        &#125;        //å°†å›¾ç‰‡ä¿å­˜        $status = imagejpeg($img_dist,$save);        if($status)&#123;            echo &#39;Image deal is Success&lt;br&gt;&#39;;        &#125;else&#123;            echo &#39;Image deal is Failed&lt;br&gt;&#39;;        &#125;        //é‡Šæ”¾å†…å­˜ç©ºé—´        imagedestroy($img_dist);        imagedestroy($img_src);            //è¿”å›ä¿å­˜çŠ¶æ€ç»“æœ        return $status;        &#125; ?&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>axiosæ‹¦æˆªå™¨é…ç½®</title>
      <link href="/2022/09/29/axios-axiosInterceptor/"/>
      <url>/2022/09/29/axios-axiosInterceptor/</url>
      
        <content type="html"><![CDATA[<h3 id="axiosæ‹¦æˆªå™¨é…ç½®"><a href="#axiosæ‹¦æˆªå™¨é…ç½®" class="headerlink" title="axiosæ‹¦æˆªå™¨é…ç½®"></a>axiosæ‹¦æˆªå™¨é…ç½®</h3><p><strong>ps:</strong> <em>httpè¯·æ±‚å¾ˆå¤šéƒ½å–œæ¬¢é…ç½®æ‹¦æˆªå™¨ï¼Œç”Ÿæˆä¸“å±requestæ–¹æ³•ï¼Œé€šè¿‡è®¾ç½®è¯·æ±‚æ‹¦æˆªå™¨æ³¨å…¥tokenï¼Œè®¾ç½®å“åº”æ‹¦æˆªå™¨å¯¹å“åº”ä½œå‡ºå“åº”çš„å¤„ç†ï¼Œæ¯”å¦‚æŠ¥é”™ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡åœ¨catché‡Œå»æç¤ºé”™è¯¯ä¿¡æ¯äº†</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    import axios from &quot;axios&quot;;    import router from &#39;@/router/index.js&#39;;    import &#123; Message &#125; from &quot;element-ui&quot;;    import &#123; getToken, removeToken &#125; from &#39;@/utils/auth&#39;    const service = axios.create(&#123;    timeout: 20000 // è¯·æ±‚è¶…æ—¶æ—¶é—´    &#125;);    // requestæ‹¦æˆªå™¨ï¼Œ    service.interceptors.request.use(    config =&gt; &#123;        // æƒé™æ ¡éªŒ        var sysToken = getToken();        if (sysToken &amp;&amp; sysToken.length &gt; 0) &#123;        config.headers[&#39;Authorization&#39;] = sysToken        &#125;        return config;    &#125;,    error =&gt; &#123;        return Promise.reject(error);    &#125;    );    // responseæ‹¦æˆªå™¨ï¼Œ    service.interceptors.response.use(    response =&gt; &#123;        if (response.config.responseType === &#39;blob&#39;) &#123;        if (response.status != 200) &#123;            Message.error(&#39;è¯·æ±‚å¤±è´¥&#39; + response.status);            return Promise.reject()        &#125; else if (!response.headers[&quot;content-disposition&quot;]) &#123;            Message.error(&#39;æš‚æ— æ¥å£è®¿é—®æƒé™&#39;);            return Promise.reject()        &#125;        return response        &#125; else &#123;        if (response.data.code !== 0) &#123;            let errMsg = response.data.msg;            if (response.data.code == 401) &#123; // tokenå¤±æ•ˆ            if (getToken()) &#123;                Message.error(errMsg);                removeToken()                router.replace(&#39;/Login&#39;)            &#125;            &#125; else &#123;            Message.error(errMsg);            &#125;            return Promise.reject(errMsg)        &#125;        return response.data;        &#125;    &#125;,    error =&gt; &#123;        Message.error(&#39;è¯·æ±‚æœåŠ¡å™¨å¤±è´¥&#39;);        return Promise.reject(error);    &#125;    );    export default service</code></pre>]]></content>
      
      
      <categories>
          
          <category> Axios </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€ç”Ÿæˆvueè·¯ç”±</title>
      <link href="/2022/09/29/vue-makeRoutes/"/>
      <url>/2022/09/29/vue-makeRoutes/</url>
      
        <content type="html"><![CDATA[<h3 id="åŠ¨æ€ç”Ÿæˆvueè·¯ç”±"><a href="#åŠ¨æ€ç”Ÿæˆvueè·¯ç”±" class="headerlink" title="åŠ¨æ€ç”Ÿæˆvueè·¯ç”±"></a>åŠ¨æ€ç”Ÿæˆvueè·¯ç”±</h3><p><strong>ps:</strong> <em>å®ç°åŠ¨æ€è·¯ç”±ï¼Œé€šè¿‡åç«¯è¿”å›çš„èœå•ï¼Œç„¶å<code>addRoutes</code>è¿›è¡ŒåŠ¨æ€ç”Ÿæˆvueçš„è·¯ç”±ï¼Œè¯¦æƒ…ï¼š<a href="https://www.cnblogs.com/shaoyunfeng93/p/16266729.html">https://www.cnblogs.com/shaoyunfeng93/p/16266729.html</a></em></p><h4 id="vue-Code"><a href="#vue-Code" class="headerlink" title="vue Code"></a>vue Code</h4><p>å› ä¸ºåœ¨è·¯ç”±ä¸­å­˜åœ¨æ¯«æ— å®æ„çš„çˆ¶çº§ç›®å½•ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸ª<code>router-view</code>æ¥æ‰¿æ¥å­é¡µé¢çš„å±•ç¤º</p><pre><code class="vue">// RouterViewç»„ä»¶&lt;template&gt;  &lt;router-view&gt;&lt;/router-view&gt;&lt;/template&gt;</code></pre><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><p>åŠ¨æ€ç”Ÿæˆè·¯ç”±éœ€è¦å’Œåç«¯å¼€å‘äººå‘˜çº¦å®šå¥½é…ç½®çš„å‚æ•°,è€Œä¸”<em>åç«¯é…ç½®çš„urléœ€è¦å’Œå‰ç«¯æ–‡ä»¶çš„ç›®å½•ç»“æ„ä¸€è‡´</em>â€¦<br>ç”¨æ¥å¤„ç†åç«¯è¿”å›çš„èœå•æ‹¼æ¥æˆ<code>vue-router</code>çš„æ ¼å¼, è¯¥vueé¡¹ç›®æ˜¯æ ¹æ®<code>vue-admin-template</code>æ¨¡æ¿<strong>äºŒæ¬¡å¼€å‘</strong>çš„â€¦</p><pre><code class="js">  // åŠ è½½è§†å›¾ç»„ä»¶  function loadView(componentUrl) &#123;      return resolve =&gt; require.ensure([], () =&gt; resolve(require(&#39;@/views&#39; + componentUrl)))  &#125;  // é€’å½’æ„é€ è·¯ç”±  function buildRoutes(routes) &#123;      return routes.map(route =&gt; &#123;          let _route = &#123;&#125;;          let meta = &#123;              title: route.name,              icon: route.icon,          &#125;;          if (route.type == 1) &#123; // ç›®å½•              _route.component = route.parentId == 0 ? Layout : RouterView;              if (route.children &amp;&amp; route.children[0]) &#123;                  _route.redirect = route.children[0].path;              &#125;          &#125; else if (route.type == 2) &#123; // èœå•              _route.component = loadView(route.url)              meta.actionButtonList = route.children || [];          &#125;          return &#123;              path: route.url,              name: route.code,              ..._route,              meta,              children: route.type == 1 ? buildRoutes(route.children || []) : [], // åªæœ‰ç›®å½•æ‰å»åœ¨æ„é€ childrenè·¯ç”±          &#125;      &#125;)  &#125;  // é€’å½’è¿‡æ»¤æ‰æœ‰é‡å®šå‘å´æ²¡æœ‰childrençš„çˆ¶çº§è·¯ç”±  function filterAsyncRoutes(routes) &#123;      routes = routes.filter(d =&gt; &#123;          return d.type != 1 || (d.children &amp;&amp; d.children.length &gt; 0)      &#125;)      routes.forEach(route =&gt; &#123;          if (route.children &amp;&amp; route.children.length &gt; 0) &#123;              route.children = filterAsyncRoutes(route.children)          &#125;      &#125;)      return routes  &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç›‘å¬ç”¨æˆ·è¿”å›é¡µé¢</title>
      <link href="/2022/09/29/js-listenUserBack/"/>
      <url>/2022/09/29/js-listenUserBack/</url>
      
        <content type="html"><![CDATA[<h3 id="ç›‘å¬ç”¨æˆ·è¿”å›é¡µé¢"><a href="#ç›‘å¬ç”¨æˆ·è¿”å›é¡µé¢" class="headerlink" title="ç›‘å¬ç”¨æˆ·è¿”å›é¡µé¢"></a>ç›‘å¬ç”¨æˆ·è¿”å›é¡µé¢</h3><h4 id="ä¸šåŠ¡åœºæ™¯"><a href="#ä¸šåŠ¡åœºæ™¯" class="headerlink" title="ä¸šåŠ¡åœºæ™¯"></a>ä¸šåŠ¡åœºæ™¯</h4><p>åœ¨h5æ”¯ä»˜é¡µé¢å®Œæˆåï¼Œéœ€è¦åˆ¤æ–­ç”¨æˆ·è¿”å›å†å»è¯·æ±‚åç«¯æ¥å£æ˜¯å¦æ”¯ä»˜æˆåŠŸï¼Œåœ¨è¿›è¡Œåç»­æ­¥éª¤â€¦</p><h4 id="code-Explain"><a href="#code-Explain" class="headerlink" title="code Explain"></a>code Explain</h4><p>è¿™è¾¹å°±åªå±•ç¤ºè§£å†³å…¼å®¹ç§»åŠ¨ç«¯æµè§ˆå™¨å»è¯·æ±‚åç«¯æ˜¯å¦æ”¯ä»˜è®¢å•çš„æ­¥éª¤ï¼›</p><p>è§£é‡Šä¸€ä¸‹ä¸ºå•¥ä½¿ç”¨ä¸¤ç§ç›‘å¬äº‹ä»¶ï¼Œè¿˜æœ‰ä¸ºå•¥è¦ç”¨sessionStorageå»å­˜å‚¨sign_payingè¿™ä¸ªæ˜¯å¦æ”¯ä»˜ä¸­çŠ¶æ€</p><p>åœ¨ä¸€äº›ç§»åŠ¨ç«¯æµè§ˆå™¨ä¸­ï¼Œå„ä¸ªæµè§ˆå™¨äº”èŠ±å…«é—¨ï¼Œä¸€äº›æµè§ˆå™¨çš„è¡Œä¸ºä¹Ÿåƒå§¿ç™¾æ€ï¼Œ</p><p>åœ¨iosçš„safariæµè§ˆå™¨ä¸­ï¼Œå‰è¿›åé€€æ˜¯èµ°ç¼“å­˜çš„ï¼Œå®‰å“æµè§ˆå™¨ä¸­ä¸€äº›èµ°ç¼“å­˜ä¸€äº›ä¸èµ°ç¼“å­˜ï¼Œå¦‚æœä¸ç”¨localStorageå­˜å‚¨çŠ¶æ€æ¯æ¬¡å‰è¿›åé€€ä¼šå¯¼è‡´sign_payingä¸€ç›´éƒ½è¢«é‡ç½®ä¸ºfalseï¼Œå¯¼è‡´ä¸å»è¯·æ±‚æ”¯ä»˜ç»“æœæ¥å£ï¼Œä»è€Œå¯¼è‡´ä¸æ‰§è¡Œæ”¯ä»˜æˆåŠŸæˆ–å¤±è´¥çš„é€»è¾‘</p><p>pageshowäº‹ä»¶æ˜¯ä¸ç®¡é¡µé¢èµ°ä¸èµ°ç¼“å­˜éƒ½ä¼šè§¦å‘çš„windowäº‹ä»¶ï¼Œé¡µé¢åˆ·æ–°ä¹Ÿä¼šæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æ¥åˆ°è¿™ä¸ªé¡µé¢å°±æ‰§è¡Œï¼Œä½†æ˜¯åå°æŒ‚èµ·åœ¨æ‰“å¼€ä¸æ‰§è¡Œ</p><p>visibilitychangeäº‹ä»¶å°†åå°æŒ‚èµ·åœ¨æ‰“å¼€ä¼šæ‰§è¡Œï¼Œ</p><p>æ­£å¦‚ä¸Šé¢æ‰€è¯´çš„å„ä¸ªæµè§ˆå™¨å¿ƒæ€€é¬¼èƒï¼Œæˆ‘ä»¬éƒ½çŒœä¸åˆ°ä»–ä»¬çš„è¡Œä¸ºæ˜¯å¦‚ä½•çš„ï¼Œåœ¨æ‹‰èµ·æ”¯ä»˜å®ï¼ˆé’ˆå¯¹åŸç”Ÿæ”¯ä»˜ï¼‰çš„è¡Œä¸ºä¸Šä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œå°±æˆ‘æµ‹è¯•çš„iosæ˜¯ç›´æ¥è·³åˆ°æ–°çš„é¡µé¢åœ¨æç¤ºæ‹‰èµ·ï¼ˆäº§ç”Ÿå‰è¿›&#x2F;åé€€ï¼‰ï¼Œåœ¨å®‰å“ä¸Šæœ‰çš„ä¹Ÿæ˜¯è·³åˆ°æ–°çš„é¡µé¢åœ¨æç¤ºæ‹‰èµ·ï¼ˆäº§ç”Ÿå‰è¿›&#x2F;åé€€ï¼‰ï¼Œæœ‰çš„ç›´æ¥åœ¨å½“å‰é¡µå°±ç›´æ¥æç¤ºæ‹‰èµ·ï¼ˆä¸äº§ç”Ÿå‰è¿›&#x2F;åé€€ï¼‰ï¼›</p><p>å› æ­¤åŒæ—¶ç›‘å¬ä¸Š2ä¸ªäº‹ä»¶ï¼Œå¹¶åœ¨ç›‘å¬äº‹ä»¶é‡ŒåŠ ä¸ŠhttpCount:0æ—¶æ‰èƒ½æ‰§è¡ŒhttpQueryOrderPayï¼Œ signStackæ˜¯ç”¨æ¥é™åˆ¶åªèµ°ä¸€éæŸ¥è¯¢ï¼Œå› ä¸º2ä¸ªç›‘å¬å¯èƒ½åŒæ—¶éƒ½ä¼šæ‰§è¡ŒhttpQueryOrderPay</p><p>è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å¯èƒ½æœ‰äººä¼šè§‰å¾—å¥‡æ€ªä¸ºä»€ä¹ˆæŠŠhttpQueryOrderPayç”¨setTimeoutå˜ä¸ºå¼‚æ­¥ï¼Œ å› ä¸ºåœ¨éƒ¨åˆ†æ‰‹æœºï¼ˆåœ¨æˆ‘æµ‹è¯•æ¥çœ‹ ä¸‰æ˜Ÿé»˜è®¤æµè§ˆå™¨å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼‰ä¼šå¯¼è‡´ajaxè¯·æ±‚xhr.statusè¿”å›0ï¼Œå¯¼è‡´ç›´æ¥èµ°åˆ°errorï¼›å…·ä½“åŸå› æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šT_Tï¼Œä½†æ˜¯åªè¦å¼‚æ­¥ä¸€ä¸‹å°±OKäº†ã€‚</p><p>è¿™äº›ä¹Ÿåªæ˜¯ä¸ºäº†çŸ¥é“å•¥æ—¶å€™æ‰å»è¯·æ±‚æ”¯ä»˜ç»“æœæ¥å£ï¼Œä¸ç„¶ä¹Ÿå¤§å¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸€å±•ç¤ºå°±å»è¯·æ±‚è½®è¯¢ï¼Œä½†æ˜¯å¯¹æœåŠ¡å™¨å‹åŠ›å¤ªå¤§~</p><p><strong>ps:</strong> <em>ä»¥ä¸‹å…¶å®æ˜¯vueçš„ä»£ç â€¦å‹‰å¼ºçœ‹ä¸€ä¸‹â€¦</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    // visibilityChangeäº‹ä»¶å…¼å®¹æ€§å†™æ³•    var hidden, visibilityChange;    if (typeof document.hidden !== &quot;undefined&quot;) &#123; // Opera 12.10 and Firefox 18 and later support        hidden = &quot;hidden&quot;;        visibilityChange = &quot;visibilitychange&quot;;    &#125; else if (typeof document.msHidden !== &quot;undefined&quot;) &#123;        hidden = &quot;msHidden&quot;;        visibilityChange = &quot;msvisibilitychange&quot;;    &#125; else if (typeof document.webkitHidden !== &quot;undefined&quot;) &#123;        hidden = &quot;webkitHidden&quot;;        visibilityChange = &quot;webkitvisibilitychange&quot;;    &#125;    // ç›‘å¬ç”¨æˆ·è¿”å›é¡µé¢çš„äº‹ä»¶    if (sessionStorage.getItem(&#39;qyyz_paying&#39;) == &#39;true&#39;) &#123;        this.signStack.push(&#39;reload&#39;)        this.httpQueryOrderPay(&#39;reload&#39;);    &#125;    window.addEventListener(&#39;pageshow&#39;, this.pageShow, false);    document.addEventListener(visibilityChange, this.visibilityChange, false);    // å‚æ•°è¯´æ˜ï¼š httpCount: è¯·æ±‚æ˜¯å¦æ”¯ä»˜çš„æ¥å£æ¬¡æ•°, httpQueryOrderPayæ ¹æ®è‡ªå·±çš„æ¥å£é€»è¾‘æ¥æ›¿æ¢ï¼Œ    methods: &#123;        pageShow() &#123;            if (sessionStorage.getItem(&#39;sign_paying&#39;) == &#39;true&#39;) &#123; // æ˜¯å¦æ”¯ä»˜ä¸­                // è½®è¯¢æ˜¯å¦æ”¯ä»˜äº†            this.signStack.push(&#39;pageShow&#39;);                setTimeout(() =&gt; &#123;                    this.httpQueryOrderPay(&#39;pageShow&#39;);                &#125;, 0)            &#125;        &#125;,        visibilityChange() &#123;            if (!document[hidden]) &#123;                if (sessionStorage.getItem(&#39;sign_paying&#39;) == &#39;true&#39;) &#123; // æ˜¯å¦æ”¯ä»˜ä¸­                    // è½®è¯¢æ˜¯å¦æ”¯ä»˜äº†                this.signStack.push(&#39;visibilityChange&#39;);                    setTimeout(() =&gt; &#123;                        this.httpQueryOrderPay(&#39;visibilityChange&#39;);                    &#125;, 0)                &#125;            &#125;        &#125;,        httpQueryOrderPay(type) &#123;            if (type !== this.signStack[0]) &#123; // è°æœ€å…ˆæ‰§è¡Œå°±èµ°å“ªä¸ª                return;            &#125;            this.httpCount++;            ajax(&#123;                url: &#39;æŸ¥è¯¢è®¢å•æ”¯ä»˜ç»“æœçš„æ¥å£&#39;,                type: &#39;get&#39;,                data: &#123;                    orderId: è®¢å•id                &#125;,                success: res =&gt; &#123;                    if (res.result) &#123;                        this.httpCount = 0;                        sessionStorage.setItem(&#39;sign_paying&#39;, false);                    &#125; else &#123;                        if (this.httpCount &lt; 3) &#123; // è½®è¯¢ä¸è¶…è¿‡3æ¬¡                            setTimeout(() =&gt; &#123;                                this.httpQueryOrderPay(type);                            &#125;, 500)                        &#125; else if (this.httpCount == 3) &#123; // è½®è¯¢åˆ°ç¬¬3æ¬¡æ²¡æœ‰æ‰¾åˆ°,åˆ™æç¤ºç”¨æˆ·                            this.httpCount = 0;                            sessionStorage.setItem(&#39;sign_paying&#39;, false);                            // æŒ½ç•™æç¤º                        &#125;                    &#125;                &#125;,                //å¼‚å¸¸å¤„ç†                error: e =&gt; &#123;                    this.httpCount = 0;                    sessionStorage.setItem(&#39;sign_paying&#39;, false);                &#125;            &#125;)        &#125;,    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>jsæ‰‹å†™å‡½æ•°</title>
      <link href="/2022/09/29/js-handWriteFunc/"/>
      <url>/2022/09/29/js-handWriteFunc/</url>
      
        <content type="html"><![CDATA[<h3 id="jsæ‰‹å†™å‡½æ•°"><a href="#jsæ‰‹å†™å‡½æ•°" class="headerlink" title="jsæ‰‹å†™å‡½æ•°"></a>jsæ‰‹å†™å‡½æ•°</h3><p><strong>ps:</strong> <em>å¥½åƒé¢è¯•çš„æ—¶å€™éƒ½å–œæ¬¢è®©æ‰‹å†™ â€¦</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    // urlçš„queryStringè½¬æˆå¯¹è±¡    function queryStr2Obj(url) &#123;        const query = &#123;&#125;;        const search = url.split(&#39;?&#39;)[1];        if (!search) &#123;            return &#123;&#125;        &#125;        search.split(&#39;&amp;&#39;).forEach(item =&gt; &#123;            let [key, value] = item.replace(&#39;=&#39;, &#39;:&#39;).split(&#39;:&#39;);            query[key] = decodeURIComponent(value);        &#125;);        return query;    &#125;    // listæ•°ç»„è½¬treeæ•°ç»„    const currentArray = [        &#123; id: &quot;01&quot;, name: &quot;å¼ å¤§å¤§&quot;, pid: &quot;&quot;, job: &quot;é¡¹ç›®ç»ç†&quot; &#125;,        &#123; id: &quot;02&quot;, name: &quot;å°äº®&quot;, pid: &quot;01&quot;, job: &quot;äº§å“leader&quot; &#125;,        &#123; id: &quot;03&quot;, name: &quot;å°ç¾&quot;, pid: &quot;01&quot;, job: &quot;UIleader&quot; &#125;,        &#123; id: &quot;04&quot;, name: &quot;è€é©¬&quot;, pid: &quot;01&quot;, job: &quot;æŠ€æœ¯leader&quot; &#125;,        &#123; id: &quot;05&quot;, name: &quot;è€ç‹&quot;, pid: &quot;01&quot;, job: &quot;æµ‹è¯•leader&quot; &#125;,        &#123; id: &quot;06&quot;, name: &quot;è€æ&quot;, pid: &quot;01&quot;, job: &quot;è¿ç»´leader&quot; &#125;,        &#123; id: &quot;07&quot;, name: &quot;å°ä¸½&quot;, pid: &quot;02&quot;, job: &quot;äº§å“ç»ç†&quot; &#125;,        &#123; id: &quot;08&quot;, name: &quot;å¤§å…‰&quot;, pid: &quot;02&quot;, job: &quot;äº§å“ç»ç†&quot; &#125;,        &#123; id: &quot;09&quot;, name: &quot;å°é«˜&quot;, pid: &quot;03&quot;, job: &quot;UIè®¾è®¡å¸ˆ&quot; &#125;,        &#123; id: &quot;10&quot;, name: &quot;å°åˆ˜&quot;, pid: &quot;04&quot;, job: &quot;å‰ç«¯å·¥ç¨‹å¸ˆ&quot; &#125;,        &#123; id: &quot;11&quot;, name: &quot;å°å&quot;, pid: &quot;04&quot;, job: &quot;åç«¯å·¥ç¨‹å¸ˆ&quot; &#125;,        &#123; id: &quot;12&quot;, name: &quot;å°æ&quot;, pid: &quot;04&quot;, job: &quot;åç«¯å·¥ç¨‹å¸ˆ&quot; &#125;,        &#123; id: &quot;13&quot;, name: &quot;å°èµµ&quot;, pid: &quot;05&quot;, job: &quot;æµ‹è¯•å·¥ç¨‹å¸ˆ&quot; &#125;,        &#123; id: &quot;14&quot;, name: &quot;å°å¼º&quot;, pid: &quot;05&quot;, job: &quot;æµ‹è¯•å·¥ç¨‹å¸ˆ&quot; &#125;,        &#123; id: &quot;15&quot;, name: &quot;å°æ¶›&quot;, pid: &quot;06&quot;, job: &quot;è¿ç»´å·¥ç¨‹å¸ˆ&quot; &#125;    ];    function list2tree(list, pid) &#123;        let children = list.filter(item =&gt; item.pid == pid);        return children.map(item =&gt; &#123;            item.children = list2tree(list, item.id);            return item;        &#125;)    &#125;    // treeæ•°ç»„è½¬listæ•°ç»„    function tree2list(tree) &#123;        const list = [], queue = [...tree];        while (queue.length) &#123;            let &#123; children, ...node &#125; = queue.shift();            if (children) &#123;                queue.push(...children)            &#125;            list.push(node)        &#125;        return list;    &#125;    // å¤šç»´æ•°ç»„ï¼Œæ¯æ¯å…ƒç´ ç»„åˆï¼Œä¸é‡å¤    /*    * å¦‚ï¼š arr =  [[1,2],[3,4]]  =&gt; combination(arr) =&gt; [[1,3],[1,4],[2,3],[2,4]]    */    function combination(arr) &#123;        const ary = [];        const store = [];        const fn = function (i = 0) &#123;            for (let j = 0; j &lt; arr[i].length; j++) &#123;                if (i &lt; arr.length - 1) &#123;                    store[i] = arr[i][j];                    fn(i + 1)                &#125; else &#123;                    ary.push([...store, arr[i][j]])                &#125;            &#125;        &#125;        fn();        return ary;    &#125;    // å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆæ€è·¯ï¼šé€’å½’æ”¶é›†å‚æ•°ï¼Œå‚æ•°åˆšå¥½æ—¶è°ƒç”¨åŸå‡½æ•°ï¼‰    function curry(fn, args = []) &#123;        return (...arg) =&gt; &#123;            let _arg = args.concat(arg)            if (_arg.length != fn.length) &#123;                return curry(fn, _arg)            &#125; else &#123;                return fn(..._arg)            &#125;        &#125;    &#125;    // èŠ‚æµ    function throttle(fn, delay) &#123;        // é‡ç½®å®šæ—¶å™¨        let timer = null;        // è¿”å›é—­åŒ…å‡½æ•°        return function () &#123;            // è®°å½•äº‹ä»¶å‚æ•°            let args = arguments;            // å¦‚æœå®šæ—¶å™¨ä¸ºç©º            if (!timer) &#123;                // å¼€å¯å®šæ—¶å™¨                timer = setTimeout(() =&gt; &#123;                    // æ‰§è¡Œå‡½æ•°                    fn.apply(this, args);                    // å‡½æ•°æ‰§è¡Œå®Œæ¯•åé‡ç½®å®šæ—¶å™¨                    timer = null;                &#125;, delay);            &#125;        &#125;    &#125;    // é˜²æŠ–    function debounce(fn, delay = 500) &#123;        // timeræ˜¯ä¸€ä¸ªå®šæ—¶å™¨        let timer = null;        // è¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œç”¨é—­åŒ…ä¿å­˜timerç¡®ä¿å…¶ä¸ä¼šé”€æ¯ï¼Œé‡å¤ç‚¹å‡»ä¼šæ¸…ç†ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨        return function () &#123;            // ä¿å­˜äº‹ä»¶å‚æ•°ï¼Œé˜²æ­¢fnå‡½æ•°éœ€è¦äº‹ä»¶å‚æ•°é‡Œçš„æ•°æ®            let arg = arguments;            // è°ƒç”¨ä¸€æ¬¡å°±æ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨            clearTimeout(timer);            // å¼€å¯è¿™ä¸€æ¬¡çš„å®šæ—¶å™¨            timer = setTimeout(() =&gt; &#123;                // è‹¥ä¸æ”¹å˜thisæŒ‡å‘ï¼Œåˆ™ä¼šæŒ‡å‘fnå®šä¹‰ç¯å¢ƒ                fn.apply(this, arg);            &#125;, delay)        &#125;    &#125;    // call    function mycall(that, ...args) &#123;        that = that == null ? window : new Object(that)        that.fn = this;        that.fn(...args);        delete that.fn;    &#125;    Function.prototype.mycall = mycall    // apply    function myapply(that, args) &#123;        that = that == null ? window : new Object(that)        that.fn = this;        that.fn(...args);        delete that.fn;    &#125;    Function.prototype.myapply = myapply    // bind    function mybind(that) &#123;        let fn = this;        return function (...args) &#123;            fn.apply(that, args);        &#125;    &#125;    Function.prototype.mybind = mybind    // new    function myNew(fn, ...args) &#123;        let obj = Object.create(fn.prototype);        fn.apply(obj, args);        return obj;    &#125;    // instanceofå®ç°    function instanceOf(origin, target) &#123;        while (1) &#123;            if (origin.__proto__ == target.prototype) &#123;                return true            &#125;            if (origin.__proto__ == null) &#123;                return false            &#125;            origin = origin.__proto__        &#125;    &#125;    // æ•°ç»„ä¹±åº    function shuffle(arr) &#123;        let len = arr.length;        for (let i = 0; i &lt; len - 1; i++) &#123;            let index = parseInt(Math.random() * (len - i));            let temp = arr[index];            arr[index] = arr[len - i - 1];            arr[len - i - 1] = temp;        &#125;        return arr;    &#125;    // éšæœºå­—ä¸²    function randomString(len) &#123;        len = len || 8;        let $chars = &#39;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&#39;;    /****é»˜è®¤å»æ‰äº†å®¹æ˜“æ··æ·†çš„å­—ç¬¦oOLl,9gq,Vv,Uu,I1****/        let maxPos = $chars.length;        let str = &#39;&#39;;        for (let i = 0; i &lt; len; i++) &#123;            str += $chars.charAt(Math.floor(Math.random() * maxPos));        &#125;        return str;    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°å¯¹è±¡æ·±æ‹·è´å‡½æ•°</title>
      <link href="/2022/09/29/js-deepClone/"/>
      <url>/2022/09/29/js-deepClone/</url>
      
        <content type="html"><![CDATA[<h3 id="å®ç°å¯¹è±¡æ·±æ‹·è´å‡½æ•°"><a href="#å®ç°å¯¹è±¡æ·±æ‹·è´å‡½æ•°" class="headerlink" title="å®ç°å¯¹è±¡æ·±æ‹·è´å‡½æ•°"></a>å®ç°å¯¹è±¡æ·±æ‹·è´å‡½æ•°</h3><p><strong>ps:</strong> <em><code>æ·±æ‹·è´</code>éœ€è¦æ ¹æ®ä¸åŒçš„ç±»å‹å€¼è¿›è¡Œä¸åŒçš„æ‹·è´ç‰¹æ€§,Regå¯¹è±¡çš„ä¸€äº›å±æ€§æ‹·è´ï¼Œ</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    // åˆ¤æ–­æ˜¯å¦æ˜¯æŸç±»å‹    const isType = (obj, type) =&gt; &#123;        if (typeof obj !== &#39;object&#39;) return false;        const typeString = Object.prototype.toString.call(obj);        let flag;        switch (type) &#123;            case &#39;Array&#39;:            flag = typeString === &#39;[object Array]&#39;;            break;            case &#39;Date&#39;:            flag = typeString === &#39;[object Date]&#39;;            break;            case &#39;RegExp&#39;:            flag = typeString === &#39;[object RegExp]&#39;;            break;            default:            flag = false;        &#125;        return flag;        &#125;;        // è·å–åˆ°æ­£åˆ™ä¿®é¥°ç¬¦        const getRegExp = re =&gt; &#123;        var flags = &#39;&#39;;        if (re.global) flags += &#39;g&#39;;        if (re.ignoreCase) flags += &#39;i&#39;;        if (re.multiline) flags += &#39;m&#39;;        return flags;        &#125;;        // æ·±åº¦å…‹éš†        const deepClone = parent =&gt; &#123;        // æ—§å¯¹è±¡ ï¼šæ–°å¯¹è±¡ map        let _map = new WeakMap();                const _clone = parent =&gt; &#123;            if (parent === null) return null;            if (typeof parent !== &#39;object&#39;) return parent;            if (_map.get(parent)) return _map.get(parent);                        let newParent;            if (isType(parent, &#39;Array&#39;)) &#123;                // å¯¹æ•°ç»„åšç‰¹æ®Šå¤„ç†                newParent = [];            &#125; else if (isType(parent, &#39;RegExp&#39;)) &#123;                // å¯¹æ­£åˆ™å¯¹è±¡åšç‰¹æ®Šå¤„ç†                newParent = new RegExp(parent.source, getRegExp(parent));                if (parent.lastIndex) &#123;                    newParent.lastIndex = parent.lastIndex;                &#125;            &#125; else if (isType(parent, &#39;Date&#39;)) &#123;                // å¯¹Dateå¯¹è±¡åšç‰¹æ®Šå¤„ç†                newParent = new Date(parent.getTime());            &#125; else &#123;                // å¤„ç†å¯¹è±¡åŸå‹                newParent = Object.create(parent.__proto__);            &#125;                        // æŠŠç´¢å¼•å¯¹è±¡å­˜å‚¨ï¼ŒåŸæ¥å¯¹è±¡ï¼šæ‹·è´åçš„å¯¹è±¡ï¼Œå¯èƒ½å†…éƒ¨ä¼šäº’ç›¸å¼•ç”¨            _map.set(parent, newParent);            for (let i in parent) &#123;                // é€’å½’                newParent[i] = _clone(parent[i]);            &#125;                    return newParent;        &#125;;        return _clone(parent);    &#125;;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç…§çŒ«ç”»è™ä¹‹å®ç°Promise</title>
      <link href="/2022/09/29/js-promiseDemo/"/>
      <url>/2022/09/29/js-promiseDemo/</url>
      
        <content type="html"><![CDATA[<h3 id="ç…§çŒ«ç”»è™ä¹‹å®ç°Promise"><a href="#ç…§çŒ«ç”»è™ä¹‹å®ç°Promise" class="headerlink" title="ç…§çŒ«ç”»è™ä¹‹å®ç°Promise"></a>ç…§çŒ«ç”»è™ä¹‹å®ç°Promise</h3><p><strong>ps:</strong> <em>ç®€å•çš„æ¨¡æ‹Ÿå®ç°ä¸€ä¸‹<code>Promise</code>ï¼Œå¥½åƒåªæ˜¯è¡Œåˆ°æ„ä¸åˆ°â€¦hhh~</em></p><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">  // promise(ä¸‘é™‹çš„)    class UglyPromise &#123;        constructor(callback)&#123;            this.status = &#39;pending&#39;            this.value = undefined            this.sucessCb = []            this.failedCb = []                        const resolve = value =&gt; &#123;            if(this.status === &#39;pending&#39;)&#123;                this.status = &#39;success&#39;                this.value = value                this.sucessCb.forEach(fn =&gt; &#123;                fn(value)                &#125;)            &#125;            &#125;                        const reject = value =&gt; &#123;            if(this.status === &#39;pending&#39;)&#123;                this.status = &#39;failed&#39;                this.value = value                this.failedCb.forEach(fn =&gt; &#123;                fn(value)                &#125;)            &#125;            &#125;                        try &#123;            callback(resolve, reject)            &#125; catch(e) &#123;            reject(e)            &#125;        &#125;            then(successCb, failedCb)&#123;                        if(typeof successCb === &#39;function&#39;)&#123;            if(this.status == &#39;pending&#39;)&#123;                this.sucessCb.push(successCb)            &#125;else&#123;                successCb(this.value)            &#125;            &#125;            if(typeof failedCb === &#39;function&#39;)&#123;                        if(this.status == &#39;pending&#39;)&#123;                this.failedCb.push(failedCb)            &#125;else&#123;                failedCb(this.value)            &#125;            &#125;                        return this        &#125;                catch(failedCb)&#123;            if(typeof failedCb === &#39;function&#39;)&#123;            if(this.status == &#39;pending&#39;)&#123;                this.failedCb.push(failedCb)            &#125;else&#123;                failedCb(this.value)            &#125;            &#125;        &#125;            &#125;     UglyPromise.resolve = value =&gt;&#123;        return new UglyPromise(rev =&gt; &#123;        rev(value)        &#125;)    &#125;        UglyPromise.race = arr =&gt;&#123;        return new MyPromise((rev,rej) =&gt; &#123;        for(let i = 0;i &lt; arr.length;i++)&#123;            arr[i].then(res =&gt; &#123;            rev(res)            &#125;).catch(e =&gt; &#123;            rej(e)            &#125;)        &#125;        &#125;)    &#125;        UglyPromise.all = arr =&gt;&#123;        let length = arr.length;        let count = 0;        let result = new Array(length);        if(length == 0)&#123;            return UglyPromise.resolve()        &#125;        return new UglyPromise((rev,rej) =&gt; &#123;        for(let i = 0;i&lt;arr.length;i++)&#123;            arr[i].then(res =&gt; &#123;            result[i] = res // ä¸ºäº†ç»“æœé¡ºåºä¸å¼€å§‹é¡ºåºä¸€è‡´            if(++count == length)&#123;                rev(result)            &#125;            &#125;).catch(e =&gt; &#123;            rej(e)            &#125;)        &#125;        &#125;)    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Js </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°Demoä¹‹CSS3då¤šé¢ä½“</title>
      <link href="/2022/09/28/html-css3Multilateral/"/>
      <url>/2022/09/28/html-css3Multilateral/</url>
      
        <content type="html"><![CDATA[<h3 id="CSS3då¤šé¢ä½“"><a href="#CSS3då¤šé¢ä½“" class="headerlink" title="CSS3då¤šé¢ä½“"></a>CSS3då¤šé¢ä½“</h3><p><strong>ps:</strong> <em>ç®€å•æ¢ç´¢css3çš„3då±æ€§ï¼Œåˆ¶ä½œä¸€ä¸ªç«‹ä½“çš„å¤šé¢ä½“ç»“æ„çš„è‡ªåŠ¨è½®æ’­ï¼Œå¯ä»¥æ ¹æ®æ‰‹åŠ¿è¿›è¡Œå·¦å³æ‹–æ‹½ï¼Œç®€æ˜“Demoå¦‚ä¸‹</em></p><h4 id="css-Code"><a href="#css-Code" class="headerlink" title="css Code"></a>css Code</h4><pre><code class="css">    /*nè¾¹å½¢çš„å¤–è§’å’Œä¸º360  360/n            nå˜å½¢çš„å†…è§’ 180 - 360/n*/    * &#123;        margin: 0;        padding: 0;    &#125;    html,    body &#123;        background-image: radial-gradient(#fff, #000);        height: 100%;        overflow: hidden;    &#125;    #wrap &#123;        position: absolute;        left: 0;        top: 0;        right: 0;        bottom: 0;        margin: auto;        width: 300px;        height: 300px;        /*border: 1px solid;*/        perspective: 1000px;        user-select: none;    &#125;    #wrap&gt;.box &#123;        position: absolute;        left: 0;        top: 0;        right: 0;        bottom: 0;        margin: auto;        width: 300px;        height: 300px;        transition: 10s transform;        transform-style: preserve-3d;        animation-name: rotate;        animation-duration: 48s;        animation-timing-function: linear;        animation-iteration-count: infinite;        animation-fill-mode: forwards;    &#125;    #wrap&gt;.box&gt;div &#123;        position: absolute;        width: 300px;        height: 300px;        background: rgba(0, 0, 0, 0.1);        text-align: center;        font: 50px/300px &quot;å¾®è½¯é›…é»‘&quot;;        backface-visibility: visible;    &#125;    @keyframes rotate &#123;        form &#123;            transform: rotateY(var(--beginDeg));        &#125;        to &#123;            transform: rotateY(var(--endDeg));        &#125;    &#125;    #wrap:hover&gt;.box &#123;        animation-play-state: paused;    &#125;</code></pre><h4 id="html-Code"><a href="#html-Code" class="headerlink" title="html Code"></a>html Code</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;CSS3då¤šé¢ä½“&lt;/title&gt;&lt;/head&gt;&lt;body style=&quot;--beginDeg:0deg;--endDeg:360deg;&quot;&gt;    &lt;div id=&quot;wrap&quot;&gt;        &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;    &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">   //nï¼šæ£±æ•°    window.onload = function () &#123;        createLZ(11);        var down = false;        var startX = 0;        var baseRotate = 0;        var currentRotate = 0;        var wrap = document.getElementById(&#39;wrap&#39;);        var body = document.body;        var boxNode = document.querySelector(&quot;#wrap &gt; .box&quot;);        // wrapå…ƒç´ é¼ æ ‡æŒ‰ä¸‹æ»‘åŠ¨äº‹ä»¶        wrap.onmousedown = function (e) &#123;            down = true            startX = e.clientX;        &#125;        wrap.onmousemove = function (e) &#123;            if (down) &#123;                currentRotate = baseRotate + (e.clientX - startX) / 10;                boxNode.style.transform = &quot;rotateY(&quot; + currentRotate + &quot;deg)&quot;;            &#125;        &#125;        window.onmouseup = function (e) &#123;            baseRotate = currentRotate;            down = false;            body.style.cssText = &quot;--beginDeg:&quot; + currentRotate + &quot;deg;--endDeg:&quot; + (currentRotate + 360) + &quot;deg;&quot;;        &#125;    &#125;    function createLZ(n) &#123;        var boxNode = document.querySelector(&quot;#wrap &gt; .box&quot;);        var stlyleNode = document.createElement(&quot;style&quot;);        //å¤–è§’        var degOut = 360 / n;        //å†…è§’        var degIn = 180 - 360 / n;        var text = &quot;&quot;;        var cssText = &quot;&quot;;        for (var i = 0; i &lt; n; i++) &#123;            text += &quot;&lt;div&gt;&lt;/div&gt;&quot;;            cssText += `#wrap &gt; .box &gt; div:nth-child($&#123;i + 1&#125;)&#123;transform: rotateY($&#123;i * degOut&#125;deg);background: url(./img/$&#123;i&#125;.jpeg) center no-repeat;&#125;`;        &#125;        boxNode.innerHTML = text;        var mianNode = document.querySelector(&quot;#wrap &gt; .box &gt; div&quot;);        //æ£±é•¿        var length = mianNode.offsetWidth;        cssText += &quot;#wrap &gt; .box&#123;transform-origin: center center -&quot; + (length / 2 * Math.tan((degIn / 2) * Math.PI / 180)) + &quot;px;&#125;&quot;;        cssText += &quot;#wrap &gt; .box &gt; div&#123;transform-origin: center center -&quot; + (length / 2 * Math.tan((degIn / 2) * Math.PI / 180)) + &quot;px;&#125;&quot;;        stlyleNode.innerHTML = cssText;        document.head.appendChild(stlyleNode);    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°Demoä¹‹H5å¹¸è¿å¤§è½¬ç›˜</title>
      <link href="/2022/09/28/html-lottery/"/>
      <url>/2022/09/28/html-lottery/</url>
      
        <content type="html"><![CDATA[<h3 id="H5å¹¸è¿å¤§è½¬ç›˜"><a href="#H5å¹¸è¿å¤§è½¬ç›˜" class="headerlink" title="H5å¹¸è¿å¤§è½¬ç›˜"></a>H5å¹¸è¿å¤§è½¬ç›˜</h3><p><strong>giteeåœ°å€: <a href="https://gitee.com/shaoyunfeng793/lucky-wheel">https://gitee.com/shaoyunfeng793/lucky-wheel</a></strong></p><h4 id="css-Code"><a href="#css-Code" class="headerlink" title="css Code"></a>css Code</h4><pre><code class="css">    * &#123;        margin: 0;        padding: 0;    &#125;    .container &#123;        background-image: url(./wheel-bodybg.png);        background-size: 100% 100%;        min-height: 100vh;        display: flex;        justify-content: center;        align-items: center;    &#125;    .wheel &#123;        width: 800px;        height: 800px;        position: relative;        background-image: url(./wheel-bg.png);        background-size: 100% 100%;        display: flex;        justify-content: center;        align-items: center;    &#125;    .wheel-light &#123;        background-image: url(./wheel-bg2.png) !important;    &#125;    #wheelCanvas &#123;        width: 700px;        height: 700px;    &#125;    .transition &#123;        transition: all 2s;    &#125;    .pointer &#123;        display: block;        position: absolute;        width: 200px;        height: 200px;        background-color: transparent;        background-image: url(./wheel-pointer.png);        background-repeat: no-repeat;        background-size: contain;        background-position: center;        border: none;        outline: none;    &#125;    .pointer-animation &#123;        animation: scale 1s infinite linear alternate;    &#125;    @keyframes scale &#123;        0% &#123;            transform: scale(1);        &#125;        100% &#123;            transform: scale(1.1);        &#125;    &#125;</code></pre><h4 id="html-Code"><a href="#html-Code" class="headerlink" title="html Code"></a>html Code</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;    &lt;meta name=&quot;author&quot; content=&quot;åŸŸå¶&quot;&gt;    &lt;title&gt;å¹¸è¿å¤§è½¬ç›˜&lt;/title&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;./alert.css&quot;&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;preloadImg1&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;preloadImg2&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;container&quot;&gt;        &lt;div class=&quot;wheel&quot;&gt;            &lt;canvas id=&quot;wheelCanvas&quot; width=&quot;600px&quot; height=&quot;600px&quot;&gt;&lt;/canvas&gt;            &lt;button class=&quot;pointer pointer-animation&quot; id=&quot;getAward&quot;&gt;&lt;/button&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/body&gt;&lt;script src=&quot;./alert.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    //æŠ½å¥–è½¬ç›˜    var turnWheel = &#123;        reaward: [            &#123; name: &#39;æ²™é›•è€äºŒè¾¾&#39;, icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065206471_siCEaEpi.jpg&#39; &#125;,            &#123; name: &#39;æ†¨æ†¨ç‹ç‹¸&#39;, icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065297220_maYiZc27.jpg&#39; &#125;,            &#123; name: &#39;é¸¡å¤ªç¾é˜¿å¤&#39;, icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065313260_JDMZ2GTW.jpg&#39; &#125;,            &#123; name: &#39;è‰²æƒ…ç‹‚é­”è¾‰&#39;, icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065328906_azt6pQD2.jpg&#39; &#125;,            &#123; name: &#39;æµ·ç‹ç‰›å¤´äºº&#39;, icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065383539_rBYtb5BJ.jpg&#39; &#125;,            // &#123; name: &#39;é«˜å†·ç”·ç¥æµå·&#39;, icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065369843_rny7mahE.jpg&#39; &#125;,        ], //è½¬ç›˜å¥–å“        colors: [], //è½¬ç›˜å¥–å“åŒºå—å¯¹åº”èƒŒæ™¯é¢œè‰²        fontColor: &#39;#8C42E9&#39;, //è½¬ç›˜å¥–å“å­—ä½“é¢œè‰²        radius: 300, //è½¬ç›˜åŠå¾„        textRadius: 320, //è½¬ç›˜å¥–å“ä½ç½®è·ç¦»åœ†å¿ƒçš„è·ç¦»    &#125;;    var timer = null;    var turning = false;    var wheelCanvas = document.getElementById(&quot;wheelCanvas&quot;);    turnWheel.reaward = turnWheel.reaward.map(d =&gt; &#123;        let img = new Image();        img.src = d.icon;        d.iconImg = img        return d    &#125;)    turnWheel.colors = [        &quot;#eecffe&quot;,        &quot;#FFFFFF&quot;,        &quot;#eecffe&quot;,        &quot;#FFFFFF&quot;,        &quot;#eecffe&quot;,        &quot;#FFFFFF&quot;,    ];    window.onload = function () &#123;        drawWheelCanvas(&#39;wheelCanvas&#39;, turnWheel, 700, 700);        var getAward = document.getElementById(&quot;getAward&quot;);        var index = 0; // ä¸­å¥–å°†å“çš„æ•°ç»„ä¸‹æ ‡        getAward.addEventListener(&quot;click&quot;, function () &#123;            if (turning) &#123;                return;            &#125;            turning = true;            index = Math.floor(Math.random() * turnWheel.reaward.length);            wheelCanvas.classList.add(&quot;transition&quot;);            twinkle(() =&gt; &#123;                smoke.alert(`&lt;p&gt;æ­å–œæŠ½åˆ°$&#123;turnWheel.reaward[index].name&#125;&lt;/p&gt;&lt;img style=&quot;width:200px;margin-top:10px&quot; src=&quot;$&#123;turnWheel.reaward[index].icon&#125;&quot; /&gt;`,//ç¬¬ä¸€ä¸ªå‚æ•°æç¤ºå†…å®¹                    function () &#123;                        wheelCanvas.style.transform = &#39;rotate(0deg)&#39;;                    &#125;,//ç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°                    &#123; ok: &quot;ç¡®å®š&quot; &#125;);//ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‰é’®çš„å±æ€§            &#125;);            rotateWheel(index, turnWheel.reaward.length)        &#125;)    &#125;;    // è½¬ç›˜ç¯é—ªçƒ callbackä¸ºæŠ½å¥–ç»“æœåæ‰§è¡Œå‡½æ•°    function twinkle(callback) &#123;        let wheel = document.querySelector(&#39;.wheel&#39;);        let pointer = document.querySelector(&#39;.pointer&#39;);        pointer.classList.remove(&#39;pointer-animation&#39;);        timer = setInterval(() =&gt; &#123;            wheel.classList.toggle(&#39;wheel-light&#39;);        &#125;, 200);        setTimeout(() =&gt; &#123;            turning = false;            wheelCanvas.classList.remove(&#39;transition&#39;);            wheel.classList.remove(&#39;wheel-light&#39;);            pointer.classList.add(&#39;pointer-animation&#39;);            timer &amp;&amp; clearInterval(timer);            typeof callback === &#39;function&#39; &amp;&amp; callback();        &#125;, 2000);    &#125;    // è·å–åƒç´ æ¯” é«˜æ¸…cavas    function getPixelRatio(context) &#123;        var backingStore = context.backingStorePixelRatio ||            context.webkitBackingStorePixelRatio ||            context.mozBackingStorePixelRatio ||            context.msBackingStorePixelRatio ||            context.oBackingStorePixelRatio ||            context.backingStorePixelRatio || 1;        return (window.devicePixelRatio || 1) / backingStore;    &#125;;    // æ—‹è½¬è½¬ç›˜ (index:ä¸­å¥–å°†å“çš„æ•°ç»„ä¸‹æ ‡)    function rotateWheel(awardIndex, awardCount) &#123;        let baseAngle = 360 / awardCount;        let rotateRound = 360 * 5; // æ¯æ¬¡æ—‹è½¬5åœˆ        wheelCanvas.style.transform = &#39;rotate(&#39; + ((360 - (baseAngle * awardIndex)) + rotateRound) + &#39;deg)&#39;;    &#125;    // ç»˜åˆ¶è½¬ç›˜    function drawWheelCanvas(canvasId, turnWheel, _w = 700, _h = 700) &#123;        let canvas = document.getElementById(canvasId);        let baseAngle = Math.PI * 2 / (turnWheel.reaward.length);        let ctx = canvas.getContext(&quot;2d&quot;);        let _ratio = getPixelRatio(ctx);        let canvasW = canvas.width = _w * _ratio;// ç”»æ¿çš„é«˜åº¦        let canvasH = canvas.height = _h * _ratio; // ç”»æ¿çš„å®½åº¦        canvas.style.width = _w + &#39;px&#39;;        canvas.style.height = _h + &#39;px&#39;;        ctx.scale(_ratio, _ratio); // éœ€è¦åœ¨æ”¾å¤§åŒç­‰å€æ•°ï¼Œå› ä¸ºç”»å¸ƒçš„å¤§å°æ˜¯å®é™…æ¸²æŸ“çš„3å€ä¹Ÿå°±æ˜¯è¢«ç¼©å°äº†        ctx.fillStyle = &quot;#fff000&quot;;        ctx.clearRect(0, 0, canvasW, canvasH);//å»æ‰èƒŒæ™¯é»˜è®¤çš„é»‘è‰²        ctx.font = &#39;26px Microsoft YaHei&#39;;        for (let index = 0; index &lt; turnWheel.reaward.length; index++) &#123;            let angle = index * baseAngle - baseAngle / 2 - Math.PI / 2;            let rewardName = turnWheel.reaward[index].name;            let translateX = _w * 0.5 + Math.cos(angle + baseAngle / 2) * turnWheel.textRadius;            let translateY = _h * 0.5 + Math.sin(angle + baseAngle / 2) * turnWheel.textRadius;            ctx.fillStyle = turnWheel.colors[index];            ctx.beginPath();            ctx.arc(_w * 0.5, _h * 0.5, Math.min(_w / 2, _h / 2), angle, angle + baseAngle, false);            ctx.lineTo(_w * 0.5, _h * 0.5);            ctx.fill();            ctx.save();            ctx.fillStyle = turnWheel.fontColor;            ctx.translate(translateX, translateY);            ctx.rotate(angle + baseAngle / 2 + Math.PI / 2);            ctx.fillText(rewardName, -ctx.measureText(rewardName).width / 2, 100);            //æ·»åŠ å¯¹åº”å›¾æ ‡            if (turnWheel.reaward[index] &amp;&amp; turnWheel.reaward[index].icon) &#123;                ctx.drawImage(turnWheel.reaward[index].iconImg, -40, 140, 80, 80);            &#125;            ctx.restore(); //å¾ˆå…³é”®        &#125;    &#125;&lt;/script&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°å›¾ç‰‡æ‡’åŠ è½½</title>
      <link href="/2022/09/28/html-imgLazyLoad/"/>
      <url>/2022/09/28/html-imgLazyLoad/</url>
      
        <content type="html"><![CDATA[<h3 id="å®ç°å›¾ç‰‡æ‡’åŠ è½½"><a href="#å®ç°å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å®ç°å›¾ç‰‡æ‡’åŠ è½½"></a>å®ç°å›¾ç‰‡æ‡’åŠ è½½</h3><p><strong>ps:</strong> <em>ç®€å•æ¢ç´¢ä¸‹<code>IntersectionObserver</code>è¿™ä¸ªapiï¼Œå¯ä»¥ç›‘å¬å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å¯è§†çª—å£ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ä»¥åŠdatasetå®ç°å›¾ç‰‡æ‡’åŠ è½½,ç®€æ˜“Demoå¦‚ä¸‹</em></p><h4 id="html-Code"><a href="#html-Code" class="headerlink" title="html Code"></a>html Code</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;    &lt;head&gt;        &lt;title&gt;&lt;/title&gt;        &lt;meta charset=&quot;UTF-8&quot;&gt;        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;        &lt;style&gt;            ul&#123;                list-style: none;            &#125;            img&#123;                width: 200px;                height: 200px;                background: #ddd;            &#125;        &lt;/style&gt;    &lt;/head&gt;    &lt;body&gt;    &lt;ul&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2943125063,3292210397&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2024373923,2140139723&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097108640&amp;di=85ad12ff7eb7f9572016612de1135925&amp;imgtype=0&amp;src=http%3A%2F%2Fa-ssl.duitang.com%2Fuploads%2Fitem%2F201407%2F18%2F20140718063817_s3Gnz.gif&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097122497&amp;di=1dff2a1a87c795199973d6f351ab88c6&amp;imgtype=0&amp;src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D1120712552%2C1362700559%26fm%3D214%26gp%3D0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097135282&amp;di=bbb17f186fa620e910ad079e5f998711&amp;imgtype=0&amp;src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D2230676464%2C2378994766%26fm%3D214%26gp%3D0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097163421&amp;di=8cd014f555709f796fe643adde44afc3&amp;imgtype=0&amp;src=http%3A%2F%2Fb.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2Fa044ad345982b2b7014e90fe33adcbef76099b33.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097184425&amp;di=4dbac84b3f735da758433becd9d4e9ee&amp;imgtype=0&amp;src=http%3A%2F%2Fcdn.duitang.com%2Fuploads%2Fitem%2F201407%2F13%2F20140713000933_dC2z3.thumb.700_0.gif&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097216523&amp;di=e3393b6449183d29f689e10783c9694b&amp;imgtype=0&amp;src=http%3A%2F%2Fimgsrc.baidu.com%2Fforum%2Fw%253d580%2Fsign%3D2b04e747fd1f4134e0370576151e95c1%2F05460b2442a7d933458f9ed7ad4bd11372f00167.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=149701518,1608548313&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2692023635,939588326&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=268907504,1715864470&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603097268873&amp;di=0ec97e5a4185af04869e5f150a1bf18d&amp;imgtype=0&amp;src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20171129%2Ff510b6d293264e0cba3072353e5eb067.gif&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=366871761,2360018043&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3251940718,1404860427&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2476878483,4014399276&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2055680573,3089421073&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;       &lt;li&gt;&lt;img data-src=&quot;https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3926221861,1230045557&amp;fm=26&amp;gp=0.jpg&quot; &gt;&lt;/li&gt;    &lt;/ul&gt;    &lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">  var imglist = document.querySelectorAll(&#39;img&#39;)  var observer = new IntersectionObserver(entries=&gt;&#123;      entries.forEach(entry=&gt;&#123;          if(entry.intersectionRatio&gt;0)&#123;              entry.target.src = entry.target.dataset.src              observer.unobserve(entry.target)          &#125;      &#125;)  &#125;)  imglist.forEach(imgitem=&gt;&#123;      observer.observe(imgitem)  &#125;)</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥æµ…å‡ºä¹‹æ‹–æ‹½äº‹ä»¶</title>
      <link href="/2022/09/28/vue-exploreDrag/"/>
      <url>/2022/09/28/vue-exploreDrag/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±å…¥æµ…å‡ºä¹‹æ‹–æ‹½äº‹ä»¶"><a href="#æ·±å…¥æµ…å‡ºä¹‹æ‹–æ‹½äº‹ä»¶" class="headerlink" title="æ·±å…¥æµ…å‡ºä¹‹æ‹–æ‹½äº‹ä»¶"></a>æ·±å…¥æµ…å‡ºä¹‹æ‹–æ‹½äº‹ä»¶</h3><p><strong>ps:</strong> <em>ç®€å•æ¢ç´¢ä¸‹dragäº‹ä»¶ï¼ŒæŠŠä¸€äº›å…ƒç´ æ‹‰åˆ°ç›®æ ‡åŒºåŸŸï¼Œè¿˜å¯ä»ç›®æ ‡åŒºåŸŸæ‹‰å›åŸæ¥åŒºåŸŸï¼Œç®€æ˜“Demoå¦‚ä¸‹</em></p><h4 id="vue-Code"><a href="#vue-Code" class="headerlink" title="vue Code"></a>vue Code</h4><pre><code class="vue">&lt;template&gt;  &lt;div class=&quot;app-container&quot;&gt;    &lt;div class=&quot;table-container&quot;&gt;      &lt;el-row :gutter=&quot;20&quot;&gt;        &lt;el-col :span=&quot;4&quot;&gt;          &lt;div class=&quot;drag-from-zone&quot;&gt;            &lt;div              class=&quot;drag-item&quot;              v-for=&quot;(item, idx) in list&quot;              :key=&quot;idx&quot;              draggable=&quot;true&quot;              @dragstart=&quot;dragstart($event, item, idx)&quot;              @dragend=&quot;dragend($event)&quot;            &gt;              &#123;&#123; item.name &#125;&#125;            &lt;/div&gt;          &lt;/div&gt;        &lt;/el-col&gt;        &lt;el-col :span=&quot;20&quot;&gt;          &lt;div            id=&quot;target&quot;            @dragover=&quot;dragover($event)&quot;            @drop=&quot;drop($event)&quot;            class=&quot;drag-target-zone&quot;          &gt;            &lt;div              class=&quot;drag-item&quot;              v-for=&quot;(item, idx) in targetList&quot;              :key=&quot;idx&quot;              @dragstart=&quot;dragstart($event, item)&quot;              @dragend=&quot;dragend($event)&quot;            &gt;              &#123;&#123; item.name &#125;&#125;              &lt;i class=&quot;el-icon-close&quot; @click=&quot;removeItem(item)&quot;&gt;&lt;/i&gt;            &lt;/div&gt;          &lt;/div&gt;        &lt;/el-col&gt;      &lt;/el-row&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;var tmpData;export default &#123;  data() &#123;    return &#123;      list: [        &#123; id: 1, name: &quot;å…ƒç´ 1&quot; &#125;,        &#123; id: 2, name: &quot;å…ƒç´ 2&quot; &#125;,        &#123; id: 3, name: &quot;å…ƒç´ 3&quot; &#125;,        &#123; id: 4, name: &quot;å…ƒç´ 4&quot; &#125;,        &#123; id: 5, name: &quot;å…ƒç´ 5&quot; &#125;,        &#123; id: 6, name: &quot;å…ƒç´ 6&quot; &#125;,        &#123; id: 7, name: &quot;å…ƒç´ 7&quot; &#125;,        &#123; id: 8, name: &quot;å…ƒç´ 8&quot; &#125;,        &#123; id: 9, name: &quot;å…ƒç´ 9&quot; &#125;,        &#123; id: 10, name: &quot;å…ƒç´ 10&quot; &#125;,      ],      targetList: [],    &#125;;  &#125;,  methods: &#123;    dragstart(e, item) &#123;      //æ‹–æ‹½å¼€å§‹æ—¶å°†itemå­˜å…¥vuex      console.log(&quot;æ‹–æ‹½å¼€å§‹ =&gt;&quot;, item);      tmpData = item;    &#125;,    dragend(e) &#123;      //æ‹–æ‹½ç»“æŸæ‰§è¡Œçš„äº‹ä»¶      console.log(&quot;æ‹–æ‹½ç»“æŸ =&gt;&quot;, e);    &#125;,    dragover(e) &#123;      //æ‹–æ‹½åœ¨è¿™ä¸ªdivé‡Œé¢æ‹–æ‹½æ—¶æ‰§è¡Œçš„äº‹ä»¶      //ä¸€å®šè¦æ‰§è¡ŒpreventDefault(),å¦åˆ™dropäº‹ä»¶ä¸ä¼šè¢«è§¦å‘      e.preventDefault();    &#125;,    drop(e) &#123;      //åœ¨divé‡Œæ‹–æ‹½åœæ­¢æ—¶æ‰§è¡Œçš„äº‹ä»¶      this.list = this.list.filter((item) =&gt; item.id !== tmpData.id);      this.targetList.push(tmpData);    &#125;,    removeItem(data)&#123;      this.targetList = this.targetList.filter((item) =&gt; item.id !== data.id);      this.list.push(data);    &#125;,  &#125;,&#125;;&lt;/script&gt;&lt;style scoped&gt;.drag-from-zone &#123;  display: flex;  flex-direction: column;  align-items: center;&#125;.drag-item &#123;  display: inline-block;  padding: 10px 5px;  cursor: pointer;  border: 1px solid #ccc;  margin-bottom: 10px;&#125;.drag-target-zone &#123;  height: 500px;  border: 1px solid #ccc;&#125;&lt;/style&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°Demoä¹‹æ»šåŠ¨ä¿¡æ¯å±•ç¤º/å¼¹å¹•</title>
      <link href="/2022/09/28/html-flutterAnimation/"/>
      <url>/2022/09/28/html-flutterAnimation/</url>
      
        <content type="html"><![CDATA[<h3 id="å¼¹å¹•é£˜å±-amp-ä¸€ä¸ªæ¨ªæ¡†å†…çš„æ»šåŠ¨ä¿¡æ¯å±•ç¤º"><a href="#å¼¹å¹•é£˜å±-amp-ä¸€ä¸ªæ¨ªæ¡†å†…çš„æ»šåŠ¨ä¿¡æ¯å±•ç¤º" class="headerlink" title="å¼¹å¹•é£˜å±&amp;ä¸€ä¸ªæ¨ªæ¡†å†…çš„æ»šåŠ¨ä¿¡æ¯å±•ç¤º"></a>å¼¹å¹•é£˜å±&amp;ä¸€ä¸ªæ¨ªæ¡†å†…çš„æ»šåŠ¨ä¿¡æ¯å±•ç¤º</h3><p><strong>ps:</strong> <em>å®ç°ä¸€ä¸ªå±•ç¤ºç»™ç”¨æˆ·ä¿¡æ¯çš„æ¨ªå¹…æ¡ï¼Œæ¯”å¦‚xxxè´­ä¹°äº†xxxäº§å“çœŸç§æ»šå±ä¿¡æ¯æˆ–è€…å¼¹å¹•æ•ˆæœï¼Œç®€æ˜“Demoå¦‚ä¸‹</em></p><h4 id="html-Code"><a href="#html-Code" class="headerlink" title="html Code"></a>html Code</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Demoä¹‹æ»šåŠ¨ä¿¡æ¯å±•ç¤º/å¼¹å¹•&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;!-- æŠŠé€‰æ‹©å™¨ä¼ å…¥åˆ°ä¸‹é¢çš„jså‡½æ•°ä¸­å³å¯ --&gt;    &lt;div id=&quot;walk&quot;&gt;&lt;/div&gt;     &lt;div id=&quot;danmaku&quot;&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="js-Code-For-ç«–å‘æ»šåŠ¨ä¿¡æ¯æ¡"><a href="#js-Code-For-ç«–å‘æ»šåŠ¨ä¿¡æ¯æ¡" class="headerlink" title="js Code For ç«–å‘æ»šåŠ¨ä¿¡æ¯æ¡"></a>js Code For ç«–å‘æ»šåŠ¨ä¿¡æ¯æ¡</h4><pre><code class="js">    function Walk(&#123;    selector,    speed = 1,    data = [],    danweiLucheng,&#125;) &#123;    this.dom = document.querySelector(selector);    this.data = data;    this.speed = speed;    this.danweiLucheng = danweiLucheng;    this.timer = null;    this.init();    this.render();&#125;;Walk.prototype.render = function () &#123;    let htmlStr = &#39;&#39;;    this.data.concat(this.data[0]).forEach(d =&gt; &#123;        htmlStr += `&lt;div class=&quot;walking-item&quot;&gt;                        &lt;div class=&quot;walking-text&quot;&gt;$&#123;d.message&#125;&lt;/div&gt;                        &lt;img class=&quot;walking-img&quot;                            src=&quot;$&#123;d.icon&#125;&quot;&gt;                    &lt;/div&gt;`;    &#125;);    this.dom.innerHTML = htmlStr;&#125;;Walk.prototype.init = function () &#123;    this.index = 0;    this.lucheng = 0;    this.storeLucheng = 0;&#125;;Walk.prototype.playFrame = function () &#123;    setTimeout(() =&gt; &#123;        this.lucheng = this.storeLucheng;        this.timer = setInterval(() =&gt; &#123;            this.lucheng += this.speed;            this.dom.style.transform = `translate3d(0, -$&#123;this.lucheng&#125;px, 0)`;            if (this.lucheng - this.storeLucheng &gt;= this.danweiLucheng) &#123;                this.index++; //ç¬¬ä¸€ä¸ªåŠ¨ç”»ç»“æŸï¼Œindexä¸‹æ ‡ä¸‹ç§»                this.storeLucheng = this.lucheng;                if (this.index &gt;= this.data.length) &#123;                    this.dom.style.transform = &#39;translate3d(0, 0, 0)&#39;;                    this.init();                &#125;                clearInterval(this.timer);                this.playFrame();            &#125;        &#125;, 20)    &#125;, 1500)&#125;;</code></pre><h4 id="js-Code-For-å¼¹å¹•"><a href="#js-Code-For-å¼¹å¹•" class="headerlink" title="js Code For å¼¹å¹•"></a>js Code For å¼¹å¹•</h4><pre><code class="js">; (function () &#123;    var Danmaku = window.Danmaku = function (&#123;        selector,        data = [],        speed = 1,        itemWidth = 180,        itemHeigth = 30,        spaceWidth = 50,    &#125;) &#123;        this.dom = document.querySelector(selector);        this.data = data;        this.speed = speed;        this.itemWidth = itemWidth;        this.itemHeigth = itemHeigth;        this.offsetWidth = this.data.length * this.itemWidth + (this.data.length - 1) * spaceWidth;        this.currentOffset = this.initOffset = window.innerWidth;        this.spaceWidth = spaceWidth;        this.init();        this.render();    &#125;    Danmaku.prototype.init = function () &#123;        this.currentOffset = this.initOffset;        this.dom.style.cssText = `width:$&#123;this.offsetWidth&#125;px;display:flex;background:transparent;transform:translate3d($&#123;this.initOffset&#125;px,0,0)`;    &#125;    Danmaku.prototype.render = function () &#123;        let htmlStr = &#39;&#39;;        let styleDom = document.createElement(&#39;style&#39;);        styleDom.innerHTML = `            .danmaku-item&#123;                width:$&#123;this.itemWidth&#125;px;                line-height:$&#123;this.itemHeigth&#125;px;                display:flex;                font-size: 12px;                color: #fff;                background: rgba(0, 0, 0, 0.7);                border-radius: $&#123;this.itemHeigth / 2&#125;px;                align-items: center;                margin-right: $&#123;this.spaceWidth&#125;px;                padding: 0 10px;            &#125;            .danmaku-item:nth-child(odd)&#123;                transform:translate3d(0,$&#123;this.itemHeigth / 3&#125;px,0);            &#125;            .danmaku-item:nth-child(even)&#123;                transform:translate3d(0,-$&#123;this.itemHeigth / 3&#125;px,0);            &#125;            .danmaku-text&#123;                flex: 1;                white-space: nowrap;                overflow: hidden;                text-overflow: ellipsis;                word-break: break-all;            &#125;            .danmaku-img&#123;                width: 26px;                height: 26px;                border-radius: 13px;                object-fit: contain;                margin-right: 10px;            &#125;            `;        document.head.appendChild(styleDom);        this.data.forEach(d =&gt; &#123;            htmlStr += `&lt;div class=&quot;danmaku-item&quot;&gt;                            &lt;img class=&quot;danmaku-img&quot; src=&quot;$&#123;d.icon&#125;&quot;&gt;                            &lt;div class=&quot;danmaku-text&quot;&gt;$&#123;d.time&#125; è·å¾—äº†æ˜Ÿè€€æ¬¾&lt;/div&gt;                        &lt;/div&gt;`;        &#125;);        this.dom.innerHTML = htmlStr;    &#125;;    Danmaku.prototype.playFrame = function () &#123;        this.currentOffset -= this.speed;        this.dom.style.transform = `translate3d($&#123;this.currentOffset&#125;px,0,0)`;        if (this.currentOffset &lt;= -this.offsetWidth) &#123;            this.init();        &#125;        requestAnimationFrame(() =&gt; &#123;            this.playFrame();        &#125;)    &#125;&#125;)();</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°Demoä¹‹è‡ªåŠ¨è½®æ’­åŠ æ‰‹åŠ¿æ»‘åŠ¨åç§»</title>
      <link href="/2022/09/28/html-autoCarouselWithHand/"/>
      <url>/2022/09/28/html-autoCarouselWithHand/</url>
      
        <content type="html"><![CDATA[<h3 id="è‡ªåŠ¨è½®æ’­åŠ æ‰‹åŠ¿æ»‘åŠ¨åç§»"><a href="#è‡ªåŠ¨è½®æ’­åŠ æ‰‹åŠ¿æ»‘åŠ¨åç§»" class="headerlink" title="è‡ªåŠ¨è½®æ’­åŠ æ‰‹åŠ¿æ»‘åŠ¨åç§»"></a>è‡ªåŠ¨è½®æ’­åŠ æ‰‹åŠ¿æ»‘åŠ¨åç§»</h3><p><strong>ps:</strong> <em>å®ç°ä¸€ä¸ªå•†å“å±•ç¤ºè‡ªåŠ¨å¾ªç¯è½®æ’­ï¼Œä¸”ç”¨æˆ·å¯ä»¥é€šè¿‡æ‰‹åŠ¿æ¥æ§åˆ¶å·¦å³æ»‘åŠ¨ï¼Œç®€æ˜“Demoå¦‚ä¸‹</em></p><h4 id="css-Code"><a href="#css-Code" class="headerlink" title="css Code"></a>css Code</h4><pre><code class="css">    * &#123;        padding: 0;        margin: 0;    &#125;    html,    body &#123;        width: 100%;        height: 100%;        overflow: hidden;    &#125;    .container &#123;        width: 100%;        height: 100%;        display: flex;        align-items: center;        justify-content: center;    &#125;    .awrad_outer &#123;        width: 300px;        overflow: hidden;    &#125;    .awrad_list &#123;        width: 900px;        overflow: hidden;    &#125;    .award_list_item &#123;        float: left;        background-color: skyblue;        width: 100px;        height: 100px;        line-height: 100px;        text-align: center;        font-size: 20px;        font-weight: bold;    &#125;</code></pre><h4 id="html-Code"><a href="#html-Code" class="headerlink" title="html Code"></a>html Code</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Demoä¹‹è‡ªåŠ¨è½®æ’­åŠ æ‰‹åŠ¿æ»‘åŠ¨åç§»&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;container&quot;&gt;        &lt;div class=&quot;awrad_outer&quot;&gt;            &lt;div class=&quot;awrad_list&quot;&gt;                &lt;div class=&quot;award_list_item&quot;&gt;1&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;2&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;3&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;4&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;5&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;6&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;7&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;8&lt;/div&gt;                &lt;div class=&quot;award_list_item&quot;&gt;9&lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    var awrad_outer = document.querySelector(&#39;.awrad_outer&#39;);    var awrad_list = document.querySelector(&#39;.awrad_list&#39;);    var offsetVal = 0;    var downX = null;    function move() &#123;        if (downX != null) &#123;            return;        &#125;        offsetVal--;        if (offsetVal &lt;= -600) &#123;            offsetVal = 0;        &#125;        awrad_list.style.transform = `translateX($&#123;offsetVal&#125;px)`;        requestAnimationFrame(move)    &#125;    move();    awrad_outer.addEventListener(&#39;touchstart&#39;, function (e) &#123;        downX = e.targetTouches[0].clientX;    &#125;)    awrad_outer.addEventListener(&#39;touchmove&#39;, function (e) &#123;        let clientX = e.targetTouches[0].clientX;        offsetVal += clientX - downX;        downX = clientX; // ä¿®æ­£å‚ç…§å€¼        if (offsetVal &gt; 0) &#123;            offsetVal = 0;        &#125; else if (offsetVal &lt; -600) &#123;            offsetVal = -600;        &#125;        awrad_list.style.transform = `translateX($&#123;offsetVal&#125;px)`;    &#125;)    awrad_outer.addEventListener(&#39;touchend&#39;, function (e) &#123;        downX = null;        move();    &#125;)</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°Demoä¹‹å¤§è½¬ç›˜ä¸‰è¿ä¸­</title>
      <link href="/2022/09/27/html-lotteryThreeCount/"/>
      <url>/2022/09/27/html-lotteryThreeCount/</url>
      
        <content type="html"><![CDATA[<h3 id="ç‚¹å‡»æŠ½å¥–å¤§è½¬ç›˜ä¸‰è¿ä¸­"><a href="#ç‚¹å‡»æŠ½å¥–å¤§è½¬ç›˜ä¸‰è¿ä¸­" class="headerlink" title="ç‚¹å‡»æŠ½å¥–å¤§è½¬ç›˜ä¸‰è¿ä¸­"></a>ç‚¹å‡»æŠ½å¥–å¤§è½¬ç›˜ä¸‰è¿ä¸­</h3><p><strong>ps:</strong> <em>å®ç°ä¸€ä¸ªæŠ½å¥–å¤§è½¬ç›˜æŠ½å¥–ä¸‰è¿ä¸­ï¼Œé€šè¿‡canvasæ¥ç»˜åˆ¶å¥–å“çš„è½¬ç›˜ï¼Œå…¶ä»–çš„èƒŒæ™¯é€šè¿‡htmlæ ‡ç­¾å®ç°ï¼Œç®€æ˜“Demoå¦‚ä¸‹</em></p><h4 id="html-amp-css-Code"><a href="#html-amp-css-Code" class="headerlink" title="html&amp;css Code"></a>html&amp;css Code</h4><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Demoä¹‹å¤§è½¬ç›˜ä¸‰è¿ä¸­&lt;/title&gt;    &lt;style&gt;        * &#123;            margin: 0;            padding: 0;        &#125;        html,        body &#123;            width: 100%;            height: 100%;            overflow: hidden;        &#125;        .container &#123;            width: 100%;            height: 100%;            overflow-x: hidden;            overflow-y: scroll;        &#125;        .canvas-wrapper &#123;            position: relative;        &#125;        .button &#123;            background: transparent;            outline: none;            border: none;            display: block;            position: absolute;            left: 0;            right: 0;            top: 56vh;            border-radius: 50%;            margin: 0 auto;            width: 100px;            height: 100px;        &#125;        #canvas &#123;            display: block;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;container&quot;&gt;        &lt;div class=&quot;canvas-wrapper&quot;&gt;            &lt;!-- æŠ½å¥–æŒ‰é’® --&gt;            &lt;button class=&quot;button&quot;&gt;&lt;/button&gt;            &lt;!-- canvasæ ¹æ®å¥–å“æ•°æ®ç»˜åˆ¶å¥–å“åœ†ç›˜ --&gt;            &lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;        &lt;/div&gt;        &lt;div&gt;ä¿¡æ¯&lt;/div&gt;    &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="js-Code"><a href="#js-Code" class="headerlink" title="js Code"></a>js Code</h4><pre><code class="js">    // è·å–åƒç´ æ¯” é«˜æ¸…cavas    function getPixelRatio(context) &#123;        var backingStore = context.backingStorePixelRatio ||            context.webkitBackingStorePixelRatio ||            context.mozBackingStorePixelRatio ||            context.msBackingStorePixelRatio ||            context.oBackingStorePixelRatio ||            context.backingStorePixelRatio || 1;        return (window.devicePixelRatio || 1) / backingStore;    &#125;;    // å…¬å…±ç±»    function Wheel() &#123;        let cav = document.getElementById(&#39;canvas&#39;);        this.pointerRange = [];        this.pointerIndex = 0;        this.turned = []; //å·²ç»è½¬ä¸­çš„ä¸‹æ ‡æ•°ç»„        this.turnTargetRotate = []; //è¦è½¬çš„ç›®çš„æ•°ç»„        this.turnedCount = 0; // è½¬ç›˜æ¬¡æ•°        this.startTurn = false; // å¼€å§‹æŠ½        this.delay = 20;        this.speed = 1; //è½¬é€Ÿ        this.ctx = cav.getContext(&#39;2d&#39;);        this.ratio = getPixelRatio(this.ctx);        this.w = window.innerWidth;        this.h = window.innerHeight;        cav.style.width = this.w + &#39;px&#39;;        cav.style.height = this.h + &#39;px&#39;;        cav.width = this.w * this.ratio;        cav.height = this.h * this.ratio;    &#125;    Wheel.prototype.updatePointerIndex = function (rotate) &#123;        let rotateV = rotate % 360;        let index = this.pointerRange.findIndex(d =&gt; rotateV &lt; d);        this.pointerIndex = index == -1 ? 0 : index;    &#125;    // è½¬ç›˜ç±»    function AwardRound(&#123;        cx,        cy,        cr = 100,        data = []    &#125;) &#123;        let angleStore = 0;        let sum = 0;        this.cx = cx * wheel.ratio;        this.cy = cy * wheel.ratio;        this.cr = cr * wheel.ratio;        this.count = data.length;        this.data = data.map((d, i) =&gt; &#123;            sum += d.angle;            let prevData = data[i - 1];            angleStore += d.angle + (i - 1 &gt; 0 ? prevData.angle : 0);            let startAngle = - 90 - (d.angle / 2);            d.beginAngle = startAngle / 180 * Math.PI;            d.endAngle = (startAngle + d.angle) / 180 * Math.PI;            if (i == 0) &#123;                d.rotateAngle = 0;            &#125; else &#123;                d.rotateAngle = angleStore;            &#125;            wheel.pointerRange.push(sum - (data[0].angle / 2));            if (d.isTurn) &#123;                let prevItem = wheel.pointerRange[i - 1];                wheel.turnTargetRotate.push(&#123;                    rotate: ((wheel.pointerRange[i] - prevItem) / 2 + prevItem) + 3 * 360,                    index: i                &#125;)            &#125;            return d;        &#125;);    &#125;    // æ­¤å¤„é€»è¾‘å°±æ˜¯ç»˜åˆ¶è½¬ç›˜çš„æ–¹æ³•    AwardRound.prototype.render = function () &#123;        let iconW = 36 * wheel.ratio;        this.data.forEach((d, i) =&gt; &#123;            wheel.ctx.save();            wheel.ctx.translate(this.cx, this.cy);            wheel.ctx.rotate((d.rotateAngle) * Math.PI / 360);            wheel.ctx.beginPath();            // ç”»åº•ç›˜            wheel.ctx.fillStyle = d.background || &#39;#fdf1e7&#39;;            wheel.ctx.arc(0, 0, this.cr, d.beginAngle, d.endAngle);            wheel.ctx.lineTo(0, 0);            wheel.ctx.fill()            // åå­—            wheel.ctx.fillStyle = d.color || &#39;#000&#39;;            wheel.ctx.font = `$&#123;d.fontSize ? d.fontSize * wheel.ratio : 16&#125;px å¾®è½¯é›…é»‘`;            wheel.ctx.textAlign = &#39;center&#39;;            wheel.ctx.fillText(d.name || &#39;&#39;, 0, - this.cr + 20 * wheel.ratio);            // å›¾ç‰‡            if (d.icon) &#123;                wheel.ctx.drawImage(d.icon, -iconW / 2, -this.cr + 40 * wheel.ratio, iconW, iconW);            &#125;            // æµ®å±‚            wheel.ctx.fillStyle = &#39;#000&#39;;            wheel.ctx.globalAlpha = i == wheel.pointerIndex || wheel.turned.includes(i) ? 0 : 0.5;            wheel.ctx.arc(0, 0, this.cr, d.beginAngle, d.endAngle);            wheel.ctx.lineTo(0, 0);            wheel.ctx.fill();            wheel.ctx.restore();        &#125;)    &#125;    // æŒ‰é’®ç±»    function Button(&#123;        cx,        cy    &#125;) &#123;        this.cx = cx * wheel.ratio;        this.cy = cy * wheel.ratio;        this.rotate = 0;    &#125;    Button.prototype.render = function () &#123;        let tmpW = 25 * wheel.ratio;        wheel.ctx.save()        wheel.ctx.translate(this.cx, this.cy);        wheel.ctx.rotate(this.rotate * Math.PI / 180);        wheel.ctx.beginPath()        wheel.ctx.fillStyle = &#39;#FF910B&#39;;        wheel.ctx.arc(0, 0, 50 * wheel.ratio, 0, Math.PI * 2);        wheel.ctx.fill();        wheel.ctx.moveTo(0, 0);        wheel.ctx.lineTo(tmpW, 0);        wheel.ctx.lineTo(0, -80 * wheel.ratio);        wheel.ctx.lineTo(-tmpW, 0);        wheel.ctx.fill();        wheel.ctx.restore();    &#125;    Button.prototype.update = function () &#123;        this.rotate += wheel.speed;        if (wheel.startTurn) &#123; // å¼€å§‹è½¬äº†            if (this.rotate &gt;= wheel.turnTargetRotate[wheel.turnedCount].rotate) &#123; // è¾¾åˆ°é˜ˆå€¼                wheel.delay--; //å»¶æ—¶å™¨                if (wheel.delay &gt; 0) &#123;                    // ä¼‘æ¯ä¸€ä¸‹                    this.rotate = wheel.turnTargetRotate[wheel.turnedCount].rotate; // ä¿æŒæŠ½åˆ°ä½ç½®                    wheel.speed = 0; //åœæ­¢è½¬åŠ¨                &#125; else &#123;                    // è½¬ä¸‹ä¸€æ¬¡                    wheel.turnedCount++; // ä¸­æ¬¡+1                    wheel.turned.push(wheel.turnTargetRotate[wheel.turnedCount - 1].index);                    wheel.speed = 20;                    wheel.delay = 20;                    if (wheel.turnedCount &lt; 3) &#123;                        this.rotate = 0;                    &#125;                &#125;            &#125;        &#125;        wheel.updatePointerIndex(this.rotate);    &#125;    // èƒŒæ™¯ç±»    function Background() &#123;        let img = new Image()        img.src = &#39;./bg.png&#39;;        this.bgImg = img;    &#125;    Background.prototype.render = function () &#123;        let iconW = (wheel.w - 10) * wheel.ratio;        let iconH = iconW * (846 / 720);        wheel.ctx.drawImage(this.bgImg, 5 * wheel.ratio, wheel.h * wheel.ratio - iconH, iconW, iconH)    &#125;    var awardData = [        &#123;            icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065297220_maYiZc27.jpg&#39;,            name: &#39;æ„Ÿè°¢å‚ä¸&#39;,            background: &#39;#fdf1e7&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;13&#39;,            angle: 45,        &#125;,        &#123;            icon: &#39;&#39;,            name: &#39;AirJordan1&#39;,            background: &#39;#FFB876&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;11&#39;,            angle: 25        &#125;,        &#123;            icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065313260_JDMZ2GTW.jpg&#39;,            name: &#39;iPhoneæ‰‹æœº&#39;,            background: &#39;#BD1600&#39;,            color: &#39;#FEE28A&#39;,            fontSize: &#39;11&#39;,            angle: 25,            isTurn: true,        &#125;,        &#123;            icon: &#39;&#39;,            name: &#39;è“ç‰™éŸ³ç®±&#39;,            background: &#39;#FFDAB2&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;11&#39;,            angle: 25        &#125;,        &#123;            icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065297220_maYiZc27.jpg&#39;,            name: &#39;æ„Ÿè°¢å‚ä¸&#39;,            background: &#39;#fdf1e7&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;13&#39;,            angle: 45,        &#125;,        &#123;            icon: &#39;&#39;,            name: &#39;AirJordan1&#39;,            background: &#39;#FFB876&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;11&#39;,            angle: 25        &#125;,        &#123;            icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065313260_JDMZ2GTW.jpg&#39;,            name: &#39;iPhoneæ‰‹æœº&#39;,            background: &#39;#BD1600&#39;,            color: &#39;#FEE28A&#39;,            fontSize: &#39;11&#39;,            angle: 25,            isTurn: true,        &#125;,        &#123;            icon: &#39;&#39;,            name: &#39;è“ç‰™éŸ³ç®±&#39;,            background: &#39;#FFDAB2&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;11&#39;,            angle: 25        &#125;,        &#123;            icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065297220_maYiZc27.jpg&#39;,            name: &#39;æ„Ÿè°¢å‚ä¸&#39;,            background: &#39;#fdf1e7&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;13&#39;,            angle: 45,        &#125;,        &#123;            icon: &#39;&#39;,            name: &#39;AirJordan1&#39;,            background: &#39;#FFB876&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;11&#39;,            angle: 25        &#125;,        &#123;            icon: &#39;http://mdhw.oss-cn-hangzhou.aliyuncs.com/goods/1652065313260_JDMZ2GTW.jpg&#39;,            name: &#39;iPhoneæ‰‹æœº&#39;,            background: &#39;#BD1600&#39;,            color: &#39;#FEE28A&#39;,            fontSize: &#39;11&#39;,            angle: 25,            isTurn: true,        &#125;,        &#123;            icon: &#39;&#39;,            name: &#39;è“ç‰™éŸ³ç®±&#39;,            background: &#39;#FFDAB2&#39;,            color: &#39;#C24603&#39;,            fontSize: &#39;11&#39;,            angle: 25        &#125;,    ];    awardData = awardData.map(d =&gt; &#123;        if (d.icon) &#123;            let img = new Image();            img.src = d.icon;            d.icon = img        &#125;        return d    &#125;)    // è¿™ä¸ªéœ€è¦å…ˆæ‰§è¡Œï¼Œ è€Œä¸”å¾—ç»‘å®šåˆ°å…¨å±€windowä¸Š    var wheel = new Wheel();     window.onload = function () &#123;        let iconH = (wheel.w - 10) * (846 / 720);        let cx = wheel.w / 2;        let cr = cx - 30;        let cy = wheel.h - iconH + cr + 25;        var btnDom = document.querySelector(&#39;.button&#39;)        var background = new Background();        var awardRound = new AwardRound(&#123;            cx: cx,            cy: cy,            cr: cr,            data: awardData        &#125;);        var button = new Button(&#123;            cx,            cy,        &#125;);        const clickDown = function () &#123;            if (wheel.startTurn) &#123;                btnDom.removeEventListener(&#39;click&#39;, clickDown);                return;            &#125;            button.rotate = 0;            wheel.startTurn = true;            wheel.speed = 20;        &#125;        btnDom.addEventListener(&#39;click&#39;, clickDown)        function doAnimate() &#123;            // æ¸…é™¤ç”»å¸ƒ            wheel.ctx.clearRect(0, 0, 10000, 10000)            // æ¸²æŸ“è½¬ç›˜èƒŒæ™¯            background.render();            // æ¸²æŸ“è½¬ç›˜            awardRound.render();            // æ¸²æŸ“æŒ‰é’®            button.update();            button.render();            if (wheel.turnedCount &lt; 3) &#123;                requestAnimationFrame(() =&gt; &#123;                    doAnimate();                &#125;)            &#125;        &#125;        doAnimate();    &#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
